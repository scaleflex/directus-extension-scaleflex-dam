import{defineComponent as e,h as t,resolveComponent as n,ref as i,onMounted as o,toRaw as a,isProxy as l,openBlock as r,createElementBlock as s,Fragment as c,createElementVNode as d,createVNode as u,withCtx as p,renderList as m,createCommentVNode as f,toDisplayString as h,createTextVNode as g,createBlock as v,normalizeStyle as y,renderSlot as b,normalizeClass as x}from"vue";import{useApi as w,useStores as _}from"@directus/extensions-sdk";
/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  */
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C.apply(this,arguments)}function E(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function A(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var I=A(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),M=A(/Edge/i),O=A(/firefox/i),$=A(/safari/i)&&!A(/chrome/i)&&!A(/android/i),N=A(/iP(ad|od|hone)/i),P=A(/chrome/i)&&A(/android/i),V={capture:!1,passive:!1};function j(e,t,n){e.addEventListener(t,n,!I&&V)}function F(e,t,n){e.removeEventListener(t,n,!I&&V)}function B(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function R(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function z(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&B(e,t):B(e,t))||i&&e===n)return e;if(e===n)break}while(e=R(e))}return null}var L,Y=/\s+/g;function X(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(Y," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(Y," ")}}function U(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function W(e,t){var n="";if("string"==typeof e)n=e;else do{var i=U(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function H(e,t,n){if(e){var i=e.getElementsByTagName(t),o=0,a=i.length;if(n)for(;o<a;o++)n(i[o],o);return i}return[]}function q(){var e=document.scrollingElement;return e||document.documentElement}function G(e,t,n,i,o){if(e.getBoundingClientRect||e===window){var a,l,r,s,c,d,u;if(e!==window&&e.parentNode&&e!==q()?(l=(a=e.getBoundingClientRect()).top,r=a.left,s=a.bottom,c=a.right,d=a.height,u=a.width):(l=0,r=0,s=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!I))do{if(o&&o.getBoundingClientRect&&("none"!==U(o,"transform")||n&&"static"!==U(o,"position"))){var p=o.getBoundingClientRect();l-=p.top+parseInt(U(o,"border-top-width")),r-=p.left+parseInt(U(o,"border-left-width")),s=l+a.height,c=r+a.width;break}}while(o=o.parentNode);if(i&&e!==window){var m=W(o||e),f=m&&m.a,h=m&&m.d;m&&(s=(l/=h)+(d/=h),c=(r/=f)+(u/=f))}return{top:l,left:r,bottom:s,right:c,width:u,height:d}}}function Q(e,t,n){for(var i=te(e,!0),o=G(e)[t];i;){var a=G(i)[n];if(!("top"===n||"left"===n?o>=a:o<=a))return i;if(i===q())break;i=te(i,!1)}return!1}function J(e,t,n,i){for(var o=0,a=0,l=e.children;a<l.length;){if("none"!==l[a].style.display&&l[a]!==ot.ghost&&(i||l[a]!==ot.dragged)&&z(l[a],n.draggable,e,!1)){if(o===t)return l[a];o++}a++}return null}function K(e,t){for(var n=e.lastElementChild;n&&(n===ot.ghost||"none"===U(n,"display")||t&&!B(n,t));)n=n.previousElementSibling;return n||null}function Z(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===ot.clone||t&&!B(e,t)||n++;return n}function ee(e){var t=0,n=0,i=q();if(e)do{var o=W(e),a=o.a,l=o.d;t+=e.scrollLeft*a,n+=e.scrollTop*l}while(e!==i&&(e=e.parentNode));return[t,n]}function te(e,t){if(!e||!e.getBoundingClientRect)return q();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=U(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return q();if(i||t)return n;i=!0}}}while(n=n.parentNode);return q()}function ne(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ie(e,t){return function(){if(!L){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),L=setTimeout((function(){L=void 0}),t)}}}function oe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function ae(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var le="Sortable"+(new Date).getTime();function re(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==U(e,"display")&&e!==ot.ghost){t.push({target:e,rect:G(e)});var n=D({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=W(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,a=0;t.forEach((function(e){var t=0,n=e.target,l=n.fromRect,r=G(n),s=n.prevFromRect,c=n.prevToRect,d=e.rect,u=W(n,!0);u&&(r.top-=u.f,r.left-=u.e),n.toRect=r,n.thisAnimationDuration&&ne(s,r)&&!ne(l,r)&&(d.top-r.top)/(d.left-r.left)==(l.top-r.top)/(l.left-r.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(d,s,c,i.options)),ne(r,l)||(n.prevFromRect=l,n.prevToRect=r,t||(t=i.options.animation),i.animate(n,d,r,t)),t&&(o=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){U(e,"transition",""),U(e,"transform","");var o=W(this.el),a=o&&o.a,l=o&&o.d,r=(t.left-n.left)/(a||1),s=(t.top-n.top)/(l||1);e.animatingX=!!r,e.animatingY=!!s,U(e,"transform","translate3d("+r+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),U(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),U(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){U(e,"transition",""),U(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var se=[],ce={initializeByDefault:!0},de={mount:function(e){for(var t in ce)ce.hasOwnProperty(t)&&!(t in e)&&(e[t]=ce[t]);se.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),se.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var o=e+"Global";se.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][o]&&t[i.pluginName][o](D({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](D({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var o in se.forEach((function(i){var o=i.pluginName;if(e.options[o]||i.initializeByDefault){var a=new i(e,t,e.options);a.sortable=e,a.options=e.options,e[o]=a,C(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);void 0!==a&&(e.options[o]=a)}},getEventProperties:function(e,t){var n={};return se.forEach((function(i){"function"==typeof i.eventProperties&&C(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return se.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(i=o.optionListeners[t].call(e[o.pluginName],n))})),i}};var ue=["evt"],pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,o=E(n,ue);de.pluginEvent.bind(ot)(e,t,D({dragEl:fe,parentEl:he,ghostEl:ge,rootEl:ve,nextEl:ye,lastDownEl:be,cloneEl:xe,cloneHidden:we,dragStarted:Ne,putSortable:Ce,activeSortable:ot.active,originalEvent:i,oldIndex:_e,oldDraggableIndex:De,newIndex:ke,newDraggableIndex:Se,hideGhostForTarget:et,unhideGhostForTarget:tt,cloneNowHidden:function(){we=!0},cloneNowShown:function(){we=!1},dispatchSortableEvent:function(e){me({sortable:t,name:e,originalEvent:i})}},o))};function me(e){!function(e){var t=e.sortable,n=e.rootEl,i=e.name,o=e.targetEl,a=e.cloneEl,l=e.toEl,r=e.fromEl,s=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,p=e.originalEvent,m=e.putSortable,f=e.extraEventProperties;if(t=t||n&&n[le]){var h,g=t.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||I||M?(h=document.createEvent("Event")).initEvent(i,!0,!0):h=new CustomEvent(i,{bubbles:!0,cancelable:!0}),h.to=l||n,h.from=r||n,h.item=o||n,h.clone=a,h.oldIndex=s,h.newIndex=c,h.oldDraggableIndex=d,h.newDraggableIndex=u,h.originalEvent=p,h.pullMode=m?m.lastPutMode:void 0;var y=D(D({},f),de.getEventProperties(i,t));for(var b in y)h[b]=y[b];n&&n.dispatchEvent(h),g[v]&&g[v].call(t,h)}}(D({putSortable:Ce,cloneEl:xe,targetEl:fe,rootEl:ve,oldIndex:_e,oldDraggableIndex:De,newIndex:ke,newDraggableIndex:Se},e))}var fe,he,ge,ve,ye,be,xe,we,_e,ke,De,Se,Te,Ce,Ee,Ae,Ie,Me,Oe,$e,Ne,Pe,Ve,je,Fe,Be=!1,Re=!1,ze=[],Le=!1,Ye=!1,Xe=[],Ue=!1,We=[],He="undefined"!=typeof document,qe=N,Ge=M||I?"cssFloat":"float",Qe=He&&!P&&!N&&"draggable"in document.createElement("div"),Je=function(){if(He){if(I)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ke=function(e,t){var n=U(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=J(e,0,t),a=J(e,1,t),l=o&&U(o),r=a&&U(a),s=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+G(o).width,c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+G(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&"none"!==l.float){var d="left"===l.float?"left":"right";return!a||"both"!==r.clear&&r.clear!==d?"horizontal":"vertical"}return o&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||s>=i&&"none"===n[Ge]||a&&"none"===n[Ge]&&s+c>i)?"vertical":"horizontal"},Ze=function(e){function t(e,n){return function(i,o,a,l){var r=i.options.group.name&&o.options.group.name&&i.options.group.name===o.options.group.name;if(null==e&&(n||r))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(i,o,a,l),n)(i,o,a,l);var s=(n?i:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},i=e.group;i&&"object"==S(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},et=function(){!Je&&ge&&U(ge,"display","none")},tt=function(){!Je&&ge&&U(ge,"display","")};He&&document.addEventListener("click",(function(e){if(Re)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Re=!1,!1}),!0);var nt=function(e){if(fe){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,a=e.clientY,ze.some((function(e){var t=e[le].options.emptyInsertThreshold;if(t&&!K(e)){var n=G(e),i=o>=n.left-t&&o<=n.right+t,r=a>=n.top-t&&a<=n.bottom+t;return i&&r?l=e:void 0}})),l);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[le]._onDragOver(n)}}var o,a,l},it=function(e){fe&&fe.parentNode[le]._isOutsideThisEl(e.target)};function ot(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=C({},t),e[le]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ke(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ot.supportPointer&&"PointerEvent"in window&&!$,emptyInsertThreshold:5};for(var i in de.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var o in Ze(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Qe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?j(e,"pointerdown",this._onTapStart):(j(e,"mousedown",this._onTapStart),j(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(e,"dragover",this),j(e,"dragenter",this)),ze.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),C(this,re())}function at(e,t,n,i,o,a,l,r){var s,c,d=e[le],u=d.options.onMove;return!window.CustomEvent||I||M?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=i,s.related=o||t,s.relatedRect=a||G(t),s.willInsertAfter=r,s.originalEvent=l,e.dispatchEvent(s),u&&(c=u.call(d,s,l)),c}function lt(e){e.draggable=!1}function rt(){Ue=!1}function st(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function ct(e){return setTimeout(e,0)}function dt(e){return clearTimeout(e)}ot.prototype={constructor:ot,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Pe=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,fe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,o=i.preventOnFilter,a=e.type,l=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,r=(l||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,c=i.filter;if(function(e){We.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&We.push(i)}}(n),!fe&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!$||!r||"SELECT"!==r.tagName.toUpperCase())&&!((r=z(r,i.draggable,n,!1))&&r.animated||be===r)){if(_e=Z(r),De=Z(r,i.draggable),"function"==typeof c){if(c.call(this,e,r,this))return me({sortable:t,rootEl:s,name:"filter",targetEl:r,toEl:n,fromEl:n}),pe("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=z(s,i.trim(),n,!1))return me({sortable:t,rootEl:i,name:"filter",targetEl:r,fromEl:n,toEl:n}),pe("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());i.handle&&!z(s,i.handle,n,!1)||this._prepareDragStart(e,l,r)}}},_prepareDragStart:function(e,t,n){var i,o=this,a=o.el,l=o.options,r=a.ownerDocument;if(n&&!fe&&n.parentNode===a){var s=G(n);if(ve=a,he=(fe=n).parentNode,ye=fe.nextSibling,be=n,Te=l.group,ot.dragged=fe,Ee={target:fe,clientX:(t||e).clientX,clientY:(t||e).clientY},Oe=Ee.clientX-s.left,$e=Ee.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,fe.style["will-change"]="all",i=function(){pe("delayEnded",o,{evt:e}),ot.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!O&&o.nativeDraggable&&(fe.draggable=!0),o._triggerDragStart(e,t),me({sortable:o,name:"choose",originalEvent:e}),X(fe,l.chosenClass,!0))},l.ignore.split(",").forEach((function(e){H(fe,e.trim(),lt)})),j(r,"dragover",nt),j(r,"mousemove",nt),j(r,"touchmove",nt),j(r,"mouseup",o._onDrop),j(r,"touchend",o._onDrop),j(r,"touchcancel",o._onDrop),O&&this.nativeDraggable&&(this.options.touchStartThreshold=4,fe.draggable=!0),pe("delayStart",this,{evt:e}),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(M||I))i();else{if(ot.eventCanceled)return void this._onDrop();j(r,"mouseup",o._disableDelayedDrag),j(r,"touchend",o._disableDelayedDrag),j(r,"touchcancel",o._disableDelayedDrag),j(r,"mousemove",o._delayedDragTouchMoveHandler),j(r,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&j(r,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,l.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){fe&&lt(fe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):j(document,t?"touchmove":"mousemove",this._onTouchMove):(j(fe,"dragend",this),j(ve,"dragstart",this._onDragStart));try{document.selection?ct((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Be=!1,ve&&fe){pe("dragStarted",this,{evt:t}),this.nativeDraggable&&j(document,"dragover",it);var n=this.options;!e&&X(fe,n.dragClass,!1),X(fe,n.ghostClass,!0),ot.active=this,e&&this._appendGhost(),me({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ae){this._lastX=Ae.clientX,this._lastY=Ae.clientY,et();for(var e=document.elementFromPoint(Ae.clientX,Ae.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ae.clientX,Ae.clientY))!==t;)t=e;if(fe.parentNode[le]._isOutsideThisEl(e),t)do{if(t[le]){if(t[le]._onDragOver({clientX:Ae.clientX,clientY:Ae.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);tt()}},_onTouchMove:function(e){if(Ee){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=ge&&W(ge,!0),l=ge&&a&&a.a,r=ge&&a&&a.d,s=qe&&Fe&&ee(Fe),c=(o.clientX-Ee.clientX+i.x)/(l||1)+(s?s[0]-Xe[0]:0)/(l||1),d=(o.clientY-Ee.clientY+i.y)/(r||1)+(s?s[1]-Xe[1]:0)/(r||1);if(!ot.active&&!Be){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ge){a?(a.e+=c-(Ie||0),a.f+=d-(Me||0)):a={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");U(ge,"webkitTransform",u),U(ge,"mozTransform",u),U(ge,"msTransform",u),U(ge,"transform",u),Ie=c,Me=d,Ae=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ge){var e=this.options.fallbackOnBody?document.body:ve,t=G(fe,!0,qe,!0,e),n=this.options;if(qe){for(Fe=e;"static"===U(Fe,"position")&&"none"===U(Fe,"transform")&&Fe!==document;)Fe=Fe.parentNode;Fe!==document.body&&Fe!==document.documentElement?(Fe===document&&(Fe=q()),t.top+=Fe.scrollTop,t.left+=Fe.scrollLeft):Fe=q(),Xe=ee(Fe)}X(ge=fe.cloneNode(!0),n.ghostClass,!1),X(ge,n.fallbackClass,!0),X(ge,n.dragClass,!0),U(ge,"transition",""),U(ge,"transform",""),U(ge,"box-sizing","border-box"),U(ge,"margin",0),U(ge,"top",t.top),U(ge,"left",t.left),U(ge,"width",t.width),U(ge,"height",t.height),U(ge,"opacity","0.8"),U(ge,"position",qe?"absolute":"fixed"),U(ge,"zIndex","100000"),U(ge,"pointerEvents","none"),ot.ghost=ge,e.appendChild(ge),U(ge,"transform-origin",Oe/parseInt(ge.style.width)*100+"% "+$e/parseInt(ge.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,o=n.options;pe("dragStart",this,{evt:e}),ot.eventCanceled?this._onDrop():(pe("setupClone",this),ot.eventCanceled||((xe=ae(fe)).draggable=!1,xe.style["will-change"]="",this._hideClone(),X(xe,this.options.chosenClass,!1),ot.clone=xe),n.cloneId=ct((function(){pe("clone",n),ot.eventCanceled||(n.options.removeCloneOnHide||ve.insertBefore(xe,fe),n._hideClone(),me({sortable:n,name:"clone"}))})),!t&&X(fe,o.dragClass,!0),t?(Re=!0,n._loopId=setInterval(n._emulateDragOver,50)):(F(document,"mouseup",n._onDrop),F(document,"touchend",n._onDrop),F(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,fe)),j(document,"drop",n),U(fe,"transform","translateZ(0)")),Be=!0,n._dragStartId=ct(n._dragStarted.bind(n,t,e)),j(document,"selectstart",n),Ne=!0,$&&U(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,o,a=this.el,l=e.target,r=this.options,s=r.group,c=ot.active,d=Te===s,u=r.sort,p=Ce||c,m=this,f=!1;if(!Ue){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=z(l,r.draggable,a,!0),I("dragOver"),ot.eventCanceled)return f;if(fe.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||m._ignoreWhileAnimating===l)return O(!1);if(Re=!1,c&&!r.disabled&&(d?u||(i=he!==ve):Ce===this||(this.lastPutMode=Te.checkPull(this,c,fe,e))&&s.checkPut(this,c,fe,e))){if(o="vertical"===this._getDirection(e,l),t=G(fe),I("dragOverValid"),ot.eventCanceled)return f;if(i)return he=ve,M(),this._hideClone(),I("revert"),ot.eventCanceled||(ye?ve.insertBefore(fe,ye):ve.appendChild(fe)),O(!0);var h=K(a,r.draggable);if(!h||function(e,t,n){var i=G(K(n.el,n.options.draggable)),o=10;return t?e.clientX>i.right+o||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+o}(e,o,this)&&!h.animated){if(h===fe)return O(!1);if(h&&a===e.target&&(l=h),l&&(n=G(l)),!1!==at(ve,a,fe,t,l,n,e,!!l))return M(),a.appendChild(fe),he=a,$(),O(!0)}else if(h&&function(e,t,n){var i=G(J(n.el,0,n.options,!0)),o=10;return t?e.clientX<i.left-o||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-o||e.clientY<i.bottom&&e.clientX<i.left}(e,o,this)){var g=J(a,0,r,!0);if(g===fe)return O(!1);if(n=G(l=g),!1!==at(ve,a,fe,t,l,n,e,!1))return M(),a.insertBefore(fe,g),he=a,$(),O(!0)}else if(l.parentNode===a){n=G(l);var v,y,b,x=fe.parentNode!==a,w=!function(e,t,n){var i=n?e.left:e.top,o=n?e.right:e.bottom,a=n?e.width:e.height,l=n?t.left:t.top,r=n?t.right:t.bottom,s=n?t.width:t.height;return i===l||o===r||i+a/2===l+s/2}(fe.animated&&fe.toRect||t,l.animated&&l.toRect||n,o),_=o?"top":"left",k=Q(l,"top","top")||Q(fe,"top","top"),S=k?k.scrollTop:void 0;if(Pe!==l&&(y=n[_],Le=!1,Ye=!w&&r.invertSwap||x),v=function(e,t,n,i,o,a,l,r){var s=i?e.clientY:e.clientX,c=i?n.height:n.width,d=i?n.top:n.left,u=i?n.bottom:n.right,p=!1;if(!l)if(r&&je<c*o){if(!Le&&(1===Ve?s>d+c*a/2:s<u-c*a/2)&&(Le=!0),Le)p=!0;else if(1===Ve?s<d+je:s>u-je)return-Ve}else if(s>d+c*(1-o)/2&&s<u-c*(1-o)/2)return function(e){return Z(fe)<Z(e)?1:-1}(t);if((p=p||l)&&(s<d+c*a/2||s>u-c*a/2))return s>d+c/2?1:-1;return 0}(e,l,n,o,w?1:r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,Ye,Pe===l),0!==v){var T=Z(fe);do{T-=v,b=he.children[T]}while(b&&("none"===U(b,"display")||b===ge))}if(0===v||b===l)return O(!1);Pe=l,Ve=v;var C=l.nextElementSibling,E=!1,A=at(ve,a,fe,t,l,n,e,E=1===v);if(!1!==A)return 1!==A&&-1!==A||(E=1===A),Ue=!0,setTimeout(rt,30),M(),E&&!C?a.appendChild(fe):l.parentNode.insertBefore(fe,E?C:l),k&&oe(k,0,S-k.scrollTop),he=fe.parentNode,void 0===y||Ye||(je=Math.abs(y-G(l)[_])),$(),O(!0)}if(a.contains(fe))return O(!1)}return!1}function I(r,s){pe(r,m,D({evt:e,isOwner:d,axis:o?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:u,fromSortable:p,target:l,completed:O,onMove:function(n,i){return at(ve,a,fe,t,n,G(n),e,i)},changed:$},s))}function M(){I("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function O(t){return I("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(m),m!==p&&(X(fe,Ce?Ce.options.ghostClass:c.options.ghostClass,!1),X(fe,r.ghostClass,!0)),Ce!==m&&m!==ot.active?Ce=m:m===ot.active&&Ce&&(Ce=null),p===m&&(m._ignoreWhileAnimating=l),m.animateAll((function(){I("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===fe&&!fe.animated||l===a&&!l.animated)&&(Pe=null),r.dragoverBubble||e.rootEl||l===document||(fe.parentNode[le]._isOutsideThisEl(e.target),!t&&nt(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function $(){ke=Z(fe),Se=Z(fe,r.draggable),me({sortable:m,name:"change",toEl:a,newIndex:ke,newDraggableIndex:Se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",nt),F(document,"mousemove",nt),F(document,"touchmove",nt)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ke=Z(fe),Se=Z(fe,n.draggable),pe("drop",this,{evt:e}),he=fe&&fe.parentNode,ke=Z(fe),Se=Z(fe,n.draggable),ot.eventCanceled||(Be=!1,Ye=!1,Le=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),dt(this.cloneId),dt(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),$&&U(document.body,"user-select",""),U(fe,"transform",""),e&&(Ne&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ge&&ge.parentNode&&ge.parentNode.removeChild(ge),(ve===he||Ce&&"clone"!==Ce.lastPutMode)&&xe&&xe.parentNode&&xe.parentNode.removeChild(xe),fe&&(this.nativeDraggable&&F(fe,"dragend",this),lt(fe),fe.style["will-change"]="",Ne&&!Be&&X(fe,Ce?Ce.options.ghostClass:this.options.ghostClass,!1),X(fe,this.options.chosenClass,!1),me({sortable:this,name:"unchoose",toEl:he,newIndex:null,newDraggableIndex:null,originalEvent:e}),ve!==he?(ke>=0&&(me({rootEl:he,name:"add",toEl:he,fromEl:ve,originalEvent:e}),me({sortable:this,name:"remove",toEl:he,originalEvent:e}),me({rootEl:he,name:"sort",toEl:he,fromEl:ve,originalEvent:e}),me({sortable:this,name:"sort",toEl:he,originalEvent:e})),Ce&&Ce.save()):ke!==_e&&ke>=0&&(me({sortable:this,name:"update",toEl:he,originalEvent:e}),me({sortable:this,name:"sort",toEl:he,originalEvent:e})),ot.active&&(null!=ke&&-1!==ke||(ke=_e,Se=De),me({sortable:this,name:"end",toEl:he,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){pe("nulling",this),ve=fe=he=ge=ye=xe=be=we=Ee=Ae=Ne=ke=Se=_e=De=Pe=Ve=Ce=Te=ot.dragged=ot.ghost=ot.clone=ot.active=null,We.forEach((function(e){e.checked=!0})),We.length=Ie=Me=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":fe&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,o=n.length,a=this.options;i<o;i++)z(e=n[i],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||st(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach((function(e,t){var o=i.children[t];z(o,this.options.draggable,i,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return z(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=de.modifyOption(this,e,t);n[e]=void 0!==i?i:t,"group"===e&&Ze(n)},destroy:function(){pe("destroy",this);var e=this.el;e[le]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ze.splice(ze.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!we){if(pe("hideClone",this),ot.eventCanceled)return;U(xe,"display","none"),this.options.removeCloneOnHide&&xe.parentNode&&xe.parentNode.removeChild(xe),we=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(we){if(pe("showClone",this),ot.eventCanceled)return;fe.parentNode!=ve||this.options.group.revertClone?ye?ve.insertBefore(xe,ye):ve.appendChild(xe):ve.insertBefore(xe,fe),this.options.group.revertClone&&this.animate(fe,xe),U(xe,"display",""),we=!1}}else this._hideClone()}},He&&j(document,"touchmove",(function(e){(ot.active||Be)&&e.cancelable&&e.preventDefault()})),ot.utils={on:j,off:F,css:U,find:H,is:function(e,t){return!!z(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:ie,closest:z,toggleClass:X,clone:ae,index:Z,nextTick:ct,cancelNextTick:dt,detectDirection:Ke,getChild:J},ot.get=function(e){return e[le]},ot.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(ot.utils=D(D({},ot.utils),e.utils)),de.mount(e)}))},ot.create=function(e,t){return new ot(e,t)},ot.version="1.14.0";var ut,pt,mt,ft,ht,gt,vt=[],yt=!1;function bt(){vt.forEach((function(e){clearInterval(e.pid)})),vt=[]}function xt(){clearInterval(gt)}var wt=ie((function(e,t,n,i){if(t.scroll){var o,a=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,s=t.scrollSpeed,c=q(),d=!1;pt!==n&&(pt=n,bt(),ut=t.scroll,o=t.scrollFn,!0===ut&&(ut=te(n,!0)));var u=0,p=ut;do{var m=p,f=G(m),h=f.top,g=f.bottom,v=f.left,y=f.right,b=f.width,x=f.height,w=void 0,_=void 0,k=m.scrollWidth,D=m.scrollHeight,S=U(m),T=m.scrollLeft,C=m.scrollTop;m===c?(w=b<k&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),_=x<D&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(w=b<k&&("auto"===S.overflowX||"scroll"===S.overflowX),_=x<D&&("auto"===S.overflowY||"scroll"===S.overflowY));var E=w&&(Math.abs(y-a)<=r&&T+b<k)-(Math.abs(v-a)<=r&&!!T),A=_&&(Math.abs(g-l)<=r&&C+x<D)-(Math.abs(h-l)<=r&&!!C);if(!vt[u])for(var I=0;I<=u;I++)vt[I]||(vt[I]={});vt[u].vx==E&&vt[u].vy==A&&vt[u].el===m||(vt[u].el=m,vt[u].vx=E,vt[u].vy=A,clearInterval(vt[u].pid),0==E&&0==A||(d=!0,vt[u].pid=setInterval(function(){i&&0===this.layer&&ot.active._onTouchMove(ht);var t=vt[this.layer].vy?vt[this.layer].vy*s:0,n=vt[this.layer].vx?vt[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(ot.dragged.parentNode[le],n,t,e,ht,vt[this.layer].el)||oe(vt[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==c&&(p=te(p,!1)));yt=d}}),30),_t=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,l=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(t){var s=n||o;l();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);r(),s&&!s.el.contains(d)&&(a("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function kt(){}function Dt(){}kt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=J(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:_t},C(kt,{pluginName:"revertOnSpill"}),Dt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:_t},C(Dt,{pluginName:"removeOnSpill"}),ot.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):t.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),xt(),bt(),clearTimeout(L),L=void 0},nulling:function(){ht=pt=ut=yt=gt=mt=ft=null,vt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(i,o);if(ht=e,t||this.options.forceAutoScrollFallback||M||I||$){wt(e,this.options,a,t);var l=te(a,!0);!yt||gt&&i===mt&&o===ft||(gt&&xt(),gt=setInterval((function(){var a=te(document.elementFromPoint(i,o),!0);a!==l&&(l=a,bt()),wt(e,n.options,a,t)}),10),mt=i,ft=o)}else{if(!this.options.bubbleScroll||te(a,!0)===q())return void bt();wt(e,this.options,te(a,!1),!1)}}},C(e,{pluginName:"scroll",initializeByDefault:!0})}),ot.mount(Dt,kt);const St="undefined"!=typeof window?window.console:global.console;const Tt=/-(\w)/g,Ct=function(e){const t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}((e=>e.replace(Tt,((e,t)=>t?t.toUpperCase():""))));function Et(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function At(e,t,n){const i=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,i)}function It(e,t){this.$nextTick((()=>this.$emit(e.toLowerCase(),t)))}function Mt(e){return t=>{null!==this.realList&&this["onDrag"+e](t),It.call(this,e,t)}}const Ot=["Start","Add","Remove","Update","End"],$t=["Choose","Unchoose","Sort","Filter","Clone"],Nt=["Move",...Ot,...$t].map((e=>"on"+e));let Pt=null;const Vt={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},jt=e({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Ot.map((e=>e.toLowerCase())),...$t.map((e=>e.toLowerCase()))],props:Vt,data:()=>({transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}),render(){const e=this.$slots.default?this.$slots.default():null,n=(i=this.$attrs,(o=this.componentData)?{...o.props,...o.attrs}:i);var i,o;return e?(this.transitionMode=function(e){if(!e||1!==e.length)return!1;const[{type:t}]=e;return!!t&&(n=t.name,["transition-group","TransitionGroup"].includes(n));var n}(e),t(this.getTag(),n,e)):t(this.getTag(),n,[])},created(){null!==this.list&&null!==this.modelValue&&St.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};Ot.forEach((t=>{e["on"+t]=Mt.call(this,t)})),$t.forEach((t=>{e["on"+t]=It.bind(this,t)}));const t=Object.keys(this.$attrs).reduce(((e,t)=>(e[Ct(t)]=this.$attrs[t],e)),{}),n=Object.assign({},t,e,{onMove:(e,t)=>this.onDragMove(e,t)});!("draggable"in n)&&(n.draggable=">*");const i=1===this.$el.nodeType?this.$el:this.$el.parentElement;this._sortable=new ot(i,n),i.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{void 0!==this._sortable&&this._sortable.destroy()}catch(e){}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?n(this.component):this.tag},updateOptions(e){for(var t in e){const n=Ct(t);-1===Nt.indexOf(n)&&this._sortable.option(n,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick((()=>{this.visibleIndexes=function(e,t,n,i){if(!e)return[];const o=Object.values(e),a=t.length-i;return[...t].map(((e,t)=>t>=a?o.length:o.indexOf(e)))}(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)}))},getUnderlyingVm(e){const t=function(e,t){return Object.values(e).indexOf(t)}(this.getChildrenNodes()||[],e);if(-1===t)return null;return{index:t,element:this.realList[t]}},emitChanges(e){this.$nextTick((()=>{this.$emit("change",e)}))},alterList(e){if(this.list)return void e(this.list);const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){this.alterList((e=>e.splice(...arguments)))},updatePosition(e,t){this.alterList((n=>n.splice(t,0,n.splice(e,1)[0])))},getVmIndex(e){const t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;this.getChildrenNodes()[e].data=null;const t=this.getComponent();t.children=[],t.kept=void 0},onDragStart(e){this.computeIndexes(),this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),Pt=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;Et(e.item);const n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();const i={element:t,newIndex:n};this.emitChanges({added:i})},onDragRemove(e){if(At(this.$el,e.item,e.oldIndex),"clone"===e.pullMode)return void Et(e.clone);if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})},onDragUpdate(e){Et(e.item),At(e.from,e.item,e.oldIndex);const t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);const i={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:i})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const n=this.move;if(!n||!this.realList)return!0;const i=this.getRelatedContextFromMoveEvent(e),o=this.context,a=this.computeFutureIndex(i,e);Object.assign(o,{futureIndex:a});return n(Object.assign({},e,{relatedContext:i,draggedContext:o}),t)},onDragEnd(){this.computeIndexes(),Pt=null},getTrargetedComponent:e=>e.__draggable_component__,getRelatedContextFromMoveEvent({to:e,related:t}){const n=this.getTrargetedComponent(e);if(!n)return{component:n};const i=n.realList,o={list:i,component:n};if(e!==t&&i&&n.getUnderlyingVm){const e=n.getUnderlyingVm(t);if(e)return Object.assign(e,o)}return o},computeFutureIndex(e,t){const n=[...t.to.children].filter((e=>"none"!==e.style.display));if(0===n.length)return 0;const i=n.indexOf(t.related),o=e.component.getVmIndex(i);return-1!==n.indexOf(Pt)||!t.willInsertAfter?o:o+1}}});var Ft=[],Bt=[];function Rt(e,t){if(e&&"undefined"!=typeof document){var n,i=!0===t.prepend?"prepend":"append",o=!0===t.singleTag,a="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var l=Ft.indexOf(a);-1===l&&(l=Ft.push(a)-1,Bt[l]={}),n=Bt[l]&&Bt[l][i]?Bt[l][i]:Bt[l][i]=r()}else n=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),o=0;o<n.length;o++)e.setAttribute(n[o],t.attributes[n[o]]);var l="prepend"===i?"afterbegin":"beforeend";return a.insertAdjacentElement(l,e),e}}Rt("\n.exceeds-the-limit {\r\n  color: red;\n}\n.ml-1 {\r\n  margin-left: 0.5rem;\n}\n#sfx-modal .filerobot-Provider-ItemCategory-wrapper .filerobot-u-reset {\r\n  top: 0;\n}\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\n}\n.modal {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  width: 80%;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n  overflow-y: auto;\r\n  max-height: 80vh;\r\n  margin: 1.75rem auto;\n}\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\n}\n.modal-close-btn {\r\n  background: transparent;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\n}\n.modal-body {\r\n  margin: 1rem 0;\n}\n.modal-footer {\r\n  text-align: right;\n}\n.sfx-media-icon {\r\n  width: 34px;\r\n  height: 34px;\r\n  border-radius: 25%;\r\n  position: relative; /* Ensure the pseudo-element is positioned relative to this container */\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\n}\n.media-item-icon {\r\n  position: absolute!important;\r\n  top: 7px;\r\n  left: 5px;\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease;\r\n  z-index: 9999;\n}\n.sfx-media-icon::after {\r\n  content: ''; /* Empty content to create the pseudo-element */\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  z-index: 100;\r\n  height: 100%;\r\n  background-color: #0c3745;\r\n  opacity: 0; /* Start with no visibility */\r\n  transition: opacity 0.3s ease; /* Smooth fade in/out effect */\r\n  backdrop-filter: blur(5px); /* Apply blur effect */\n}\n.sfx-media-icon:hover .media-item-icon{\r\n  opacity: 1;\n}\n.sfx-media-icon:hover::after {\r\n  opacity: 0.85; /* Show the white blur overlay on hover */\n}\n.sfx-media-icon img {\r\n  width: 34px;\r\n  height: 34px;\r\n  display: block;\r\n  margin: 0 auto;\r\n  object-fit: cover;\r\n  border-radius: 25%;\n}\n.sfx-item .item-info {\r\n  margin-left: 12px;\n}\n.sfx-item .item-info a {\r\n  color: var(--theme--primary);\n}\n.sfx-item-inner {\r\n  display: flex;\r\n  align-items: center;\n}\n.bottom-message {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: end;\r\n  margin-top: var(--v-list-item-margin, 4px);\n}\n.sfx-item {\r\n  padding: 6px;\r\n  border: var(--theme--border-width) solid var(--v-list-item-border-color, var(--theme--form--field--input--border-color));\r\n  border-radius: var(--theme--border-radius);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: var(--v-list-item-color, var(--v-list-color, var(--theme--foreground)));\r\n  margin-top: var(--v-list-item-margin, 4px);\r\n  cursor: pointer;\r\n  transition: border-color 500ms ease;\n}\n.sfx-item:hover {\r\n  border: var(--theme--border-width) solid var(--v-list-item-border-color-hover, var(--theme--form--field--input--border-color-hover));\n}\n.sfx-media-icon .icon {\r\n  width: 80px;\r\n  height: 80px;\r\n  position: relative;\n}\n.btn-delete-item:hover {\r\n  color: var(--theme--danger);\n}\n.sfx-media-icon .icon i {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(50%, 50%);\r\n  font-size: 35px;\n}\n.item-icon{\r\n  width: 34px!important;\r\n  text-align: center;\r\n  padding: 0 var(--v-list-item-margin, 4px);\n}\n.remove-all span {\r\n  color: red;\r\n  font-size: 12px;\r\n  border: none;\r\n  background: none;\r\n  width: 100%;\n}\n.remove-all span:hover {\r\n  cursor: pointer;\r\n  color: rgb(185, 37, 37);\n}\n.asset-content {\r\n  max-height: 545px;\r\n  overflow-y: scroll;\n}\n.btn-drag-item {\r\n  margin-right: 8px;\r\n  cursor: move;\r\n  cursor: grab;\n}\n.btn-drag-item:active {\r\n  cursor: grabbing;\n}\n.asset-content::-webkit-scrollbar-track {\r\n  -webkit-box-shadow: inset 0 0 6px rgba(174, 174, 174, 0.3);\r\n  border-radius: 10px;\r\n  background-color: #F5F5F5;\n}\n.toolbar{\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: var(--v-list-item-margin, 4px);\n}\r\n\r\n",{});var zt=(e,t)=>{const n=e.__vccOpts||e;for(const[e,i]of t)n[e]=i;return n};const Lt={components:{draggable:jt},props:{value:{type:String,default:null},collection:{type:String,default:"scaleflex_dam_settings"},id:{type:Number,default:1},title:{type:String,default:"Scaleflex DAM"},custom:{type:Boolean,default:!1},limit:{type:Number,default:0},limitTypes:{type:String,default:null},attributes:{type:String,default:null}},methods:{isImage:e=>e.startsWith("image"),isVideo:e=>e.startsWith("video"),isAudio:e=>e.startsWith("audio"),hasQueryString(e){try{return new URL(e).search.length>0}catch(e){return!1}},createThumbnail(e){return this.hasQueryString(e)?e+"&width=100&height=100":e+"?width=100&height=100"},trimText(e){if(e.length<=50)return e;const t=e.lastIndexOf("."),n=-1!==t?e.substring(0,t):e,i=-1!==t?e.substring(t):"",o=50-i.length-3;return n.substring(0,Math.max(o,0))+"..."+i}},emits:["input","close"],setup(e,{emit:t}){const n=i(!1),r=w(),s=i(!1),c=i(!0),d=i(""),u=i(""),p=i(""),m=i(null),f=i([]),h=i([]),g=i(!1),v=i(""),y=i(!1),b=i(!1);return o((()=>{!async function(){await async function(){try{const t=(await r.get(`/items/scaleflex_dam_settings/${e.id}`)).data.data;if(!t)throw new Error("Data not found");t.token&&t.sec?(v.value=`https://api.filerobot.com/${t.token}/v5`,d.value=t.token||"",u.value=t.sec||"",p.value=t.directory||"",b.value=!0):b.value=!1,e.custom?(m.value=e.limit||null,h.value=e.limitTypes?e.limitTypes:[],f.value=e.attributes?e.attributes:[]):(m.value=t.limit||null,h.value=t.limitType?t.limitType.split(","):[],f.value=t.attributes?t.attributes.split(","):[])}catch(e){}}().then((function(){c.value=!1,s.value=!0}))}()})),{openModal:function(){document.getElementById("sfx-modal").setAttribute("style","display: block"),n.value=!0,async function(){!function(e){if(!window.Filerobot)return;let t=window.Filerobot,n=null;n=t.Core({securityTemplateID:e.sec,container:e.token});let i=e.directory,o=t.Explorer,a=t.XHRUpload;n.use(o,{config:{rootFolderPath:i},target:"#sfx-dam-widget",inline:!0,width:"100%",height:"100%",disableExportButton:!1,hideExportButtonIcon:!0,preventExportDefaultBehavior:!0,dismissUrlPathQueryUpdate:!0,disableDownloadButton:!1,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,locale:{strings:{mutualizedExportButtonLabel:"Add assets",mutualizedDownloadButton:"Add assets"}},filters:{mimeTypes:h.value}}).use(a).on("export",(async(e,t,n,i)=>{await D(e),x()})).on("complete",(({failed:e,uploadID:t,successful:n})=>{e&&console.dir(e),n&&n.forEach(((e,t)=>{}))}))}({token:d.value,sec:u.value,directory:p.value,limitType:h.value})}()},closeModal:x,deleteItem:function(n){let i=e.value;i.splice(n,1),_(i),t("input",i)},limitFiles:S,getIsOverLimit:function(){return g.value},getTotalAssets:E,addAssetsDisabled:function(){return m.value===E()&&E()>0||c.value},refreshAssets:async function(){l(e.value)?await D(a(e.value),!0):await D(e.value,!0)},getIsLoading:function(){return c.value},removeAllAssets:function(){t("input",[]),g.value=!1,y.value=!1},log:function(){t("input",a(e.value))},closeDialog:function(){y.value=!1},clickRemoveAllAssets:function(){y.value=!0},dialogVisible:y,isTokenAndSecExists:b,toDamSetting:function(){const e=document.querySelector('a[href="/admin/scaleflex-dam-setting"]');e&&e.click()}};function x(){document.getElementById("sfx-modal").setAttribute("style","display: none"),t("close"),n.value=!1}function _(e){S()>0&&e.length>S()?g.value=!0:g.value=!1}function k(e){return e.split("/")[0]}async function D(n,i=!1){c.value=!0;const o=n.map((async(e,t)=>{try{let o="";o=i?function(e){return e.uuid.split("_")[0]}(e):e.file.uuid;const a=await async function(e){c.value=!0;const t=v.value+"/files/"+e+"?format=select:human";try{const e=await fetch(t);if(!e.ok)throw new Error(`Error: ${e.status}`);return await e.json()}catch(e){return null}finally{c.value=!1}}(o);let l="";l=a?.file?.url.cdn,void 0!==e.file?.url.download&&(l=e.file?.url.download),i&&(n=e.cdn,l=function(e,t){const n=Object.entries(t).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");return e.split("?")[0]+"?"+n}(l,function(e){const t=e.split("?")[1];if(!t)return{};const n=t.split("&"),i={};return n.forEach((e=>{const[t,n]=e.split("=");i[decodeURIComponent(t)]=decodeURIComponent(n||"")})),i}(n)));const r={uuid:a?.file?.uuid+"_"+T(t),name:a?.file?.name,cdn:C(l,"vh"),extension:a?.file?.extension,source:"filerobot",type:a?.file?.type,ownerName:a?.file?.owner?.name};return f.value.length>0&&(r.attributes=function(e){let t={};if(f.value.length>0){let n=f.value;for(let i of n){let n=i.trim();t[n]=e[n]}return t}}(a?.file)),r}catch(e){return null}var n}));try{const n=(await Promise.all(o)).filter((e=>e));let a=null;a=i||!e.value?[...n]:[...e.value,...n],_(a),S()>0&&(a=a.slice(0,S())),h.value.length>0&&(a=function(e,t){const n=t;return n.includes("document")?e.filter((e=>n.includes(k(e.type))||!["image","video","audio"].includes(k(e.type)))):e.filter((e=>n.includes(k(e.type))))}(a,h.value)),t("input",a)}catch(e){console.error("Error fetching files:",e)}finally{c.value=!1}}function S(){return m.value&&m.value>0?Number(m.value):-1}function T(t){return e.value?t+e.value.length:t}function C(e,t){var n=e.split("?");if(n.length>=2){for(var i=encodeURIComponent(t)+"=",o=n[1].split(/[&;]/g),a=o.length;a-- >0;)-1!==o[a].lastIndexOf(i,0)&&o.splice(a,1);return n[0]+(o.length>0?"?"+o.join("&"):"")}return e}function E(){return e.value?e.value.length:0}}},Yt=["value"],Xt={id:"sfx-result"},Ut={key:0,class:"sfx-item"},Wt={class:"sfx-item-inner"},Ht={class:"btn-drag-item"},qt={class:"sfx-media-icon",target:"_blank"},Gt=["href"],Qt=["src","alt"],Jt={class:"item-info"},Kt=["onClick"],Zt={key:1,class:"sfx-item"},en={class:"sfx-item-inner"},tn={class:"btn-drag-item"},nn={class:"sfx-media-icon",target:"_blank"},on=["href"],an={class:"item-info"},ln=["onClick"],rn={key:2,class:"sfx-item"},sn={class:"sfx-item-inner"},cn={class:"btn-drag-item"},dn={class:"sfx-media-icon",target:"_blank"},un=["href"],pn={class:"item-info"},mn=["onClick"],fn={key:3,class:"sfx-item"},hn={class:"sfx-item-inner"},gn={class:"btn-drag-item"},vn={class:"sfx-media-icon",target:"_blank"},yn=["href"],bn={class:"item-info"},xn=["onClick"],wn={class:"bottom-message"},_n={key:0,class:"column align-left"},kn={key:0},Dn={key:0,style:{display:"flex","align-items":"center","justify-content":"end"},class:"exceeds-the-limit"},Sn={key:0,class:"toolbar"},Tn={key:1},Cn={class:"modal"},En={class:"modal-header"},An={class:"modal-body"},In={class:"modal-footer"};var Mn=zt(Lt,[["render",function(e,t,i,o,a,l){const x=n("VIcon"),w=n("draggable"),_=n("v-card-title"),k=n("v-card-text"),D=n("VButton"),S=n("v-card-actions"),T=n("v-card"),C=n("VDialog"),E=n("VCardTitle"),A=n("VCardText"),I=n("VCard");return r(),s(c,null,[t[18]||(t[18]=d("link",{rel:"stylesheet",type:"text/css",href:"https://scaleflex.cloudimg.io/v7/plugins/filerobot-widget/v3/latest/filerobot-widget.min.css"},null,-1)),d("input",{value:JSON.stringify(i.value),type:"hidden",id:"sfx_value"},null,8,Yt),d("div",Xt,[u(w,{class:"asset-content",list:i.value,onChange:o.log},{default:p((()=>[(r(!0),s(c,null,m(i.value,((e,t)=>(r(),s("div",{key:t,class:"media-container"},[f(" Kim tra loi file v hin th ph hp "),l.isImage(e.type)?(r(),s("div",Ut,[d("div",Wt,[d("div",Ht,[u(x,{name:"drag_handle"})]),d("div",qt,[d("a",{href:e.cdn,target:"_blank"},[d("img",{src:l.createThumbnail(e.cdn),alt:e.name,class:"media-item"},null,8,Qt),u(x,{color:"white",name:"visibility",xsmall:!0,class:"media-item-icon"})],8,Gt)]),d("div",Jt,[d("span",null,h(l.trimText(e.name)),1)])]),d("div",{class:"btn-delete-item",onClick:e=>o.deleteItem(t)},[u(x,{name:"close"})],8,Kt)])):l.isVideo(e.type)?(r(),s("div",Zt,[d("div",en,[d("div",tn,[u(x,{name:"drag_handle"})]),d("div",nn,[d("a",{href:e.cdn,target:"_blank"},[u(x,{class:"item-icon",name:"videocam"}),u(x,{color:"white",name:"visibility",xsmall:!0,class:"media-item-icon"})],8,on)]),d("div",an,[d("span",null,h(l.trimText(e.name)),1)])]),d("div",{class:"btn-delete-item",onClick:e=>o.deleteItem(t)},[u(x,{name:"close"})],8,ln)])):l.isAudio(e.type)?(r(),s("div",rn,[d("div",sn,[d("div",cn,[u(x,{name:"drag_handle"})]),d("div",dn,[d("a",{href:e.cdn,target:"_blank"},[u(x,{class:"item-icon",name:"play_circle"}),u(x,{color:"white",name:"visibility",xsmall:!0,class:"media-item-icon"})],8,un)]),d("div",pn,[d("span",null,h(l.trimText(e.name)),1)])]),d("div",{class:"btn-delete-item",onClick:e=>o.deleteItem(t)},[u(x,{name:"close"})],8,mn)])):(r(),s("div",fn,[d("div",hn,[d("div",gn,[u(x,{name:"drag_handle"})]),d("div",vn,[d("a",{href:e.cdn,target:"_blank"},[u(x,{class:"item-icon",name:"draft"}),u(x,{color:"white",name:"visibility",xsmall:!0,class:"media-item-icon"})],8,yn)]),d("div",bn,[d("span",null,h(l.trimText(e.name)),1)])]),d("div",{class:"btn-delete-item",onClick:e=>o.deleteItem(t)},[u(x,{name:"close"})],8,xn)]))])))),128))])),_:1},8,["list","onChange"]),d("div",wn,[o.getTotalAssets()>0?(r(),s("div",_n,[d("span",null,"Total: "+h(o.getTotalAssets()),1),o.limitFiles()>0?(r(),s("span",kn," / Limit "+h(o.limitFiles()),1)):f("v-if",!0)])):f("v-if",!0)]),o.getIsOverLimit()?(r(),s("div",Dn,t[6]||(t[6]=[d("span",{class:"ml-1"},"Exceeded maximum number of assets",-1)]))):f("v-if",!0),u(C,{modelValue:o.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>o.dialogVisible=e)},{default:p((()=>[u(T,{class:"dialog-content"},{default:p((()=>[u(_,null,{default:p((()=>t[7]||(t[7]=[g("Scaleflex DAM")]))),_:1}),u(k,null,{default:p((()=>t[8]||(t[8]=[g("Are you sure you want to delete everything? Please confirm to proceed.")]))),_:1}),u(S,null,{default:p((()=>[u(D,{onClick:o.removeAllAssets,warning:!0},{default:p((()=>t[9]||(t[9]=[g(" Yes ")]))),_:1},8,["onClick"]),u(D,{onClick:o.closeDialog,secondary:!0},{default:p((()=>t[10]||(t[10]=[g(" No ")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),o.isTokenAndSecExists?(r(),s("div",Sn,[u(D,{onClick:o.openModal,disabled:o.addAssetsDisabled()},{default:p((()=>[u(x,{name:"image"}),t[11]||(t[11]=d("span",{style:{"margin-left":"5px"}},"Browse assets",-1))])),_:1},8,["onClick","disabled"]),d("div",null,[o.getTotalAssets()>0?(r(),v(D,{key:0,type:"button",onClick:t[1]||(t[1]=e=>o.refreshAssets()),loading:o.getIsLoading(),outlined:!0},{default:p((()=>[u(x,{name:"refresh"}),t[12]||(t[12]=d("span",{style:{"margin-left":"5px"}},"Refresh",-1))])),_:1},8,["loading"])):f("v-if",!0),o.getTotalAssets()>0?(r(),v(D,{key:1,style:{"margin-left":"5px"},type:"button",onClick:t[2]||(t[2]=e=>o.clickRemoveAllAssets()),danger:!0},{default:p((()=>[u(x,{name:"delete"}),t[13]||(t[13]=d("span",{style:{"margin-left":"5px"}},"Remove all",-1))])),_:1})):f("v-if",!0)])])):(r(),s("div",Tn,[u(I,{style:{"max-width":"100%","margin-top":"20px"}},{default:p((()=>[u(E,{style:{color:"tomato",display:"flex","align-items":"center"}},{default:p((()=>[u(x,{name:"report"}),t[14]||(t[14]=d("span",{style:{"font-size":"14px","margin-left":"5px"}},"Scaleflex DAM Notice",-1))])),_:1}),u(A,{style:{"max-width":"100%","padding-bottom":"25px"}},{default:p((()=>[t[15]||(t[15]=g(" Please visit the ")),d("span",{style:{"text-decoration":"underline",color:"dodgerblue",cursor:"pointer"},onClick:t[3]||(t[3]=(...e)=>o.toDamSetting&&o.toDamSetting(...e)),target:"_blank"},"Scaleflex DAM Configuration"),t[16]||(t[16]=g(" to add your Token and Template ID before browsing assets. "))])),_:1})])),_:1})])),d("div",{style:y({display:e.isOpen?"block":"none"}),class:"modal-overlay",id:"sfx-modal"},[d("div",Cn,[d("div",En,[d("h3",null,h(i.title),1),d("button",{onClick:t[4]||(t[4]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"modal-close-btn"},"")]),d("div",An,[b(e.$slots,"default",{},(()=>[t[17]||(t[17]=d("div",{id:"sfx-dam-widget"},null,-1))]))]),d("div",In,[d("button",{onClick:t[5]||(t[5]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"btn"},"Close")])])],4)],64)}],["__file","interface.vue"]]),On={id:"scaleflex-dam",name:"Scaleflex DAM",icon:"image",description:"",component:Mn,options:[{field:"custom",type:"boolean",name:"Use custom setting",recommendedDisplays:["scaleflex-dam-display"],schema:{default_value:!1},meta:{interface:"toggle",width:"half"}},{field:"limit",type:"integer",name:"Limit",schema:{default_value:0},meta:{interface:"input",width:"half",options:{min:0}}},{field:"limitTypes",type:"string",name:"Limit Types",meta:{interface:"select-multiple-dropdown",options:{choices:[{text:"Image",value:"image"},{text:"Document",value:"document"},{text:"Video",value:"video"},{text:"Audio",value:"audio"}]},width:"half"}},{field:"attributes",type:"string",name:"Attributes",meta:{interface:"select-multiple-dropdown",options:{choices:[{text:"Meta",value:"meta"},{text:"Tags",value:"tags"},{text:"Info",value:"info"}]},width:"half"}}],types:["json"]};Rt("\n.sfx-padding-box {\r\n  padding: 0 32px 32px;\n}\n.guide-text {\r\n  font-size: 13px;\r\n  margin-top: 5px;\r\n  color: #285c72;\n}\n.homepage{\r\n  margin-top: 10px;\r\n  display: flex;\r\n  transition: color 500ms ease;\r\n  cursor: pointer;\n}\n.homepage:hover{\r\n  color: #285c72;\n}\n.external-link{\r\n  display: flex;\r\n  padding: 5px 8px;\r\n  border-radius: 4px;\r\n  transition: background 500ms ease;\r\n  align-items: center;\r\n  cursor: pointer;\n}\n.external-link:hover{\r\n  background: var(--theme--navigation--project--background);\n}\r\n",{});const $n={props:{collection:{type:String,default:"scaleflex_dam_settings"},id:{type:Number,default:1}},setup(e){const{useCollectionsStore:t}=_(),n=w(),o=t(),a=i(""),l=i(""),r=i(""),s=i(""),c=i([]),d=i([]),u=i(!0),p=i(!1),m=i(!1),f=i(!1),h=i("info"),g=i(null),v=i(null),y=i(!1);function b(e){return""===e||null===e}return async function(){p.value=!0;const t=e.collection;try{await o.getCollection(t)?m.value=!0:(await o.upsertCollection(t,{collection:t,meta:{note:"Scaleflex DAM"},schema:{fields:[{field:"id",type:"uuid",meta:{primary_key:!0}}]}}),await async function(){try{let t={meta:{hidden:!0}};await n.patch(`/collections/${e.collection}`,t)}catch(e){console.error(`Failed to hidden collection: ${e.message}`)}}(),await async function(){const t=[{type:"string",meta:{interface:"input",special:null},field:"token"},{type:"string",meta:{interface:"input",special:null},field:"sec"},{type:"string",meta:{interface:"input",special:null},field:"directory"},{type:"integer",meta:{interface:"input",special:null},field:"limit"},{type:"string",meta:{interface:"input",special:null},field:"attributes"},{type:"string",meta:{interface:"input",special:null},field:"limitType"}];try{for(const i of t)await n.post(`/fields/${e.collection}`,i),console.log(`Field ${i.field} created.`);await async function(){const t={token:"",sec:"",directory:"/",limit:null,limitType:"",attributes:""};try{await n.post(`/items/${e.collection}`,t)}catch(e){console.error(`Failed to create data: ${e.message}`)}}()}catch(e){console.error(`Failed to create fields: ${e.message}`)}}(),m.value=!1)}catch(e){}finally{p.value=!1}}().then((async function(){try{if(m){const t=(await n.get(`/items/${e.collection}/${e.id}`)).data.data;a.value=t.token||"",l.value=t.sec||"",r.value=t.directory||"",s.value=t.limit||0,c.value=b(t.attributes)?[]:t.attributes.split(","),d.value=b(t.limitType)?[]:t.limitType.split(",")}}catch(e){console.error(`Error loading data: ${e.message}`)}})),{token:a,sec:l,directory:r,saveSfxToken:async function(){if(p.value=!0,u.value=await async function(){const e=`https://api.filerobot.com/${a.value}/v4/key/${l.value}`;try{return 200===(await fetch(e)).status}catch(e){return!1}}(),f.value=!0,u.value)try{let t=d.value?d.value.toString():null,i=c.value?c.value.toString():null;const o={token:a.value,sec:l.value,directory:r.value,limit:s.value,attributes:i,limitType:t};await n.patch(`/items/${e.collection}/${e.id}`,o),h.value="success",g.value="Successfully Saved",v.value="Your updates have been saved and are now active. You can now add the Scaleflex DAM Field to your schema and begin using it immediately."}catch(e){h.value="danger",g.value="System Error",v.value="Failed to save settings. Please refresh the Page and try again."}finally{p.value=!1}else h.value="warning",g.value="Invalid Settings",v.value="Please verify your token and security template. The current configuration is incorrect and requires adjustment.";p.value=!1},loading:p,limit:s,attributes:c,limitType:d,isValid:u,dialogVisible:f,closeDialog:function(){f.value=!1},dialogText:v,dialogTitle:g,dialogType:h,confirmResetAllSettings:async function(){h.value="danger",g.value="Reset All Settings",v.value="Are you sure you want to reset all settings to their default values? This action cannot be undone and may affect your current configuration.",f.value=!0,y.value=!0},dialogReset:y,resetAllSettings:async function(){p.value=!0;try{const t={token:"",sec:"",directory:"/",limit:null,attributes:null,limitType:null};await n.patch(`/items/${e.collection}/${e.id}`,t),h.value="success",g.value="Settings Reset Successfully",v.value="All settings have been reset to their defaults. To continue using Scaleflex DAM with your model, please reconfigure your settings and verify them for seamless functionality."}catch(e){h.value="danger",g.value="System Error",v.value="Failed to save settings. Please refresh the Page and try again."}finally{p.value=!1,y.value=!1,a.value="",l.value="",r.value="",s.value="",c.value=[],d.value=[]}},toDam:function(){const e=document.querySelector('a[href="/admin/scaleflex-dam"]');e&&e.click()}}}},Nn={style:{"margin-top":"20px",padding:"0 10px"}},Pn={style:{display:"flex","flex-direction":"column","align-content":"center"}},Vn={style:{display:"flex",background:"var(--theme--navigation--project--background)",padding:"5px 8px","border-radius":"4px","align-items":"center"}},jn={href:"https://docs.scaleflex.com/digital-asset-management-dam/plugins-and-connectors/plugins/directus",target:"_blank",class:"external-link",style:{"margin-top":"8px"}},Fn={href:"https://www.scaleflex.com",target:"_blank",class:"homepage"},Bn={class:"sfx-padding-box"},Rn={style:{"margin-bottom":"1rem"}},zn={style:{"margin-bottom":"1rem"}},Ln={style:{"margin-bottom":"1rem"}},Yn={style:{"margin-bottom":"1rem"}},Xn={style:{"margin-bottom":"1rem"}},Un={style:{"margin-bottom":"1rem"}},Wn={style:{display:"flex","justify-content":"start","align-items":"center"}},Hn={style:{"margin-left":"5px"}};var qn=zt($n,[["render",function(e,t,i,o,a,l){const s=n("VIcon"),c=n("VCardTitle"),m=n("VCardText"),y=n("VCard"),b=n("VInput"),x=n("VDivider"),w=n("VSelect"),_=n("VButton"),k=n("v-card-title"),D=n("v-card-text"),S=n("v-card-actions"),T=n("v-card"),C=n("VDialog"),E=n("private-view");return r(),v(E,{title:"Scaleflex DAM"},{navigation:p((()=>[d("div",Nn,[d("div",Pn,[d("div",Vn,[u(s,{name:"settings",style:{color:"var(--theme--primary)"}}),t[8]||(t[8]=d("span",{style:{"margin-left":"4px","font-size":"14px",display:"block"}},"Scaleflex DAM",-1))]),d("div",{onClick:t[0]||(t[0]=(...e)=>o.toDam&&o.toDam(...e)),class:"external-link",style:{"margin-top":"8px"}},[u(s,{name:"gallery_thumbnail",style:{color:"var(--theme--primary)"}}),t[9]||(t[9]=d("span",{style:{"margin-left":"4px","font-size":"14px",display:"block"}},"Assets Library",-1))]),d("a",jn,[u(s,{name:"description",style:{color:"var(--theme--primary)"}}),t[10]||(t[10]=d("span",{style:{"margin-left":"4px","font-size":"14px",display:"block"}},"Documentation",-1))])])])])),default:p((()=>[u(y,{style:{margin:"0 32px 32px 32px","max-width":"100%"}},{default:p((()=>[u(c,{style:{padding:"15px"}},{default:p((()=>t[11]||(t[11]=[g(" About Scaleflex DAM ")]))),_:1}),u(m,{style:{padding:"15px",width:"100%",position:"relative"}},{default:p((()=>[t[13]||(t[13]=d("div",{style:{display:"flex","align-items":"center","justify-content":"start","margin-bottom":"20px"}},[d("img",{src:"https://frzjaqrbb.filerobot.com/plugins_assets/scaleflex.svg"})],-1)),t[14]||(t[14]=d("div",{style:{"z-index":"999"}}," Scaleflex DAM(Filerobot) is a scalable and performance-oriented Digital Asset Management platform with integrated image and video optimizers to store, organize, optimize and deliver your media assets such as images, videos, PDFs and many other brand assets fast all around the world to all device types. ",-1)),d("a",Fn,[u(s,{name:"house",small:!0,style:{"margin-top":"2px"}}),t[12]||(t[12]=d("span",{style:{"margin-left":"4px","font-size":"14px",display:"block"}},"Scaleflex Home",-1))]),t[15]||(t[15]=d("img",{src:"https://frzjaqrbb.filerobot.com/plugins_assets/dam.svg",style:{position:"absolute",right:"10px",top:"-40px",width:"180px","z-index":"1",opacity:"0.4"}},null,-1))])),_:1})])),_:1}),d("div",Bn,[t[31]||(t[31]=d("div",{style:{"font-size":"18px","margin-bottom":"20px"}},[d("h2",null,"Base configurations"),d("p",{class:"guide-text"},"The following fields are required to integrate the Scaleflex DAM Widget within Directus.")],-1)),d("div",Rn,[t[16]||(t[16]=d("label",{for:"sfx_token"},[d("b",null,"Token")],-1)),u(b,{disabled:o.loading,modelValue:o.token,"onUpdate:modelValue":t[1]||(t[1]=e=>o.token=e)},null,8,["disabled","modelValue"]),t[17]||(t[17]=d("p",{class:"guide-text"},[g("Scaleflex DAM token from your account, you can obtain a token by fill in "),d("a",{style:{color:"var(--theme--primary)"},href:"https://www.scaleflex.com/contact-us",target:"_blank"},"Scaleflex contact page")],-1))]),d("div",zn,[t[18]||(t[18]=d("label",{for:"sfx_sec"},[d("b",null,"Security Template")],-1)),u(b,{disabled:o.loading,modelValue:o.sec,"onUpdate:modelValue":t[2]||(t[2]=e=>o.sec=e)},null,8,["disabled","modelValue"]),t[19]||(t[19]=d("p",{class:"guide-text"},"To load the Scaleflex DAM Widget or Scaleflex DAM Image Editor, you you need to create a Security Template in your Asset Hub first, in order for your Directus instantiation of the Widget to obtain proper credentials and access your storage",-1))]),d("div",Ln,[t[20]||(t[20]=d("label",{for:"sfx_token"},[d("b",null,"Root Directory")],-1)),u(b,{disabled:o.loading,modelValue:o.directory,"onUpdate:modelValue":t[3]||(t[3]=e=>o.directory=e)},null,8,["disabled","modelValue"]),t[21]||(t[21]=d("p",{class:"guide-text"},"The directory in your Hub, where the files will be stored",-1))]),u(x,{style:{margin:"20px 0"}}),t[32]||(t[32]=d("div",{style:{"font-size":"18px","margin-bottom":"20px"}},[d("h2",null,"Advanced configuration"),d("p",{class:"guide-text"},"This configuration will be overridden if 'Use Custom Setting' is activated in each Field Interface.")],-1)),d("div",Yn,[t[22]||(t[22]=d("label",{for:"limit"},[d("b",null,"Limit")],-1)),u(b,{disabled:o.loading,min:"0",modelValue:o.limit,"onUpdate:modelValue":t[4]||(t[4]=e=>o.limit=e),type:"number"},null,8,["disabled","modelValue"]),t[23]||(t[23]=d("p",{class:"guide-text"},[g("The max number of files that can be added to a single field, "),d("b",{style:{color:"var(--theme--primary)"}},"default: 0(unlimited)")],-1))]),d("div",Xn,[t[24]||(t[24]=d("label",{for:"attributes"},[d("b",null,"Attributes")],-1)),u(w,{modelValue:o.attributes,"onUpdate:modelValue":t[5]||(t[5]=e=>o.attributes=e),disabled:o.loading,items:[{text:"Meta",value:"meta"},{text:"Tags",value:"tags"},{text:"Info",value:"info"}],multiplePreviewThreshold:4,multiple:!0},null,8,["modelValue","disabled"]),t[25]||(t[25]=d("p",{class:"guide-text"},"Attribute from Scaleflex DAM asset that you want to include in Client response",-1))]),d("div",Un,[t[26]||(t[26]=d("label",{for:"limitType"},[d("b",null,"Limit Type")],-1)),u(w,{modelValue:o.limitType,"onUpdate:modelValue":t[6]||(t[6]=e=>o.limitType=e),disabled:o.loading,multiplePreviewThreshold:5,items:[{text:"Image",value:"image"},{text:"Document",value:"document"},{text:"Video",value:"video"},{text:"Audio",value:"audio"}],multiple:!0},null,8,["modelValue","disabled"]),t[27]||(t[27]=d("p",{class:"guide-text"},"File types limit when use Widget",-1))]),d("div",null,[o.loading?f("v-if",!0):(r(),v(_,{key:0,onClick:o.saveSfxToken},{default:p((()=>[u(s,{name:"save"}),t[28]||(t[28]=d("span",{style:{"margin-left":"5px"}},"Save Settings",-1))])),_:1},8,["onClick"])),o.loading||""===o.token||""===o.sec?f("v-if",!0):(r(),v(_,{key:1,style:{"margin-left":"15px"},onClick:o.confirmResetAllSettings,outlined:!0,danger:!0},{default:p((()=>[u(s,{name:"restart_alt"}),t[29]||(t[29]=d("span",{style:{"margin-left":"5px"}},"Reset all settings",-1))])),_:1},8,["onClick"])),o.loading?(r(),v(_,{key:2,disabled:o.loading},{default:p((()=>t[30]||(t[30]=[d("span",null,"Processing...",-1)]))),_:1},8,["disabled"])):f("v-if",!0)])]),u(C,{modelValue:o.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>o.dialogVisible=e)},{default:p((()=>[u(T,{class:"dialog-content"},{default:p((()=>[u(k,null,{default:p((()=>[d("div",Wn,["info"===o.dialogType?(r(),v(s,{key:0,color:"gray",name:"info"})):f("v-if",!0),"warning"===o.dialogType?(r(),v(s,{key:1,color:"tomato",name:"warning"})):f("v-if",!0),"success"===o.dialogType?(r(),v(s,{key:2,color:"green",name:"check_circle"})):f("v-if",!0),"danger"===o.dialogType?(r(),v(s,{key:3,color:"red",name:"error"})):f("v-if",!0),d("span",Hn,h(o.dialogTitle),1)])])),_:1}),u(D,{style:{padding:"10px 35px"}},{default:p((()=>[g(h(o.dialogText),1)])),_:1}),u(S,null,{default:p((()=>[o.dialogReset?(r(),v(_,{key:0,outlined:!0,onClick:o.closeDialog},{default:p((()=>t[33]||(t[33]=[g("Cancel")]))),_:1},8,["onClick"])):f("v-if",!0),o.dialogReset?f("v-if",!0):(r(),v(_,{key:1,outlined:!0,onClick:o.closeDialog},{default:p((()=>t[34]||(t[34]=[g("Close")]))),_:1},8,["onClick"])),o.dialogReset?(r(),v(_,{key:2,danger:!0,onClick:o.resetAllSettings},{default:p((()=>t[35]||(t[35]=[g("Reset")]))),_:1},8,["onClick"])):f("v-if",!0),"warning"!==o.dialogType&&"danger"!==o.dialogType||o.dialogReset?f("v-if",!0):(r(),v(_,{key:3,onClick:o.closeDialog},{default:p((()=>t[36]||(t[36]=[g(" Double check Settings ")]))),_:1},8,["onClick"]))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}],["__file","module.vue"]]),Gn={id:"scaleflex-dam-setting",name:"Scaleflex DAM Setting",icon:"filter",routes:[{path:"",component:qn},{name:"page",path:":page",props:!0,component:qn}]};Rt("\n.media-container[data-v-9da39285] {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  position: relative;\r\n  padding: 5px;\n}\n.media-item-wrapper[data-v-9da39285] {\r\n  position: relative;\r\n  transition: transform 0.2s ease, z-index 0.2s ease;\n}\n.media-item-wrapper.hovered[data-v-9da39285] {\r\n  transform: scale(1.2); /* Highlight effect */\n}\n.media-item[data-v-9da39285] {\r\n  width: 35px;\r\n  height: 35px;\r\n  border-radius: 35%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #f0f0f0;\r\n  border: 2px solid white; /* Circle border for better visibility */\r\n  overflow: hidden;\n}\n.circle[data-v-9da39285] {\r\n  background-size: cover;\r\n  background-position: center;\n}\n.icon-wrapper[data-v-9da39285] {\r\n  background-color: #ddd; /* Placeholder background for icons */\n}\n.extra-items .media-item[data-v-9da39285] {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: var(--v-button-background-color, var(--theme--primary));\r\n  opacity: 70%;\r\n  font-size: 14px;\r\n  color: white;\r\n  font-weight: bold;\n}\n.extra-count[data-v-9da39285] {\r\n  font-size: 14px;\r\n  font-weight: bold;\n}\r\n",{});const Qn={class:"media-container"},Jn=["onMouseover"],Kn=["alt"],Zn={key:1,class:"media-item circle icon-wrapper"},ei={key:0,class:"media-item-wrapper extra-items"},ti={class:"media-item circle icon-wrapper"},ni={class:"extra-count"};var ii=zt({props:{value:{type:Array,default:()=>[]},limit:{type:Number,default:2}},data:()=>({hoveredIndex:null}),computed:{displayedItems(){return this.value.slice(0,this.limit)}},methods:{isImage:e=>e.startsWith("image"),isVideo:e=>e.startsWith("video"),isAudio:e=>e.startsWith("audio"),getIconName(e){return this.isVideo(e)?"videocam":this.isAudio(e)?"play_circle":"draft"},hasQueryString(e){try{return new URL(e).search.length>0}catch(e){return!1}},createThumbnail(e){return this.hasQueryString(e)?e+"&width=100&height=100":e+"?width=100&height=100"}}},[["render",function(e,t,i,o,a,l){const p=n("VIcon");return r(),s("div",Qn,[(r(!0),s(c,null,m(l.displayedItems,((e,n)=>(r(),s("div",{key:n,class:x(["media-item-wrapper",{hovered:a.hoveredIndex===n}]),style:y({zIndex:a.hoveredIndex===n?100:n+1,marginLeft:n>0?"-12px":"0"}),onMouseover:e=>a.hoveredIndex=n,onMouseleave:t[0]||(t[0]=e=>a.hoveredIndex=null)},[l.isImage(e.type)?(r(),s("div",{key:0,class:"media-item circle",style:y({backgroundImage:`url(${l.createThumbnail(e.cdn)})`}),alt:e.name},null,12,Kn)):(r(),s("div",Zn,[u(p,{class:x(`item-icon ${e.type}`),name:l.getIconName(e.type),small:!0},null,8,["class","name"])]))],46,Jn)))),128)),i.value.length>i.limit?(r(),s("div",ei,[d("div",ti,[d("span",ni,"+"+h(i.value.length-i.limit),1)])])):f("v-if",!0)])}],["__scopeId","data-v-9da39285"],["__file","display.vue"]]),oi={id:"scaleflex-dam-display",name:"DAM Assets",icon:"image",description:"Display DAM assets with beautiful UI",component:ii,options:[{field:"limit",type:"integer",name:"Limit assets on Display",meta:{interface:"input",options:{min:0}},schema:{default_value:2}}],types:["json"]};Rt("\n#sfx-dam-widget .filerobot-Provider-ItemCategory-wrapper .filerobot-u-reset {\r\n  top: 0;\n}\n.header-bar {\r\n  z-index: 99999;\n}\n.filerobot-common-Search-searchInput {\r\n  background: #FFF;\n}\n.external-link{\r\n  display: flex;\r\n  padding: 5px 8px;\r\n  border-radius: 4px;\r\n  transition: background 500ms ease;\r\n  align-items: center;\n}\n.external-link:hover{\r\n  background: var(--theme--navigation--project--background);\n}\r\n",{});const ai={props:{id:{type:Number,default:1},custom:{type:Boolean,default:!1},limit:{type:Number,default:0},limitTypes:{type:String,default:null},attributes:{type:String,default:null}},setup(e,{emit:t}){const n=w(),a=i(!1),l=i(!0),r=i(""),s=i(""),c=i(""),d=i(null),u=i([]),p=i([]),m=i(""),f=i(!1);return o((()=>{(async function(){await async function(){try{const t=(await n.get(`/items/scaleflex_dam_settings/${e.id}`)).data.data;if(!t)throw new Error("Data not found");t.token&&t.sec?(m.value=`https://api.filerobot.com/${t.token}/v5`,r.value=t.token||"",s.value=t.sec||"",c.value=t.directory||"",f.value=!0):f.value=!1,e.custom?(d.value=e.limit||null,p.value=e.limitTypes?e.limitTypes:[],u.value=e.attributes?e.attributes:[]):(d.value=t.limit||null,p.value=t.limitType?t.limitType.split(","):[],u.value=t.attributes?t.attributes.split(","):[])}catch(e){}}().then((function(){l.value=!1,a.value=!0}))})().then((function(){!function(e){if(!window.Filerobot)return;let t=window.Filerobot,n=null;n=t.Core({securityTemplateID:e.sec,container:e.token});let i=e.directory,o=t.Explorer,a=t.XHRUpload;n.use(o,{config:{rootFolderPath:i},target:"#sfx-dam-widget",inline:!0,width:"100%",height:"100%",disableExportButton:!1,hideExportButtonIcon:!0,preventExportDefaultBehavior:!0,dismissUrlPathQueryUpdate:!0,disableDownloadButton:!0,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,locale:{strings:{mutualizedExportButtonLabel:"Add assets",mutualizedDownloadButton:"Add assets"}},filters:{mimeTypes:p.value}}).use(a).on("export",(async(e,t,n,i)=>{console.dir(e)})).on("complete",(({failed:e,uploadID:t,successful:n})=>{e&&console.dir(e),n&&n.forEach(((e,t)=>{}))}))}({token:r.value,sec:s.value,directory:c.value,limitType:p.value})}))})),{getIsLoading:function(){return l.value},toDamSetting:function(){const e=document.querySelector('a[href="/admin/scaleflex-dam-setting"]');e&&e.click()},isTokenAndSecExists:f}}},li={style:{"margin-top":"20px",padding:"0 10px"}},ri={style:{display:"flex","flex-direction":"column","align-content":"center"}},si={style:{display:"flex","align-items":"center",background:"var(--theme--navigation--project--background)",padding:"5px 8px","border-radius":"4px","margin-top":"8px"}},ci={href:"https://docs.scaleflex.com/digital-asset-management-dam/plugins-and-connectors/plugins/directus",target:"_blank",class:"external-link",style:{"margin-top":"8px"}},di={key:0,style:{margin:"32px"}},ui={key:1,style:{padding:"32px"}};var pi={id:"scaleflex-dam",name:"Scaleflex DAM",icon:"cloud",routes:[{path:"",component:zt(ai,[["render",function(e,t,i,o,a,l){const c=n("VIcon"),m=n("VCardTitle"),h=n("VCardText"),y=n("VCard"),b=n("private-view");return r(),v(b,{title:"Scaleflex DAM"},{navigation:p((()=>[d("div",li,[d("div",ri,[d("div",{onClick:t[0]||(t[0]=(...e)=>o.toDamSetting&&o.toDamSetting(...e)),class:"external-link"},[u(c,{name:"settings",style:{color:"var(--theme--primary)"}}),t[2]||(t[2]=d("span",{style:{"margin-left":"4px","font-size":"14px",display:"block"}},"Scaleflex DAM",-1))]),d("div",si,[u(c,{name:"gallery_thumbnail",style:{color:"var(--theme--primary)"}}),t[3]||(t[3]=d("span",{style:{"margin-left":"4px","font-size":"14px",display:"block"}},"Assets Library",-1))]),d("a",ci,[u(c,{name:"description",style:{color:"var(--theme--primary)"}}),t[4]||(t[4]=d("span",{style:{"margin-left":"4px","font-size":"14px",display:"block"}},"Documentation",-1))])])])])),default:p((()=>[t[9]||(t[9]=d("link",{rel:"stylesheet",type:"text/css",href:"https://scaleflex.cloudimg.io/v7/plugins/filerobot-widget/v3/latest/filerobot-widget.min.css"},null,-1)),o.isTokenAndSecExists?(r(),s("div",di,t[5]||(t[5]=[d("div",{id:"sfx-dam-widget"},null,-1)]))):f("v-if",!0),o.isTokenAndSecExists?f("v-if",!0):(r(),s("div",ui,[u(y,{style:{"max-width":"100%"}},{default:p((()=>[u(m,{style:{color:"tomato",display:"flex","align-items":"center"}},{default:p((()=>[u(c,{name:"report"}),t[6]||(t[6]=d("span",{style:{"font-size":"14px","margin-left":"5px"}},"Scaleflex DAM Notice",-1))])),_:1}),u(h,{style:{"max-width":"100%","padding-bottom":"25px"}},{default:p((()=>[t[7]||(t[7]=g(" Please visit the ")),d("span",{style:{"text-decoration":"underline",color:"dodgerblue",cursor:"pointer"},onClick:t[1]||(t[1]=(...e)=>o.toDamSetting&&o.toDamSetting(...e)),target:"_blank"},"Scaleflex DAM Configuration"),t[8]||(t[8]=g(" to add your Token and Template ID before browsing assets. "))])),_:1})])),_:1})]))])),_:1})}],["__file","module.vue"]])}]};Rt("\n.ml-1 {\n  margin-left: 0.5rem;\n}\n#sfx-editor-modal .filerobot-Provider-ItemCategory-wrapper .filerobot-u-reset {\n  top: 0;\n}\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.modal {\n  background: white;\n  border-radius: 8px;\n  padding: 1rem;\n  width: 80%;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n  overflow-y: auto;\n  max-height: 80vh;\n  margin: 1.75rem auto;\n}\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.modal-close-btn {\n  background: transparent;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n}\n.modal-body {\n  margin: 1rem 0;\n}\n.modal-footer {\n  text-align: right;\n}\n\n",{});const mi={props:{value:{type:String,default:""},options:{type:Object,default:()=>({})}},data:()=>({editor:null}),emits:["input","close"],setup(e,{emit:t}){const n=i(!1),a=w(),l=i(!1),r=i(!0),s=i(""),c=i(""),d=i(""),u=i(null),p=i([]),m=i([]);i(!1);const f=i("");i(!1);const h=i(!1);function g(){document.getElementById("sfx-editor-modal").setAttribute("style","display: none"),t("close"),n.value=!1}return o((()=>{!async function(){await async function(){try{const t=(await a.get("/items/scaleflex_dam_settings/1")).data.data;if(!t)throw new Error("Data not found");t.token&&t.sec?(f.value=`https://api.filerobot.com/${t.token}/v5`,s.value=t.token||"",c.value=t.sec||"",d.value=t.directory||"",h.value=!0):h.value=!1,e.custom?(u.value=e.limit||null,m.value=e.limitTypes?e.limitTypes:[],p.value=e.attributes?e.attributes:[]):(u.value=t.limit||null,m.value=t.limitType?t.limitType.split(","):[],p.value=t.attributes?t.attributes.split(","):[])}catch(e){}}().then((function(){r.value=!1,l.value=!0}))}()})),setTimeout((function(){tinymce.init({selector:"#tinymce-editor",plugins:["media","table","lists","image","link","pagebreak","code","insertdatetime","autoresize","preview","fullscreen","directionality"],toolbar:"h1 h2 h3 bold italic underline alignleft aligncenter alignright alignjustify bullist numlist outdent indent removeformat blockquote fullscreen | sfxDAM",setup:e=>{this.editor=e,e.ui.registry.addToggleButton("sfxDAM",{text:"DAM",onAction:e=>{console.log("open DAM"),document.getElementById("sfx-editor-modal").setAttribute("style","display: block"),n.value=!0,async function(){!function(e){if(!window.Filerobot)return;let t=window.Filerobot,n=null;n=t.Core({securityTemplateID:e.sec,container:e.token});let i=e.directory,o=t.Explorer,a=t.XHRUpload;n.use(o,{config:{rootFolderPath:i},target:"#sfx-dam-widget-editor",inline:!0,width:"100%",height:"100%",disableExportButton:!1,hideExportButtonIcon:!0,preventExportDefaultBehavior:!0,dismissUrlPathQueryUpdate:!0,disableDownloadButton:!1,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,locale:{strings:{mutualizedExportButtonLabel:"Add assets",mutualizedDownloadButton:"Add assets"}},filters:{mimeTypes:m.value}}).use(a).on("export",(async(e,t,n,i)=>{console.dir(e),g()})).on("complete",(({failed:e,uploadID:t,successful:n})=>{e&&console.dir(e),n&&n.forEach(((e,t)=>{}))}))}({token:s.value,sec:c.value,directory:d.value,limitType:m.value})}()}}),e.on("input",(()=>{const n=e.getContent();t("input",n)}))}})}),1e3),{closeModal:g}},beforeDestroy(){this.editor&&(this.editor.destroy(),this.editor=null)}},fi=["value"],hi={class:"modal"},gi={class:"modal-header"},vi={class:"modal-body"},yi={class:"modal-footer"};const bi=[On,{id:"dam-editor",name:"WYSIWYG With DAM",icon:"format_quote",description:"Use the WYSIWYG with Scaleflex DAM",component:zt(mi,[["render",function(e,t,n,i,o,a){return r(),s(c,null,[t[4]||(t[4]=d("link",{rel:"stylesheet",type:"text/css",href:"https://scaleflex.cloudimg.io/v7/plugins/filerobot-widget/v3/latest/filerobot-widget.min.css"},null,-1)),d("div",null,[d("textarea",{id:"tinymce-editor",value:n.value},null,8,fi)]),d("div",{style:y({display:e.isOpen?"block":"none"}),class:"modal-overlay",id:"sfx-editor-modal"},[d("div",hi,[d("div",gi,[t[2]||(t[2]=d("h3",null,"Scaleflex DAM",-1)),d("button",{onClick:t[0]||(t[0]=(...e)=>i.closeModal&&i.closeModal(...e)),class:"modal-close-btn"},"")]),d("div",vi,[b(e.$slots,"default",{},(()=>[t[3]||(t[3]=d("div",{id:"sfx-dam-widget-editor"},null,-1))]))]),d("div",yi,[d("button",{onClick:t[1]||(t[1]=(...e)=>i.closeModal&&i.closeModal(...e)),class:"btn"},"Close")])])],4)],64)}],["__file","interface.vue"]]),options:{standard:[{field:"toolbar",name:"$t:interfaces.input-rich-text-html.toolbar",type:"json",schema:{default_value:["bold","italic","underline","h1","h2","h3","numlist","bullist","removeformat","blockquote","customLink","customImage","customMedia","hr","code","fullscreen"]},meta:{width:"half",interface:"select-multiple-dropdown",options:{choices:[{value:"undo",text:"$t:wysiwyg_options.undo"},{value:"redo",text:"$t:wysiwyg_options.redo"},{value:"bold",text:"$t:wysiwyg_options.bold"},{value:"italic",text:"$t:wysiwyg_options.italic"},{value:"underline",text:"$t:wysiwyg_options.underline"},{value:"strikethrough",text:"$t:wysiwyg_options.strikethrough"},{value:"subscript",text:"$t:wysiwyg_options.subscript"},{value:"superscript",text:"$t:wysiwyg_options.superscript"},{value:"fontfamily",text:"$t:wysiwyg_options.fontselect"},{value:"fontsize",text:"$t:wysiwyg_options.fontsizeselect"},{value:"h1",text:"$t:wysiwyg_options.h1"},{value:"h2",text:"$t:wysiwyg_options.h2"},{value:"h3",text:"$t:wysiwyg_options.h3"},{value:"h4",text:"$t:wysiwyg_options.h4"},{value:"h5",text:"$t:wysiwyg_options.h5"},{value:"h6",text:"$t:wysiwyg_options.h6"},{value:"alignleft",text:"$t:wysiwyg_options.alignleft"},{value:"aligncenter",text:"$t:wysiwyg_options.aligncenter"},{value:"alignright",text:"$t:wysiwyg_options.alignright"},{value:"alignjustify",text:"$t:wysiwyg_options.alignjustify"},{value:"alignnone",text:"$t:wysiwyg_options.alignnone"},{value:"indent",text:"$t:wysiwyg_options.indent"},{value:"outdent",text:"$t:wysiwyg_options.outdent"},{value:"numlist",text:"$t:wysiwyg_options.numlist"},{value:"bullist",text:"$t:wysiwyg_options.bullist"},{value:"forecolor",text:"$t:wysiwyg_options.forecolor"},{value:"backcolor",text:"$t:wysiwyg_options.backcolor"},{value:"removeformat",text:"$t:wysiwyg_options.removeformat"},{value:"cut",text:"$t:wysiwyg_options.cut"},{value:"copy",text:"$t:wysiwyg_options.copy"},{value:"paste",text:"$t:wysiwyg_options.paste"},{value:"remove",text:"$t:wysiwyg_options.remove"},{value:"selectall",text:"$t:wysiwyg_options.selectall"},{value:"blockquote",text:"$t:wysiwyg_options.blockquote"},{value:"customLink",text:"$t:wysiwyg_options.link"},{value:"unlink",text:"$t:wysiwyg_options.unlink"},{value:"customImage",text:"$t:wysiwyg_options.image"},{value:"customMedia",text:"$t:wysiwyg_options.media"},{value:"table",text:"$t:wysiwyg_options.table"},{value:"hr",text:"$t:wysiwyg_options.hr"},{value:"code",text:"$t:wysiwyg_options.source_code"},{value:"fullscreen",text:"$t:wysiwyg_options.fullscreen"},{value:"visualaid",text:"$t:wysiwyg_options.visualaid"},{value:"ltr rtl",text:"$t:wysiwyg_options.directionality"}]}}},{field:"font",name:"$t:font",type:"string",meta:{width:"half",interface:"select-dropdown",options:{choices:[{text:"$t:sans_serif",value:"sans-serif"},{text:"$t:monospace",value:"monospace"},{text:"$t:serif",value:"serif"}]}},schema:{default_value:"sans-serif"}},{field:"folder",name:"$t:folder",type:"uuid",meta:{width:"half",interface:"system-folder",note:"$t:interfaces.input-rich-text-html.folder_note"}},{field:"imageToken",name:"$t:interfaces.input-rich-text-html.imageToken",type:"string",meta:{note:"$t:interfaces.input-rich-text-html.imageToken_label",width:"half",interface:"input"}}],advanced:[{field:"softLength",name:"$t:soft_length",type:"integer",meta:{width:"half",interface:"input",options:{placeholder:"255",min:1}}},{field:"customFormats",name:"$t:interfaces.input-rich-text-html.custom_formats",type:"json",meta:{interface:"code",note:"$t:interfaces.input-rich-text-html.custom_formats_note",options:{language:"json",template:JSON.stringify([{title:"My Custom Format",inline:"span",classes:"custom-wrapper",styles:{color:"#00ff00","font-size":"20px"},attributes:{title:"My Custom Wrapper"}}],null,4)}}},{field:"tinymceOverrides",name:"$t:interfaces.input-rich-text-html.options_override",type:"json",meta:{interface:"code",note:"$t:interfaces.input-rich-text-html.options_override_note",options:{language:"json",template:JSON.stringify({font_size_formats:"8pt 10pt 12pt 14pt 16pt 18pt 24pt 36pt 48pt",font_family_formats:"Arial=arial,helvetica,sans-serif; Courier New=courier new,courier,monospace;"},null,4)}}}]},types:["text"]}],xi=[oi],wi=[],_i=[Gn,pi],ki=[],Di=[],Si=[];export{xi as displays,bi as interfaces,wi as layouts,_i as modules,Si as operations,ki as panels,Di as themes};
