import{ref as t,onMounted as e,resolveComponent as n,openBlock as i,createBlock as r,withCtx as o,createElementVNode as a,createElementBlock as s,createVNode as l,createCommentVNode as u,createTextVNode as c,toDisplayString as h,Fragment as d,renderList as f,normalizeClass as p,normalizeStyle as g,watch as m,defineComponent as v,toRefs as b,nextTick as y,onBeforeUnmount as w,onActivated as x,onDeactivated as _,h as S,renderSlot as A,resolveDynamicComponent as C,withDirectives as z,vShow as E,mergeProps as k,withModifiers as R,toRaw as D,isProxy as M}from"vue";import{useStores as T,useApi as I}from"@directus/extensions-sdk";import{createDirectus as O,rest as j,readMe as $}from"@directus/sdk";var P=[],L=[];function W(t,e){if(t&&"undefined"!=typeof document){var n,i=!0===e.prepend?"prepend":"append",r=!0===e.singleTag,o="string"==typeof e.container?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(r){var a=P.indexOf(o);-1===a&&(a=P.push(o)-1,L[a]={}),n=L[a]&&L[a][i]?L[a][i]:L[a][i]=s()}else n=s();65279===t.charCodeAt(0)&&(t=t.substring(1)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(document.createTextNode(t))}function s(){var t=document.createElement("style");if(t.setAttribute("type","text/css"),e.attributes)for(var n=Object.keys(e.attributes),r=0;r<n.length;r++)t.setAttribute(n[r],e.attributes[n[r]]);var a="prepend"===i?"afterbegin":"beforeend";return o.insertAdjacentElement(a,t),t}}W(".sfx-padding-box {\r\n    padding: 0 32px 32px;\r\n}\r\n\r\n.guide-text {\r\n    font-size: 13px;\r\n    margin-top: 5px;\r\n    color: #285c72;\r\n}\r\n\r\n.homepage{\r\n    margin-top: 10px;\r\n    display: flex;\r\n    transition: color 500ms ease;\r\n    cursor: pointer;\r\n}\r\n\r\n.homepage:hover{\r\n    color: #285c72;\r\n}\r\n\r\n.homepage span.v-icon {\r\n    margin-top: 2px;\r\n}\r\n\r\n.homepage span {\r\n    margin-left: 4px;\r\n    font-size: 14px;\r\n    display: block;\r\n    margin-top: 0;\r\n}\r\n\r\n.mb-3 {\r\n    margin-bottom: 1rem;\r\n}\r\n\r\n.sfx-logo-abs {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: -40px;\r\n    width: 180px;\r\n    z-index: 1;\r\n    opacity: 0.4;\r\n}\r\n\r\n.external-link{\r\n    display: flex;\r\n    padding: 5px 8px;\r\n    border-radius: 4px;\r\n    transition: background 500ms ease;\r\n    align-items: center;\r\n    cursor: pointer;\r\n}\r\n\r\n.external-link:hover{\r\n    background: var(--theme--navigation--project--background);\r\n}\r\n\r\n.left-menu {\r\n    margin-top: 20px;\r\n    padding: 0 10px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-content: center;\r\n}\r\n\r\n.left-menu .settings {\r\n    display: flex;\r\n    background: var(--theme--navigation--project--background);\r\n    padding: 5px 8px;\r\n    border-radius: 4px;\r\n    align-items: center;\r\n}\r\n\r\n.left-menu i {\r\n    color: var(--theme--primary);\r\n}\r\n\r\n.left-menu span {\r\n    margin-left: 4px;\r\n    font-size: 14px;\r\n    display: block;\r\n}\r\n\r\n.left-menu .external-link {\r\n    margin-top: 8px;\r\n}\r\n\r\n.main-card {\r\n    margin:0 32px 32px 32px;\r\n    max-width: 100% !important;\r\n}\r\n\r\n.main-card .card-content {\r\n    padding: 15px;\r\n    width: 100%;\r\n    position: relative;\r\n}\r\n\r\n.main-card .card-content .sfx-logo {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: start;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.setting-title {\r\n    font-size: 18px;\r\n    margin-bottom: 20px;\r\n}",{});var B=(t,e)=>{const n=t.__vccOpts||t;for(const[t,i]of e)n[t]=i;return n};const V={props:{collection:{type:String,default:"scaleflex_dam_settings"},id:{type:Number,default:1}},setup(n){const{useCollectionsStore:i}=T(),r=I(),o=i(),a=t(""),s=t(""),l=t(""),u=t(""),c=t([]),h=t([]),d=t(!0),f=t(!1),p=t(!1),g=t(!1),m=t("info"),v=t(null),b=t(null),y=t(!1),w=t(!1);function x(t){return""===t||null===t}function _(){const t=document.querySelector('a[href="/admin/scaleflex-dam"]');t&&t.click()}return e((()=>{!async function(){const t=O(process.env.PUBLIC_URL).with(j()),e=await t.request($({fields:["role.policies.policy.admin_access"]}));if(e?.role?.policies){const t=e?.role?.policies,n=t.some((t=>t.policy.admin_access));w.value=n,n||_()}}()})),async function(){f.value=!0;const t=n.collection;try{await o.getCollection(t)?p.value=!0:(await o.upsertCollection(t,{collection:t,meta:{note:"Scaleflex DAM"},schema:{fields:[{field:"id",type:"uuid",meta:{primary_key:!0}}]}}),await async function(){try{let t={meta:{hidden:!0}};await r.patch(`/collections/${n.collection}`,t)}catch(t){console.error(`Failed to hidden collection: ${t.message}`)}}(),await async function(){const t=[{type:"string",meta:{interface:"input",special:null},field:"token"},{type:"string",meta:{interface:"input",special:null},field:"sec"},{type:"string",meta:{interface:"input",special:null},field:"directory"},{type:"integer",meta:{interface:"input",special:null},field:"limit"},{type:"string",meta:{interface:"input",special:null},field:"attributes"},{type:"string",meta:{interface:"input",special:null},field:"limitType"}];try{for(const e of t)await r.post(`/fields/${n.collection}`,e),console.log(`Field ${e.field} created.`);await async function(){const t={token:"",sec:"",directory:"/",limit:null,limitType:"",attributes:""};try{await r.post(`/items/${n.collection}`,t)}catch(t){console.error(`Failed to create data: ${t.message}`)}}()}catch(t){console.error(`Failed to create fields: ${t.message}`)}}(),p.value=!1)}catch(t){}finally{f.value=!1}}().then((async function(){try{if(p){const t=(await r.get(`/items/${n.collection}/${n.id}`)).data.data;a.value=t.token||"",s.value=t.sec||"",l.value=t.directory||"",u.value=t.limit||0,c.value=x(t.attributes)?[]:t.attributes.split(","),h.value=x(t.limitType)?[]:t.limitType.split(",")}}catch(t){console.error(`Error loading data: ${t.message}`)}})),{token:a,sec:s,directory:l,saveSfxToken:async function(){if(f.value=!0,d.value=await async function(){const t=`https://api.filerobot.com/${a.value}/v4/key/${s.value}`;try{return 200===(await fetch(t)).status}catch(t){return!1}}(),g.value=!0,d.value)try{let t=h.value?h.value.toString():null,e=c.value?c.value.toString():null;const i={token:a.value,sec:s.value,directory:l.value,limit:u.value,attributes:e,limitType:t};await r.patch(`/items/${n.collection}/${n.id}`,i),m.value="success",v.value="Successfully Saved",b.value="Your updates have been saved and are now active. You can now add the Scaleflex DAM Field to your schema and begin using it immediately."}catch(t){m.value="danger",v.value="System Error",b.value="Failed to save settings. Please refresh the Page and try again."}finally{f.value=!1}else m.value="warning",v.value="Invalid Settings",b.value="Please verify your token and security template. The current configuration is incorrect and requires adjustment.";f.value=!1},loading:f,limit:u,attributes:c,limitType:h,isValid:d,dialogVisible:g,closeDialog:function(){g.value=!1},dialogText:b,dialogTitle:v,dialogType:m,confirmResetAllSettings:async function(){m.value="danger",v.value="Reset All Settings",b.value="Are you sure you want to reset all settings to their default values? This action cannot be undone and may affect your current configuration.",g.value=!0,y.value=!0},dialogReset:y,resetAllSettings:async function(){f.value=!0;try{const t={token:"",sec:"",directory:"/",limit:null,attributes:null,limitType:null};await r.patch(`/items/${n.collection}/${n.id}`,t),m.value="success",v.value="Settings Reset Successfully",b.value="All settings have been reset to their defaults. To continue using Scaleflex DAM with your model, please reconfigure your settings and verify them for seamless functionality."}catch(t){m.value="danger",v.value="System Error",b.value="Failed to save settings. Please refresh the Page and try again."}finally{f.value=!1,y.value=!1,a.value="",s.value="",l.value="",u.value="",c.value=[],h.value=[]}},toDam:_,isAdministrator:w}}},N={class:"left-menu"},U={key:0,class:"settings"},F={href:"https://docs.scaleflex.com/digital-asset-management-dam/plugins-and-connectors/plugins/directus",target:"_blank",class:"external-link"},H={href:"https://www.scaleflex.com",target:"_blank",class:"homepage"},Y={class:"sfx-padding-box"},X={class:"mb-3"},q={class:"mb-3"},Z={class:"mb-3"},G={class:"mb-3"},K={class:"mb-3"},Q={class:"mb-3"},J={style:{display:"flex","justify-content":"start","align-items":"center"}},tt={style:{"margin-left":"5px"}};var et=B(V,[["render",function(t,e,d,f,p,g){const m=n("VIcon"),v=n("VCardTitle"),b=n("VCardText"),y=n("VCard"),w=n("VInput"),x=n("VDivider"),_=n("VSelect"),S=n("VButton"),A=n("v-card-title"),C=n("v-card-text"),z=n("v-card-actions"),E=n("v-card"),k=n("VDialog"),R=n("private-view");return i(),r(R,{title:"Scaleflex DAM"},{navigation:o((()=>[a("div",N,[f.isAdministrator?(i(),s("div",U,[l(m,{name:"settings"}),e[8]||(e[8]=a("span",null,"Scaleflex DAM",-1))])):u("v-if",!0),a("div",{onClick:e[0]||(e[0]=(...t)=>f.toDam&&f.toDam(...t)),class:"external-link"},[l(m,{name:"gallery_thumbnail"}),e[9]||(e[9]=a("span",null,"Assets Library",-1))]),a("a",F,[l(m,{name:"description"}),e[10]||(e[10]=a("span",null,"Documentation",-1))])])])),default:o((()=>[l(y,{class:"main-card"},{default:o((()=>[l(v,{class:"card-title"},{default:o((()=>e[11]||(e[11]=[c(" About Scaleflex DAM ")]))),_:1}),l(b,{class:"card-content"},{default:o((()=>[e[13]||(e[13]=a("div",{class:"sfx-logo"},[a("img",{src:"https://frzjaqrbb.filerobot.com/plugins_assets/scaleflex.svg"})],-1)),e[14]||(e[14]=a("div",{style:{"z-index":"999"}}," Scaleflex DAM(Filerobot) is a scalable and performance-oriented Digital Asset Management platform with integrated image and video optimizers to store, organize, optimize and deliver your media assets such as images, videos, PDFs and many other brand assets fast all around the world to all device types. ",-1)),a("a",H,[l(m,{name:"house",small:!0}),e[12]||(e[12]=a("span",null,"Scaleflex Home",-1))]),e[15]||(e[15]=a("img",{src:"https://frzjaqrbb.filerobot.com/plugins_assets/dam.svg",class:"sfx-logo-abs"},null,-1))])),_:1})])),_:1}),a("div",Y,[e[31]||(e[31]=a("div",{class:"setting-title"},[a("h2",null,"Base configurations"),a("p",{class:"guide-text"},"The following fields are required to integrate the Scaleflex DAM Widget within Directus.")],-1)),a("div",X,[e[16]||(e[16]=a("label",{for:"sfx_token"},[a("b",null,"Token")],-1)),l(w,{disabled:f.loading,modelValue:f.token,"onUpdate:modelValue":e[1]||(e[1]=t=>f.token=t)},null,8,["disabled","modelValue"]),e[17]||(e[17]=a("p",{class:"guide-text"},[c("Scaleflex DAM token from your account, you can obtain a token by fill in "),a("a",{style:{color:"var(--theme--primary)"},href:"https://www.scaleflex.com/contact-us",target:"_blank"},"Scaleflex contact page")],-1))]),a("div",q,[e[18]||(e[18]=a("label",{for:"sfx_sec"},[a("b",null,"Security Template")],-1)),l(w,{disabled:f.loading,modelValue:f.sec,"onUpdate:modelValue":e[2]||(e[2]=t=>f.sec=t)},null,8,["disabled","modelValue"]),e[19]||(e[19]=a("p",{class:"guide-text"},"To load the Scaleflex DAM Widget or Scaleflex DAM Image Editor, you you need to create a Security Template in your Asset Hub first, in order for your Directus instantiation of the Widget to obtain proper credentials and access your storage",-1))]),a("div",Z,[e[20]||(e[20]=a("label",{for:"sfx_token"},[a("b",null,"Root Directory")],-1)),l(w,{disabled:f.loading,modelValue:f.directory,"onUpdate:modelValue":e[3]||(e[3]=t=>f.directory=t)},null,8,["disabled","modelValue"]),e[21]||(e[21]=a("p",{class:"guide-text"},"The directory in your Hub, where the files will be stored",-1))]),l(x,{style:{margin:"20px 0"}}),e[32]||(e[32]=a("div",{class:"setting-title"},[a("h2",null,"Advanced configuration"),a("p",{class:"guide-text"},"This configuration will be overridden if 'Use Custom Setting' is activated in each Field Interface.")],-1)),a("div",G,[e[22]||(e[22]=a("label",{for:"limit"},[a("b",null,"Limit")],-1)),l(w,{disabled:f.loading,min:"0",modelValue:f.limit,"onUpdate:modelValue":e[4]||(e[4]=t=>f.limit=t),type:"number"},null,8,["disabled","modelValue"]),e[23]||(e[23]=a("p",{class:"guide-text"},[c("The max number of files that can be added to a single field, "),a("b",{style:{color:"var(--theme--primary)"}},"default: 0(unlimited)")],-1))]),a("div",K,[e[24]||(e[24]=a("label",{for:"attributes"},[a("b",null,"Attributes")],-1)),l(_,{modelValue:f.attributes,"onUpdate:modelValue":e[5]||(e[5]=t=>f.attributes=t),disabled:f.loading,items:[{text:"Meta",value:"meta"},{text:"Tags",value:"tags"},{text:"Info",value:"info"}],multiplePreviewThreshold:4,multiple:!0},null,8,["modelValue","disabled"]),e[25]||(e[25]=a("p",{class:"guide-text"},"Attribute from Scaleflex DAM asset that you want to include in Client response",-1))]),a("div",Q,[e[26]||(e[26]=a("label",{for:"limitType"},[a("b",null,"Limit Type")],-1)),l(_,{modelValue:f.limitType,"onUpdate:modelValue":e[6]||(e[6]=t=>f.limitType=t),disabled:f.loading,multiplePreviewThreshold:5,items:[{text:"Image",value:"image"},{text:"Document",value:"document"},{text:"Video",value:"video"},{text:"Audio",value:"audio"}],multiple:!0},null,8,["modelValue","disabled"]),e[27]||(e[27]=a("p",{class:"guide-text"},"File types limit when use Widget",-1))]),a("div",null,[f.loading?u("v-if",!0):(i(),r(S,{key:0,onClick:f.saveSfxToken},{default:o((()=>[l(m,{name:"save"}),e[28]||(e[28]=a("span",{style:{"margin-left":"5px"}},"Save Settings",-1))])),_:1},8,["onClick"])),f.loading||""===f.token||""===f.sec?u("v-if",!0):(i(),r(S,{key:1,style:{"margin-left":"15px"},onClick:f.confirmResetAllSettings,outlined:!0,danger:!0},{default:o((()=>[l(m,{name:"restart_alt"}),e[29]||(e[29]=a("span",{style:{"margin-left":"5px"}},"Reset all settings",-1))])),_:1},8,["onClick"])),f.loading?(i(),r(S,{key:2,disabled:f.loading},{default:o((()=>e[30]||(e[30]=[a("span",null,"Processing...",-1)]))),_:1},8,["disabled"])):u("v-if",!0)])]),l(k,{modelValue:f.dialogVisible,"onUpdate:modelValue":e[7]||(e[7]=t=>f.dialogVisible=t)},{default:o((()=>[l(E,{class:"dialog-content"},{default:o((()=>[l(A,null,{default:o((()=>[a("div",J,["info"===f.dialogType?(i(),r(m,{key:0,color:"gray",name:"info"})):u("v-if",!0),"warning"===f.dialogType?(i(),r(m,{key:1,color:"tomato",name:"warning"})):u("v-if",!0),"success"===f.dialogType?(i(),r(m,{key:2,color:"green",name:"check_circle"})):u("v-if",!0),"danger"===f.dialogType?(i(),r(m,{key:3,color:"red",name:"error"})):u("v-if",!0),a("span",tt,h(f.dialogTitle),1)])])),_:1}),l(C,{style:{padding:"10px 35px"}},{default:o((()=>[c(h(f.dialogText),1)])),_:1}),l(z,null,{default:o((()=>[f.dialogReset?(i(),r(S,{key:0,outlined:!0,onClick:f.closeDialog},{default:o((()=>e[33]||(e[33]=[c("Cancel")]))),_:1},8,["onClick"])):u("v-if",!0),f.dialogReset?u("v-if",!0):(i(),r(S,{key:1,outlined:!0,onClick:f.closeDialog},{default:o((()=>e[34]||(e[34]=[c("Close")]))),_:1},8,["onClick"])),f.dialogReset?(i(),r(S,{key:2,danger:!0,onClick:f.resetAllSettings},{default:o((()=>e[35]||(e[35]=[c("Reset")]))),_:1},8,["onClick"])):u("v-if",!0),"warning"!==f.dialogType&&"danger"!==f.dialogType||f.dialogReset?u("v-if",!0):(i(),r(S,{key:3,onClick:f.closeDialog},{default:o((()=>e[36]||(e[36]=[c(" Double check Settings ")]))),_:1},8,["onClick"]))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}],["__file","module.vue"]]),nt={id:"scaleflex-dam-setting",name:"Scaleflex DAM Setting",icon:"filter",routes:[{path:"",component:et},{name:"page",path:":page",props:!0,component:et}]};W(".media-container {\r\n    display: block;\r\n    position: relative;\r\n    padding: 5px;\r\n}\r\n\r\n.media-item-wrapper {\r\n    position: relative;\r\n    transition: transform 0.2s ease, z-index 0.2s ease;\r\n}\r\n\r\n.media-item-wrapper.hovered {\r\n    transform: scale(1.2); /* Highlight effect */\r\n}\r\n\r\n.media-item {\r\n    width: 35px;\r\n    height: 35px;\r\n    border-radius: 35%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: #f0f0f0;\r\n    border: 2px solid white; /* Circle border for better visibility */\r\n    overflow: hidden;\r\n}\r\n\r\n.circle {\r\n    background-size: cover;\r\n    background-position: center;\r\n}\r\n\r\n.icon-wrapper {\r\n    background-color: #ddd; /* Placeholder background for icons */\r\n}\r\n\r\n.extra-items .media-item {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--v-button-background-color, var(--theme--primary));\r\n    opacity: 70%;\r\n    font-size: 14px;\r\n    color: white;\r\n    font-weight: bold;\r\n}\r\n\r\n.extra-count {\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n}",{});const it={class:"media-container"},rt=["onMouseover"],ot=["alt"],at={key:1,class:"media-item circle icon-wrapper"},st={key:0,class:"media-item-wrapper extra-items"},lt={class:"media-item circle icon-wrapper"},ut={class:"extra-count"};var ct=B({props:{value:{type:Array,default:()=>[]},limit:{type:Number,default:2}},data:()=>({hoveredIndex:null}),computed:{displayedItems(){return this.value.slice(0,this.limit)}},methods:{isImage:t=>t.startsWith("image"),isVideo:t=>t.startsWith("video"),isAudio:t=>t.startsWith("audio"),getIconName(t){return this.isVideo(t)?"videocam":this.isAudio(t)?"play_circle":"draft"},hasQueryString(t){try{return new URL(t).search.length>0}catch(t){return!1}},createThumbnail(t){return this.hasQueryString(t)?t+"&width=100&height=100":t+"?width=100&height=100"}}},[["render",function(t,e,r,o,c,m){const v=n("VIcon");return i(),s("div",it,[(i(!0),s(d,null,f(m.displayedItems,((t,n)=>(i(),s("div",{key:n,class:p(["media-item-wrapper",{hovered:c.hoveredIndex===n}]),style:g({zIndex:c.hoveredIndex===n?100:n+1,marginLeft:n>0?"-12px":"0"}),onMouseover:t=>c.hoveredIndex=n,onMouseleave:e[0]||(e[0]=t=>c.hoveredIndex=null)},[m.isImage(t.type)?(i(),s("div",{key:0,class:"media-item circle",style:g({backgroundImage:`url(${m.createThumbnail(t.cdn)})`}),alt:t.name},null,12,ot)):(i(),s("div",at,[l(v,{class:p(`item-icon ${t.type}`),name:m.getIconName(t.type),small:!0},null,8,["class","name"])]))],46,rt)))),128)),r.value.length>r.limit?(i(),s("div",st,[a("div",lt,[a("span",ut,"+"+h(r.value.length-r.limit),1)])])):u("v-if",!0)])}],["__file","display.vue"]]),ht={id:"scaleflex-dam-display",name:"DAM Assets",icon:"image",description:"Display DAM assets with beautiful UI",component:ct,options:[{field:"limit",type:"integer",name:"Limit assets on Display",meta:{interface:"input",options:{min:0}},schema:{default_value:2}}],types:["json"]};W("#sfx-dam-widget .filerobot-Provider-ItemCategory-wrapper .filerobot-u-reset {\r\n    top: 0;\r\n}\r\n\r\n.header-bar {\r\n    z-index: 99999;\r\n}\r\n\r\n.filerobot-common-Search-searchInput {\r\n    background: #FFF;\r\n}\r\n\r\n.external-link{\r\n    display: flex;\r\n    padding: 5px 8px;\r\n    border-radius: 4px;\r\n    transition: background 500ms ease;\r\n    align-items: center;\r\n}\r\n\r\n.external-link:hover{\r\n    background: var(--theme--navigation--project--background);\r\n}\r\n\r\n.pd-default {\r\n    padding: 32px;\r\n}\r\n\r\n.mw-100 {\r\n    max-width: 100%;\r\n}\r\n\r\n.card-title-danger {\r\n    color: tomato; display: flex; align-items: center;\r\n}\r\n\r\n.card-title-danger .notice {\r\n    font-size: 14px;\r\n    margin-left: 5px;\r\n}\r\n\r\n.span-action {\r\n    text-decoration: underline;\r\n    color: dodgerblue;\r\n    cursor: pointer;\r\n}\r\n\r\n.card-content {\r\n    max-width: 100%;\r\n    padding-bottom: 25px;\r\n}\r\n\r\n.left-menu {\r\n    margin-top: 20px;\r\n    padding: 0 10px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-content: center;\r\n}\r\n\r\n.left-menu .settings {\r\n    display: flex;\r\n    background: var(--theme--navigation--project--background);\r\n    padding: 5px 8px;\r\n    border-radius: 4px;\r\n    align-items: center;\r\n}\r\n\r\n.left-menu i {\r\n    color: var(--theme--primary);\r\n}\r\n\r\n.left-menu span {\r\n    margin-left: 4px;\r\n    font-size: 14px;\r\n    display: block;\r\n}\r\n\r\n.left-menu .external-link {\r\n    margin-top: 8px;\r\n}",{});const dt={props:{id:{type:Number,default:1},custom:{type:Boolean,default:!1},limit:{type:Number,default:0},limitTypes:{type:String,default:null},attributes:{type:String,default:null}},setup(n,{emit:i}){const r=I(),o=t(!1),a=t(!0),s=t(""),l=t(""),u=t(""),c=t(null),h=t([]),d=t([]),f=t(""),p=t(!1),g=t(!1);return e((()=>{(async function(){await async function(){try{const t=(await r.get(`/items/scaleflex_dam_settings/${n.id}`)).data.data;if(!t)throw new Error("Data not found");t.token&&t.sec?(f.value=`https://api.filerobot.com/${t.token}/v5`,s.value=t.token||"",l.value=t.sec||"",u.value=t.directory||"",p.value=!0):p.value=!1,n.custom?(c.value=n.limit||null,d.value=n.limitTypes?n.limitTypes:[],h.value=n.attributes?n.attributes:[]):(c.value=t.limit||null,d.value=t.limitType?t.limitType.split(","):[],h.value=t.attributes?t.attributes.split(","):[])}catch(t){}}().then((function(){a.value=!1,o.value=!0}));const t=O(process.env.PUBLIC_URL).with(j()),e=await t.request($({fields:["role.policies.policy.admin_access"]}));if(e?.role?.policies){const t=e?.role?.policies;g.value=t.some((t=>t.policy.admin_access))}})().then((function(){!function(t){if(!window.Filerobot)return;let e=window.Filerobot,n=null;n=e.Core({securityTemplateID:t.sec,container:t.token});let i=t.directory,r=e.Explorer,o=e.XHRUpload;n.use(r,{config:{rootFolderPath:i},target:"#sfx-dam-widget",inline:!0,width:"100%",height:"100%",disableExportButton:!1,hideExportButtonIcon:!0,preventExportDefaultBehavior:!0,dismissUrlPathQueryUpdate:!0,disableDownloadButton:!0,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,locale:{strings:{mutualizedExportButtonLabel:"Add assets",mutualizedDownloadButton:"Add assets"}},filters:{mimeTypes:d.value}}).use(o).on("export",(async(t,e,n,i)=>{})).on("complete",(({failed:t,uploadID:e,successful:n})=>{t&&console.dir(t),n&&n.forEach(((t,e)=>{}))}))}({token:s.value,sec:l.value,directory:u.value,limitType:d.value})}))})),{getIsLoading:function(){return a.value},toDamSetting:function(){const t=document.querySelector('a[href="/admin/scaleflex-dam-setting"]');t&&t.click()},isTokenAndSecExists:p,isAdministrator:g,toDam:function(){const t=document.querySelector('a[href="/admin/scaleflex-dam"]');t&&t.click()}}}},ft={class:"left-menu"},pt={key:0,class:"settings"},gt={href:"https://docs.scaleflex.com/digital-asset-management-dam/plugins-and-connectors/plugins/directus",target:"_blank",class:"external-link"},mt={key:0,class:"pd-default"},vt={key:1,class:"pd-default"};var bt,yt={id:"scaleflex-dam",name:"Scaleflex DAM",icon:"cloud",routes:[{path:"",component:B(dt,[["render",function(t,e,h,d,f,p){const g=n("VIcon"),m=n("VCardTitle"),v=n("VCardText"),b=n("VCard"),y=n("private-view");return i(),r(y,{title:"Scaleflex DAM"},{navigation:o((()=>[a("div",ft,[d.isAdministrator?(i(),s("div",pt,[l(g,{name:"settings"}),e[2]||(e[2]=a("span",null,"Scaleflex DAM",-1))])):u("v-if",!0),a("div",{onClick:e[0]||(e[0]=(...t)=>d.toDam&&d.toDam(...t)),class:"external-link"},[l(g,{name:"gallery_thumbnail"}),e[3]||(e[3]=a("span",null,"Assets Library",-1))]),a("a",gt,[l(g,{name:"description"}),e[4]||(e[4]=a("span",null,"Documentation",-1))])])])),default:o((()=>[e[9]||(e[9]=a("link",{rel:"stylesheet",type:"text/css",href:"https://scaleflex.cloudimg.io/v7/plugins/filerobot-widget/v3/latest/filerobot-widget.min.css"},null,-1)),d.isTokenAndSecExists?(i(),s("div",mt,e[5]||(e[5]=[a("div",{id:"sfx-dam-widget"},null,-1)]))):u("v-if",!0),d.isTokenAndSecExists?u("v-if",!0):(i(),s("div",vt,[l(b,{class:"mw-100"},{default:o((()=>[l(m,{class:"card-title-danger"},{default:o((()=>[l(g,{name:"report"}),e[6]||(e[6]=a("span",{class:"notice"},"Scaleflex DAM Notice",-1))])),_:1}),l(v,{class:"card-content"},{default:o((()=>[e[7]||(e[7]=c(" Please visit the ")),a("span",{class:"span-action",onClick:e[1]||(e[1]=(...t)=>d.toDamSetting&&d.toDamSetting(...t))},"Scaleflex DAM Configuration"),e[8]||(e[8]=c(" to add your Token and Template ID before browsing assets. "))])),_:1})])),_:1})]))])),_:1})}],["__file","module.vue"]])}]},wt=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],xt=function(t){return-1!==wt.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},_t=function(t,e,n,i,r,o){i.setContent(o()),n.attrs["onUpdate:modelValue"]&&function(t,e,n,i){var r=t.modelEvents?t.modelEvents:null,o=Array.isArray(r)?r.join(" "):r;m(i,(function(e,i){n&&"string"==typeof e&&e!==i&&e!==n.getContent({format:t.outputFormat})&&n.setContent(e)})),n.on(o||"change input undo redo",(function(){e.emit("update:modelValue",n.getContent({format:t.outputFormat}))}))}(e,n,i,r),function(t,e,n){Object.keys(e).filter(xt).forEach((function(i){var r=e[i];"function"==typeof r&&("onInit"===i?r(t,n):n.on(i.substring(2),(function(t){return r(t,n)})))}))}(t,n.attrs,i)},St=0,At=function(t){var e=Date.now();return t+"_"+Math.floor(1e9*Math.random())+ ++St+String(e)},Ct=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},zt=function(){return{listeners:[],scriptId:At("tiny-script"),scriptLoaded:!1}},Et=(bt=zt(),{load:function(t,e,n){bt.scriptLoaded?n():(bt.listeners.push(n),t.getElementById(bt.scriptId)||function(t,e,n,i){var r=e.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=t,r.src=n;var o=function(){r.removeEventListener("load",o),i()};r.addEventListener("load",o),e.head&&e.head.appendChild(r)}(bt.scriptId,t,e,(function(){bt.listeners.forEach((function(t){return t()})),bt.scriptLoaded=!0})))},reinitialize:function(){bt=zt()}}),kt=function(){return"undefined"!=typeof window?window:global},Rt=function(){var t=kt();return t&&t.tinymce?t.tinymce:null},Dt={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},Mt=function(){return Mt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Mt.apply(this,arguments)},Tt={selector:void 0,target:void 0},It=v({props:Dt,setup:function(n,i){var r=n.init?Mt(Mt({},n.init),Tt):Mt({},Tt),o=b(n),a=o.disabled,s=o.modelValue,l=o.tagName,u=t(null),c=null,h=n.id||At("tiny-vue"),d=n.init&&n.init.inline||n.inline,f=!!i.attrs["onUpdate:modelValue"],p=!0,g=n.initialValue?n.initialValue:"",v="",A=function(){var t,e,o,a=(t=p,f?function(){return(null==s?void 0:s.value)?s.value:""}:function(){return t?g:v}),l=Mt(Mt({},r),{readonly:n.disabled,target:u.value,plugins:(e=r.plugins,o=n.plugins,Ct(e).concat(Ct(o))),toolbar:n.toolbar||r.toolbar,inline:d,setup:function(t){c=t,t.on("init",(function(e){return _t(e,n,i,t,s,a)})),"function"==typeof r.setup&&r.setup(t)}});(function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()})(u.value)&&(u.value.style.visibility=""),Rt().init(l),p=!1};m(a,(function(t){var e;null!==c&&("function"==typeof(null===(e=c.mode)||void 0===e?void 0:e.set)?c.mode.set(t?"readonly":"design"):c.setMode(t?"readonly":"design"))})),m(l,(function(t){var e;f||(v=c.getContent()),null===(e=Rt())||void 0===e||e.remove(c),y((function(){return A()}))})),e((function(){if(null!==Rt())A();else if(u.value&&u.value.ownerDocument){var t=n.cloudChannel?n.cloudChannel:"6",e=n.apiKey?n.apiKey:"no-api-key",i=null==n.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(e,"/tinymce/").concat(t,"/tinymce.min.js"):n.tinymceScriptSrc;Et.load(u.value.ownerDocument,i,A)}})),w((function(){null!==Rt()&&Rt().remove(c)})),d||(x((function(){p||A()})),_((function(){var t;f||(v=c.getContent()),null===(t=Rt())||void 0===t||t.remove(c)})));return i.expose({rerender:function(t){var e;v=c.getContent(),null===(e=Rt())||void 0===e||e.remove(c),r=Mt(Mt(Mt({},r),t),Tt),y((function(){return A()}))},getEditor:function(){return c}}),function(){return d?function(t,e,n,i){return t(i||"div",{id:e,ref:n})}(S,h,u,n.tagName):function(t,e,n){return t("textarea",{id:e,visibility:"hidden",ref:n})}(S,h,u)}}});W("#sfx-editor-modal .filerobot-Provider-ItemCategory-wrapper .filerobot-u-reset {\r\n    top: 0;\r\n}\r\n\r\n.modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1000;\r\n}\r\n\r\n.modal {\r\n    background: white;\r\n    border-radius: 8px;\r\n    padding: 1rem;\r\n    width: 80%;\r\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n    overflow-y: auto;\r\n    max-height: 80vh;\r\n    margin: 1.75rem auto;\r\n}\r\n\r\n.modal-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.modal-close-btn {\r\n    background: transparent;\r\n    border: none;\r\n    font-size: 1.5rem;\r\n    cursor: pointer;\r\n}\r\n\r\n.modal-body {\r\n    margin: 1rem 0;\r\n}\r\n\r\n.modal-footer {\r\n    text-align: right;\r\n}",{});const Ot={props:{value:{type:String,default:""},options:{type:Object,default:()=>({})}},components:{Editor:It},data:()=>({editor:null}),emits:["input","close"],setup(n,{emit:i}){const r=t(!1),o=I(),a=t(!1),s=t(!0),l=t(""),u=t(""),c=t(""),h=t(null),d=t([]),f=t([]),p=t(""),g=t(!1);function m(){document.getElementById("sfx-editor-modal").setAttribute("style","display: none"),i("close"),r.value=!1}return e((()=>{!async function(){await async function(){try{const t=(await o.get("/items/scaleflex_dam_settings/1")).data.data;if(!t)throw new Error("Data not found");t.token&&t.sec?(p.value=`https://api.filerobot.com/${t.token}/v5`,l.value=t.token||"",u.value=t.sec||"",c.value=t.directory||"",g.value=!0):g.value=!1,n.custom?(h.value=n.limit||null,f.value=n.limitTypes?n.limitTypes:[],d.value=n.attributes?n.attributes:[]):(h.value=t.limit||null,f.value=t.limitType?t.limitType.split(","):[],d.value=t.attributes?t.attributes.split(","):[])}catch(t){}}().then((function(){s.value=!1,a.value=!0}))}()})),{closeModal:m,openModal:function(t){document.getElementById("sfx-editor-modal").setAttribute("style","display: block"),r.value=!0,async function(t){!function(t,e){if(!window.Filerobot)return;let n=window.Filerobot,i=null;i=n.Core({securityTemplateID:t.sec,container:t.token});let r=t.directory,o=n.Explorer,a=n.XHRUpload;i.use(o,{config:{rootFolderPath:r},target:"#sfx-dam-widget-editor",inline:!0,width:"100%",height:"100%",disableExportButton:!1,hideExportButtonIcon:!0,preventExportDefaultBehavior:!0,dismissUrlPathQueryUpdate:!0,disableDownloadButton:!1,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,locale:{strings:{mutualizedExportButtonLabel:"Add assets",mutualizedDownloadButton:"Add assets"}},filters:{mimeTypes:f.value}}).use(a).on("export",(async(t,n,i,r)=>{const o=function(t){let e="";return t.forEach((t=>{const n=t.file,i=n.type,r=n.meta?.title?.en||"No Title";let o=n.url?.cdn||"";void 0!==n.url?.download&&(o=n.url?.download);let a="<div>";"image/jpeg"===i||"image/png"===i?a+=`<img src='${o}' alt='${r}' />`:"video/mp4"===i||i.startsWith("video/")?a+=`<video src='${o}' controls></video>`:("audio/mpeg"===i||i.startsWith("audio/"))&&(a+=`<audio src='${o}' controls></audio>`),a+="</div>",e+=a})),e}(t);tinymce.get(e).insertContent(o),m()})).on("complete",(({failed:t,uploadID:e,successful:n})=>{t&&console.dir(t),n&&n.forEach(((t,e)=>{}))}))}({token:l.value,sec:u.value,directory:c.value,limitType:f.value},t)}(t)},emit:i,updateUrlParams:function(t,e){const n=new URL(t);for(const[t,i]of Object.entries(e))null==i?n.searchParams.delete(t):n.searchParams.set(t,i);return n.toString()}}},beforeDestroy(){this.editor&&(this.editor.destroy(),this.editor=null)}},jt={class:"modal"},$t={class:"modal-header"},Pt={class:"modal-body"},Lt={class:"modal-footer"};var Wt=B(Ot,[["render",function(t,e,r,o,u,c){const h=n("Editor");return i(),s(d,null,[e[4]||(e[4]=a("link",{rel:"stylesheet",type:"text/css",href:"https://scaleflex.cloudimg.io/v7/plugins/filerobot-widget/v3/latest/filerobot-widget.min.css"},null,-1)),a("div",null,[l(h,{"api-key":"qagffr3pkuv17a8on1afax661irst1hbr4e6tbv888sz91jc",init:{plugins:"media table lists image link pagebreak code insertdatetime autoresize preview fullscreen directionality",toolbar:"h1 h2 h3 bold italic underline alignleft aligncenter alignright alignjustify bullist numlist outdent indent link removeformat blockquote fullscreen code sfxDAM",setup:t=>{t.on("init",(()=>{const e=null!=r.value?r.value:"";t.setContent(e)})),t.ui.registry.addToggleButton("sfxDAM",{text:"DAM",onAction:e=>{o.openModal(t.id)}}),t.on("input",(()=>{const e=t.getContent();o.emit("input",e)})),t.on("ObjectResized",(function(e){if("IMG"===e.target.nodeName){let n=t.selection.getNode();const i=n.getAttribute("src"),r=o.updateUrlParams(i,{w:e.width,h:e.height});n.setAttribute("src",r),n.setAttribute("data-mce-src",r)}}))}}},null,8,["init"])]),a("div",{style:g({display:t.isOpen?"block":"none"}),class:"modal-overlay",id:"sfx-editor-modal"},[a("div",jt,[a("div",$t,[e[2]||(e[2]=a("h3",null,"Scaleflex DAM",-1)),a("button",{onClick:e[0]||(e[0]=(...t)=>o.closeModal&&o.closeModal(...t)),class:"modal-close-btn"},"Ã—")]),a("div",Pt,[A(t.$slots,"default",{},(()=>[e[3]||(e[3]=a("div",{id:"sfx-dam-widget-editor"},null,-1))]))]),a("div",Lt,[a("button",{onClick:e[1]||(e[1]=(...t)=>o.closeModal&&o.closeModal(...t)),class:"btn"},"Close")])])],4)],64)}],["__file","interface.vue"]]),Bt={id:"dam-tinymce",name:"WYSIWYG with Scaleflex DAM",icon:"format_quote",description:"Use the WYSIWYG with Scaleflex DAM",component:Wt,options:{standard:[{field:"toolbar",name:"$t:interfaces.input-rich-text-html.toolbar",type:"json",schema:{default_value:["bold","italic","underline","h1","h2","h3","numlist","bullist","removeformat","blockquote","customLink","customImage","customMedia","hr","code","fullscreen"]},meta:{width:"half",interface:"select-multiple-dropdown",options:{choices:[{value:"undo",text:"$t:wysiwyg_options.undo"},{value:"redo",text:"$t:wysiwyg_options.redo"},{value:"bold",text:"$t:wysiwyg_options.bold"},{value:"italic",text:"$t:wysiwyg_options.italic"},{value:"underline",text:"$t:wysiwyg_options.underline"},{value:"strikethrough",text:"$t:wysiwyg_options.strikethrough"},{value:"subscript",text:"$t:wysiwyg_options.subscript"},{value:"superscript",text:"$t:wysiwyg_options.superscript"},{value:"fontfamily",text:"$t:wysiwyg_options.fontselect"},{value:"fontsize",text:"$t:wysiwyg_options.fontsizeselect"},{value:"h1",text:"$t:wysiwyg_options.h1"},{value:"h2",text:"$t:wysiwyg_options.h2"},{value:"h3",text:"$t:wysiwyg_options.h3"},{value:"h4",text:"$t:wysiwyg_options.h4"},{value:"h5",text:"$t:wysiwyg_options.h5"},{value:"h6",text:"$t:wysiwyg_options.h6"},{value:"alignleft",text:"$t:wysiwyg_options.alignleft"},{value:"aligncenter",text:"$t:wysiwyg_options.aligncenter"},{value:"alignright",text:"$t:wysiwyg_options.alignright"},{value:"alignjustify",text:"$t:wysiwyg_options.alignjustify"},{value:"alignnone",text:"$t:wysiwyg_options.alignnone"},{value:"indent",text:"$t:wysiwyg_options.indent"},{value:"outdent",text:"$t:wysiwyg_options.outdent"},{value:"numlist",text:"$t:wysiwyg_options.numlist"},{value:"bullist",text:"$t:wysiwyg_options.bullist"},{value:"forecolor",text:"$t:wysiwyg_options.forecolor"},{value:"backcolor",text:"$t:wysiwyg_options.backcolor"},{value:"removeformat",text:"$t:wysiwyg_options.removeformat"},{value:"cut",text:"$t:wysiwyg_options.cut"},{value:"copy",text:"$t:wysiwyg_options.copy"},{value:"paste",text:"$t:wysiwyg_options.paste"},{value:"remove",text:"$t:wysiwyg_options.remove"},{value:"selectall",text:"$t:wysiwyg_options.selectall"},{value:"blockquote",text:"$t:wysiwyg_options.blockquote"},{value:"customLink",text:"$t:wysiwyg_options.link"},{value:"unlink",text:"$t:wysiwyg_options.unlink"},{value:"customImage",text:"$t:wysiwyg_options.image"},{value:"customMedia",text:"$t:wysiwyg_options.media"},{value:"table",text:"$t:wysiwyg_options.table"},{value:"hr",text:"$t:wysiwyg_options.hr"},{value:"code",text:"$t:wysiwyg_options.source_code"},{value:"fullscreen",text:"$t:wysiwyg_options.fullscreen"},{value:"visualaid",text:"$t:wysiwyg_options.visualaid"},{value:"ltr rtl",text:"$t:wysiwyg_options.directionality"}]}}},{field:"font",name:"$t:font",type:"string",meta:{width:"half",interface:"select-dropdown",options:{choices:[{text:"$t:sans_serif",value:"sans-serif"},{text:"$t:monospace",value:"monospace"},{text:"$t:serif",value:"serif"}]}},schema:{default_value:"sans-serif"}},{field:"folder",name:"$t:folder",type:"uuid",meta:{width:"half",interface:"system-folder",note:"$t:interfaces.input-rich-text-html.folder_note"}},{field:"imageToken",name:"$t:interfaces.input-rich-text-html.imageToken",type:"string",meta:{note:"$t:interfaces.input-rich-text-html.imageToken_label",width:"half",interface:"input"}}],advanced:[{field:"softLength",name:"$t:soft_length",type:"integer",meta:{width:"half",interface:"input",options:{placeholder:"255",min:1}}},{field:"customFormats",name:"$t:interfaces.input-rich-text-html.custom_formats",type:"json",meta:{interface:"code",note:"$t:interfaces.input-rich-text-html.custom_formats_note",options:{language:"json",template:JSON.stringify([{title:"My Custom Format",inline:"span",classes:"custom-wrapper",styles:{color:"#00ff00","font-size":"20px"},attributes:{title:"My Custom Wrapper"}}],null,4)}}},{field:"tinymceOverrides",name:"$t:interfaces.input-rich-text-html.options_override",type:"json",meta:{interface:"code",note:"$t:interfaces.input-rich-text-html.options_override_note",options:{language:"json",template:JSON.stringify({font_size_formats:"8pt 10pt 12pt 14pt 16pt 18pt 24pt 36pt 48pt",font_family_formats:"Arial=arial,helvetica,sans-serif; Courier New=courier new,courier,monospace;"},null,4)}}}]},types:["text"]};
/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  */
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){Ft(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function Ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ht(){return Ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ht.apply(this,arguments)}function Yt(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xt(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var qt=Xt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zt=Xt(/Edge/i),Gt=Xt(/firefox/i),Kt=Xt(/safari/i)&&!Xt(/chrome/i)&&!Xt(/android/i),Qt=Xt(/iP(ad|od|hone)/i),Jt=Xt(/chrome/i)&&Xt(/android/i),te={capture:!1,passive:!1};function ee(t,e,n){t.addEventListener(e,n,!qt&&te)}function ne(t,e,n){t.removeEventListener(e,n,!qt&&te)}function ie(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function re(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function oe(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&ie(t,e):ie(t,e))||i&&t===n)return t;if(t===n)break}while(t=re(t))}return null}var ae,se=/\s+/g;function le(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(se," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(se," ")}}function ue(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function ce(t,e){var n="";if("string"==typeof t)n=t;else do{var i=ue(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function he(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function de(){var t=document.scrollingElement;return t||document.documentElement}function fe(t,e,n,i,r){if(t.getBoundingClientRect||t===window){var o,a,s,l,u,c,h;if(t!==window&&t.parentNode&&t!==de()?(a=(o=t.getBoundingClientRect()).top,s=o.left,l=o.bottom,u=o.right,c=o.height,h=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!qt))do{if(r&&r.getBoundingClientRect&&("none"!==ue(r,"transform")||n&&"static"!==ue(r,"position"))){var d=r.getBoundingClientRect();a-=d.top+parseInt(ue(r,"border-top-width")),s-=d.left+parseInt(ue(r,"border-left-width")),l=a+o.height,u=s+o.width;break}}while(r=r.parentNode);if(i&&t!==window){var f=ce(r||t),p=f&&f.a,g=f&&f.d;f&&(l=(a/=g)+(c/=g),u=(s/=p)+(h/=p))}return{top:a,left:s,bottom:l,right:u,width:h,height:c}}}function pe(t,e,n){for(var i=ye(t,!0),r=fe(t)[e];i;){var o=fe(i)[n];if(!("top"===n||"left"===n?r>=o:r<=o))return i;if(i===de())break;i=ye(i,!1)}return!1}function ge(t,e,n,i){for(var r=0,o=0,a=t.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==Sn.ghost&&(i||a[o]!==Sn.dragged)&&oe(a[o],n.draggable,t,!1)){if(r===e)return a[o];r++}o++}return null}function me(t,e){for(var n=t.lastElementChild;n&&(n===Sn.ghost||"none"===ue(n,"display")||e&&!ie(n,e));)n=n.previousElementSibling;return n||null}function ve(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Sn.clone||e&&!ie(t,e)||n++;return n}function be(t){var e=0,n=0,i=de();if(t)do{var r=ce(t),o=r.a,a=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function ye(t,e){if(!t||!t.getBoundingClientRect)return de();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=ue(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return de();if(i||e)return n;i=!0}}}while(n=n.parentNode);return de()}function we(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function xe(t,e){return function(){if(!ae){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),ae=setTimeout((function(){ae=void 0}),e)}}}function _e(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Se(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var Ae="Sortable"+(new Date).getTime();function Ce(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==ue(t,"display")&&t!==Sn.ghost){e.push({target:t,rect:fe(t)});var n=Nt({},e[e.length-1].rect);if(t.thisAnimationDuration){var i=ce(t,!0);i&&(n.top-=i.f,n.left-=i.e)}t.fromRect=n}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(e,{target:t}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof n&&n());var r=!1,o=0;e.forEach((function(t){var e=0,n=t.target,a=n.fromRect,s=fe(n),l=n.prevFromRect,u=n.prevToRect,c=t.rect,h=ce(n,!0);h&&(s.top-=h.f,s.left-=h.e),n.toRect=s,n.thisAnimationDuration&&we(l,s)&&!we(a,s)&&(c.top-s.top)/(c.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(e=function(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}(c,l,u,i.options)),we(s,a)||(n.prevFromRect=a,n.prevToRect=s,e||(e=i.options.animation),i.animate(n,c,s,e)),e&&(r=!0,o=Math.max(o,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),e),n.thisAnimationDuration=e)})),clearTimeout(t),r?t=setTimeout((function(){"function"==typeof n&&n()}),o):"function"==typeof n&&n(),e=[]},animate:function(t,e,n,i){if(i){ue(t,"transition",""),ue(t,"transform","");var r=ce(this.el),o=r&&r.a,a=r&&r.d,s=(e.left-n.left)/(o||1),l=(e.top-n.top)/(a||1);t.animatingX=!!s,t.animatingY=!!l,ue(t,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),ue(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),ue(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){ue(t,"transition",""),ue(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}}var ze=[],Ee={initializeByDefault:!0},ke={mount:function(t){for(var e in Ee)Ee.hasOwnProperty(e)&&!(e in t)&&(t[e]=Ee[e]);ze.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),ze.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=t+"Global";ze.forEach((function(i){e[i.pluginName]&&(e[i.pluginName][r]&&e[i.pluginName][r](Nt({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](Nt({sortable:e},n)))}))},initializePlugins:function(t,e,n,i){for(var r in ze.forEach((function(i){var r=i.pluginName;if(t.options[r]||i.initializeByDefault){var o=new i(t,e,t.options);o.sortable=t,o.options=t.options,t[r]=o,Ht(n,o.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var o=this.modifyOption(t,r,t.options[r]);void 0!==o&&(t.options[r]=o)}},getEventProperties:function(t,e){var n={};return ze.forEach((function(i){"function"==typeof i.eventProperties&&Ht(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,n){var i;return ze.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(i=r.optionListeners[e].call(t[r.pluginName],n))})),i}};var Re=["evt"],De=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=Yt(n,Re);ke.pluginEvent.bind(Sn)(t,e,Nt({dragEl:Te,parentEl:Ie,ghostEl:Oe,rootEl:je,nextEl:$e,lastDownEl:Pe,cloneEl:Le,cloneHidden:We,dragStarted:Qe,putSortable:He,activeSortable:Sn.active,originalEvent:i,oldIndex:Be,oldDraggableIndex:Ne,newIndex:Ve,newDraggableIndex:Ue,hideGhostForTarget:yn,unhideGhostForTarget:wn,cloneNowHidden:function(){We=!0},cloneNowShown:function(){We=!1},dispatchSortableEvent:function(t){Me({sortable:e,name:t,originalEvent:i})}},r))};function Me(t){!function(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[Ae]){var g,m=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||qt||Zt?(g=document.createEvent("Event")).initEvent(i,!0,!0):g=new CustomEvent(i,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=s||n,g.item=r||n,g.clone=o,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=c,g.newDraggableIndex=h,g.originalEvent=d,g.pullMode=f?f.lastPutMode:void 0;var b=Nt(Nt({},p),ke.getEventProperties(i,e));for(var y in b)g[y]=b[y];n&&n.dispatchEvent(g),m[v]&&m[v].call(e,g)}}(Nt({putSortable:He,cloneEl:Le,targetEl:Te,rootEl:je,oldIndex:Be,oldDraggableIndex:Ne,newIndex:Ve,newDraggableIndex:Ue},t))}var Te,Ie,Oe,je,$e,Pe,Le,We,Be,Ve,Ne,Ue,Fe,He,Ye,Xe,qe,Ze,Ge,Ke,Qe,Je,tn,en,nn,rn=!1,on=!1,an=[],sn=!1,ln=!1,un=[],cn=!1,hn=[],dn="undefined"!=typeof document,fn=Qt,pn=Zt||qt?"cssFloat":"float",gn=dn&&!Jt&&!Qt&&"draggable"in document.createElement("div"),mn=function(){if(dn){if(qt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),vn=function(t,e){var n=ue(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=ge(t,0,e),o=ge(t,1,e),a=r&&ue(r),s=o&&ue(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+fe(r).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+fe(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=i&&"none"===n[pn]||o&&"none"===n[pn]&&l+u>i)?"vertical":"horizontal"},bn=function(t){function e(t,n){return function(i,r,o,a){var s=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==t&&(n||s))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(i,r,o,a),n)(i,r,o,a);var l=(n?i:r).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},i=t.group;i&&"object"==Ut(i)||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},yn=function(){!mn&&Oe&&ue(Oe,"display","none")},wn=function(){!mn&&Oe&&ue(Oe,"display","")};dn&&document.addEventListener("click",(function(t){if(on)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),on=!1,!1}),!0);var xn=function(t){if(Te){var e=function(t,e){var n;return an.some((function(i){var r=i[Ae].options.emptyInsertThreshold;if(r&&!me(i)){var o=fe(i),a=t>=o.left-r&&t<=o.right+r,s=e>=o.top-r&&e<=o.bottom+r;return a&&s?n=i:void 0}})),n}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Ae]._onDragOver(n)}}},_n=function(t){Te&&Te.parentNode[Ae]._isOutsideThisEl(t.target)};function Sn(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ht({},e),t[Ae]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return vn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sn.supportPointer&&"PointerEvent"in window&&!Kt,emptyInsertThreshold:5};for(var i in ke.initializePlugins(this,t,n),n)!(i in e)&&(e[i]=n[i]);for(var r in bn(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&gn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ee(t,"pointerdown",this._onTapStart):(ee(t,"mousedown",this._onTapStart),ee(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ee(t,"dragover",this),ee(t,"dragenter",this)),an.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ht(this,Ce())}function An(t,e,n,i,r,o,a,s){var l,u,c=t[Ae],h=c.options.onMove;return!window.CustomEvent||qt||Zt?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=o||fe(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),h&&(u=h.call(c,l,a)),u}function Cn(t){t.draggable=!1}function zn(){cn=!1}function En(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function kn(t){return setTimeout(t,0)}function Rn(t){return clearTimeout(t)}Sn.prototype={constructor:Sn,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Je=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Te):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,r=i.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,u=i.filter;if(function(t){hn.length=0;var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var i=e[n];i.checked&&hn.push(i)}}(n),!Te&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Kt||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=oe(s,i.draggable,n,!1))&&s.animated||Pe===s)){if(Be=ve(s),Ne=ve(s,i.draggable),"function"==typeof u){if(u.call(this,t,s,this))return Me({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),De("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(u&&(u=u.split(",").some((function(i){if(i=oe(l,i.trim(),n,!1))return Me({sortable:e,rootEl:i,name:"filter",targetEl:s,fromEl:n,toEl:n}),De("filter",e,{evt:t}),!0}))))return void(r&&t.cancelable&&t.preventDefault());i.handle&&!oe(l,i.handle,n,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,n){var i,r=this,o=r.el,a=r.options,s=o.ownerDocument;if(n&&!Te&&n.parentNode===o){var l=fe(n);if(je=o,Ie=(Te=n).parentNode,$e=Te.nextSibling,Pe=n,Fe=a.group,Sn.dragged=Te,Ye={target:Te,clientX:(e||t).clientX,clientY:(e||t).clientY},Ge=Ye.clientX-l.left,Ke=Ye.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Te.style["will-change"]="all",i=function(){De("delayEnded",r,{evt:t}),Sn.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!Gt&&r.nativeDraggable&&(Te.draggable=!0),r._triggerDragStart(t,e),Me({sortable:r,name:"choose",originalEvent:t}),le(Te,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){he(Te,t.trim(),Cn)})),ee(s,"dragover",xn),ee(s,"mousemove",xn),ee(s,"touchmove",xn),ee(s,"mouseup",r._onDrop),ee(s,"touchend",r._onDrop),ee(s,"touchcancel",r._onDrop),Gt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Te.draggable=!0),De("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(Zt||qt))i();else{if(Sn.eventCanceled)return void this._onDrop();ee(s,"mouseup",r._disableDelayedDrag),ee(s,"touchend",r._disableDelayedDrag),ee(s,"touchcancel",r._disableDelayedDrag),ee(s,"mousemove",r._delayedDragTouchMoveHandler),ee(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&ee(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Te&&Cn(Te),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ne(t,"mouseup",this._disableDelayedDrag),ne(t,"touchend",this._disableDelayedDrag),ne(t,"touchcancel",this._disableDelayedDrag),ne(t,"mousemove",this._delayedDragTouchMoveHandler),ne(t,"touchmove",this._delayedDragTouchMoveHandler),ne(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?ee(document,"pointermove",this._onTouchMove):ee(document,e?"touchmove":"mousemove",this._onTouchMove):(ee(Te,"dragend",this),ee(je,"dragstart",this._onDragStart));try{document.selection?kn((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(rn=!1,je&&Te){De("dragStarted",this,{evt:e}),this.nativeDraggable&&ee(document,"dragover",_n);var n=this.options;!t&&le(Te,n.dragClass,!1),le(Te,n.ghostClass,!0),Sn.active=this,t&&this._appendGhost(),Me({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Xe){this._lastX=Xe.clientX,this._lastY=Xe.clientY,yn();for(var t=document.elementFromPoint(Xe.clientX,Xe.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Xe.clientX,Xe.clientY))!==e;)e=t;if(Te.parentNode[Ae]._isOutsideThisEl(t),e)do{if(e[Ae]){if(e[Ae]._onDragOver({clientX:Xe.clientX,clientY:Xe.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);wn()}},_onTouchMove:function(t){if(Ye){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=Oe&&ce(Oe,!0),a=Oe&&o&&o.a,s=Oe&&o&&o.d,l=fn&&nn&&be(nn),u=(r.clientX-Ye.clientX+i.x)/(a||1)+(l?l[0]-un[0]:0)/(a||1),c=(r.clientY-Ye.clientY+i.y)/(s||1)+(l?l[1]-un[1]:0)/(s||1);if(!Sn.active&&!rn){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Oe){o?(o.e+=u-(qe||0),o.f+=c-(Ze||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ue(Oe,"webkitTransform",h),ue(Oe,"mozTransform",h),ue(Oe,"msTransform",h),ue(Oe,"transform",h),qe=u,Ze=c,Xe=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Oe){var t=this.options.fallbackOnBody?document.body:je,e=fe(Te,!0,fn,!0,t),n=this.options;if(fn){for(nn=t;"static"===ue(nn,"position")&&"none"===ue(nn,"transform")&&nn!==document;)nn=nn.parentNode;nn!==document.body&&nn!==document.documentElement?(nn===document&&(nn=de()),e.top+=nn.scrollTop,e.left+=nn.scrollLeft):nn=de(),un=be(nn)}le(Oe=Te.cloneNode(!0),n.ghostClass,!1),le(Oe,n.fallbackClass,!0),le(Oe,n.dragClass,!0),ue(Oe,"transition",""),ue(Oe,"transform",""),ue(Oe,"box-sizing","border-box"),ue(Oe,"margin",0),ue(Oe,"top",e.top),ue(Oe,"left",e.left),ue(Oe,"width",e.width),ue(Oe,"height",e.height),ue(Oe,"opacity","0.8"),ue(Oe,"position",fn?"absolute":"fixed"),ue(Oe,"zIndex","100000"),ue(Oe,"pointerEvents","none"),Sn.ghost=Oe,t.appendChild(Oe),ue(Oe,"transform-origin",Ge/parseInt(Oe.style.width)*100+"% "+Ke/parseInt(Oe.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,r=n.options;De("dragStart",this,{evt:t}),Sn.eventCanceled?this._onDrop():(De("setupClone",this),Sn.eventCanceled||((Le=Se(Te)).draggable=!1,Le.style["will-change"]="",this._hideClone(),le(Le,this.options.chosenClass,!1),Sn.clone=Le),n.cloneId=kn((function(){De("clone",n),Sn.eventCanceled||(n.options.removeCloneOnHide||je.insertBefore(Le,Te),n._hideClone(),Me({sortable:n,name:"clone"}))})),!e&&le(Te,r.dragClass,!0),e?(on=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ne(document,"mouseup",n._onDrop),ne(document,"touchend",n._onDrop),ne(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,Te)),ee(document,"drop",n),ue(Te,"transform","translateZ(0)")),rn=!0,n._dragStartId=kn(n._dragStarted.bind(n,e,t)),ee(document,"selectstart",n),Qe=!0,Kt&&ue(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,i,r,o=this.el,a=t.target,s=this.options,l=s.group,u=Sn.active,c=Fe===l,h=s.sort,d=He||u,f=this,p=!1;if(!cn){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=oe(a,s.draggable,o,!0),R("dragOver"),Sn.eventCanceled)return p;if(Te.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||f._ignoreWhileAnimating===a)return M(!1);if(on=!1,u&&!s.disabled&&(c?h||(i=Ie!==je):He===this||(this.lastPutMode=Fe.checkPull(this,u,Te,t))&&l.checkPut(this,u,Te,t))){if(r="vertical"===this._getDirection(t,a),e=fe(Te),R("dragOverValid"),Sn.eventCanceled)return p;if(i)return Ie=je,D(),this._hideClone(),R("revert"),Sn.eventCanceled||($e?je.insertBefore(Te,$e):je.appendChild(Te)),M(!0);var g=me(o,s.draggable);if(!g||function(t,e,n){var i=fe(me(n.el,n.options.draggable)),r=10;return e?t.clientX>i.right+r||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+r}(t,r,this)&&!g.animated){if(g===Te)return M(!1);if(g&&o===t.target&&(a=g),a&&(n=fe(a)),!1!==An(je,o,Te,e,a,n,t,!!a))return D(),o.appendChild(Te),Ie=o,T(),M(!0)}else if(g&&function(t,e,n){var i=fe(ge(n.el,0,n.options,!0)),r=10;return e?t.clientX<i.left-r||t.clientY<i.top&&t.clientX<i.right:t.clientY<i.top-r||t.clientY<i.bottom&&t.clientX<i.left}(t,r,this)){var m=ge(o,0,s,!0);if(m===Te)return M(!1);if(n=fe(a=m),!1!==An(je,o,Te,e,a,n,t,!1))return D(),o.insertBefore(Te,m),Ie=o,T(),M(!0)}else if(a.parentNode===o){n=fe(a);var v,b,y,w=Te.parentNode!==o,x=!function(t,e,n){var i=n?t.left:t.top,r=n?t.right:t.bottom,o=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return i===a||r===s||i+o/2===a+l/2}(Te.animated&&Te.toRect||e,a.animated&&a.toRect||n,r),_=r?"top":"left",S=pe(a,"top","top")||pe(Te,"top","top"),A=S?S.scrollTop:void 0;if(Je!==a&&(b=n[_],sn=!1,ln=!x&&s.invertSwap||w),v=function(t,e,n,i,r,o,a,s){var l=i?t.clientY:t.clientX,u=i?n.height:n.width,c=i?n.top:n.left,h=i?n.bottom:n.right,d=!1;if(!a)if(s&&en<u*r){if(!sn&&(1===tn?l>c+u*o/2:l<h-u*o/2)&&(sn=!0),sn)d=!0;else if(1===tn?l<c+en:l>h-en)return-tn}else if(l>c+u*(1-r)/2&&l<h-u*(1-r)/2)return function(t){return ve(Te)<ve(t)?1:-1}(e);if((d=d||a)&&(l<c+u*o/2||l>h-u*o/2))return l>c+u/2?1:-1;return 0}(t,a,n,r,x?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,ln,Je===a),0!==v){var C=ve(Te);do{C-=v,y=Ie.children[C]}while(y&&("none"===ue(y,"display")||y===Oe))}if(0===v||y===a)return M(!1);Je=a,tn=v;var z=a.nextElementSibling,E=!1,k=An(je,o,Te,e,a,n,t,E=1===v);if(!1!==k)return 1!==k&&-1!==k||(E=1===k),cn=!0,setTimeout(zn,30),D(),E&&!z?o.appendChild(Te):a.parentNode.insertBefore(Te,E?z:a),S&&_e(S,0,A-S.scrollTop),Ie=Te.parentNode,void 0===b||ln||(en=Math.abs(b-fe(a)[_])),T(),M(!0)}if(o.contains(Te))return M(!1)}return!1}function R(s,l){De(s,f,Nt({evt:t,isOwner:c,axis:r?"vertical":"horizontal",revert:i,dragRect:e,targetRect:n,canSort:h,fromSortable:d,target:a,completed:M,onMove:function(n,i){return An(je,o,Te,e,n,fe(n),t,i)},changed:T},l))}function D(){R("dragOverAnimationCapture"),f.captureAnimationState(),f!==d&&d.captureAnimationState()}function M(e){return R("dragOverCompleted",{insertion:e}),e&&(c?u._hideClone():u._showClone(f),f!==d&&(le(Te,He?He.options.ghostClass:u.options.ghostClass,!1),le(Te,s.ghostClass,!0)),He!==f&&f!==Sn.active?He=f:f===Sn.active&&He&&(He=null),d===f&&(f._ignoreWhileAnimating=a),f.animateAll((function(){R("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(a===Te&&!Te.animated||a===o&&!a.animated)&&(Je=null),s.dragoverBubble||t.rootEl||a===document||(Te.parentNode[Ae]._isOutsideThisEl(t.target),!e&&xn(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function T(){Ve=ve(Te),Ue=ve(Te,s.draggable),Me({sortable:f,name:"change",toEl:o,newIndex:Ve,newDraggableIndex:Ue,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ne(document,"mousemove",this._onTouchMove),ne(document,"touchmove",this._onTouchMove),ne(document,"pointermove",this._onTouchMove),ne(document,"dragover",xn),ne(document,"mousemove",xn),ne(document,"touchmove",xn)},_offUpEvents:function(){var t=this.el.ownerDocument;ne(t,"mouseup",this._onDrop),ne(t,"touchend",this._onDrop),ne(t,"pointerup",this._onDrop),ne(t,"touchcancel",this._onDrop),ne(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;Ve=ve(Te),Ue=ve(Te,n.draggable),De("drop",this,{evt:t}),Ie=Te&&Te.parentNode,Ve=ve(Te),Ue=ve(Te,n.draggable),Sn.eventCanceled||(rn=!1,ln=!1,sn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Rn(this.cloneId),Rn(this._dragStartId),this.nativeDraggable&&(ne(document,"drop",this),ne(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Kt&&ue(document.body,"user-select",""),ue(Te,"transform",""),t&&(Qe&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Oe&&Oe.parentNode&&Oe.parentNode.removeChild(Oe),(je===Ie||He&&"clone"!==He.lastPutMode)&&Le&&Le.parentNode&&Le.parentNode.removeChild(Le),Te&&(this.nativeDraggable&&ne(Te,"dragend",this),Cn(Te),Te.style["will-change"]="",Qe&&!rn&&le(Te,He?He.options.ghostClass:this.options.ghostClass,!1),le(Te,this.options.chosenClass,!1),Me({sortable:this,name:"unchoose",toEl:Ie,newIndex:null,newDraggableIndex:null,originalEvent:t}),je!==Ie?(Ve>=0&&(Me({rootEl:Ie,name:"add",toEl:Ie,fromEl:je,originalEvent:t}),Me({sortable:this,name:"remove",toEl:Ie,originalEvent:t}),Me({rootEl:Ie,name:"sort",toEl:Ie,fromEl:je,originalEvent:t}),Me({sortable:this,name:"sort",toEl:Ie,originalEvent:t})),He&&He.save()):Ve!==Be&&Ve>=0&&(Me({sortable:this,name:"update",toEl:Ie,originalEvent:t}),Me({sortable:this,name:"sort",toEl:Ie,originalEvent:t})),Sn.active&&(null!=Ve&&-1!==Ve||(Ve=Be,Ue=Ne),Me({sortable:this,name:"end",toEl:Ie,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){De("nulling",this),je=Te=Ie=Oe=$e=Le=Pe=We=Ye=Xe=Qe=Ve=Ue=Be=Ne=Je=tn=He=Fe=Sn.dragged=Sn.ghost=Sn.clone=Sn.active=null,hn.forEach((function(t){t.checked=!0})),hn.length=qe=Ze=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Te&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)oe(t=n[i],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||En(t));return e},sort:function(t,e){var n={},i=this.el;this.toArray().forEach((function(t,e){var r=i.children[e];oe(r,this.options.draggable,i,!1)&&(n[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return oe(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=ke.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&bn(n)},destroy:function(){De("destroy",this);var t=this.el;t[Ae]=null,ne(t,"mousedown",this._onTapStart),ne(t,"touchstart",this._onTapStart),ne(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ne(t,"dragover",this),ne(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),an.splice(an.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!We){if(De("hideClone",this),Sn.eventCanceled)return;ue(Le,"display","none"),this.options.removeCloneOnHide&&Le.parentNode&&Le.parentNode.removeChild(Le),We=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(We){if(De("showClone",this),Sn.eventCanceled)return;Te.parentNode!=je||this.options.group.revertClone?$e?je.insertBefore(Le,$e):je.appendChild(Le):je.insertBefore(Le,Te),this.options.group.revertClone&&this.animate(Te,Le),ue(Le,"display",""),We=!1}}else this._hideClone()}},dn&&ee(document,"touchmove",(function(t){(Sn.active||rn)&&t.cancelable&&t.preventDefault()})),Sn.utils={on:ee,off:ne,css:ue,find:he,is:function(t,e){return!!oe(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:xe,closest:oe,toggleClass:le,clone:Se,index:ve,nextTick:kn,cancelNextTick:Rn,detectDirection:vn,getChild:ge},Sn.get=function(t){return t[Ae]},Sn.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Sn.utils=Nt(Nt({},Sn.utils),t.utils)),ke.mount(t)}))},Sn.create=function(t,e){return new Sn(t,e)},Sn.version="1.14.0";var Dn,Mn,Tn,In,On,jn,$n=[],Pn=!1;function Ln(){$n.forEach((function(t){clearInterval(t.pid)})),$n=[]}function Wn(){clearInterval(jn)}var Bn=xe((function(t,e,n,i){if(e.scroll){var r,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,u=de(),c=!1;Mn!==n&&(Mn=n,Ln(),Dn=e.scroll,r=e.scrollFn,!0===Dn&&(Dn=ye(n,!0)));var h=0,d=Dn;do{var f=d,p=fe(f),g=p.top,m=p.bottom,v=p.left,b=p.right,y=p.width,w=p.height,x=void 0,_=void 0,S=f.scrollWidth,A=f.scrollHeight,C=ue(f),z=f.scrollLeft,E=f.scrollTop;f===u?(x=y<S&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),_=w<A&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(x=y<S&&("auto"===C.overflowX||"scroll"===C.overflowX),_=w<A&&("auto"===C.overflowY||"scroll"===C.overflowY));var k=x&&(Math.abs(b-o)<=s&&z+y<S)-(Math.abs(v-o)<=s&&!!z),R=_&&(Math.abs(m-a)<=s&&E+w<A)-(Math.abs(g-a)<=s&&!!E);if(!$n[h])for(var D=0;D<=h;D++)$n[D]||($n[D]={});$n[h].vx==k&&$n[h].vy==R&&$n[h].el===f||($n[h].el=f,$n[h].vx=k,$n[h].vy=R,clearInterval($n[h].pid),0==k&&0==R||(c=!0,$n[h].pid=setInterval(function(){i&&0===this.layer&&Sn.active._onTouchMove(On);var e=$n[this.layer].vy?$n[this.layer].vy*l:0,n=$n[this.layer].vx?$n[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(Sn.dragged.parentNode[Ae],n,e,t,On,$n[this.layer].el)||_e($n[this.layer].el,n,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==u&&(d=ye(d,!1)));Pn=c}}),30),Vn=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||r;a();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Nn(){}function Un(){}Nn.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=ge(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Vn},Ht(Nn,{pluginName:"revertOnSpill"}),Un.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Vn},Ht(Un,{pluginName:"removeOnSpill"}),Sn.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?ee(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ee(document,"pointermove",this._handleFallbackAutoScroll):e.touches?ee(document,"touchmove",this._handleFallbackAutoScroll):ee(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?ne(document,"dragover",this._handleAutoScroll):(ne(document,"pointermove",this._handleFallbackAutoScroll),ne(document,"touchmove",this._handleFallbackAutoScroll),ne(document,"mousemove",this._handleFallbackAutoScroll)),Wn(),Ln(),clearTimeout(ae),ae=void 0},nulling:function(){On=Mn=Dn=Pn=jn=Tn=In=null,$n.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(i,r);if(On=t,e||this.options.forceAutoScrollFallback||Zt||qt||Kt){Bn(t,this.options,o,e);var a=ye(o,!0);!Pn||jn&&i===Tn&&r===In||(jn&&Wn(),jn=setInterval((function(){var o=ye(document.elementFromPoint(i,r),!0);o!==a&&(a=o,Ln()),Bn(t,n.options,o,e)}),10),Tn=i,In=r)}else{if(!this.options.bubbleScroll||ye(o,!0)===de())return void Ln();Bn(t,this.options,ye(o,!1),!1)}}},Ht(t,{pluginName:"scroll",initializeByDefault:!0})}),Sn.mount(Un,Nn);const Fn="undefined"!=typeof window?window.console:global.console;const Hn=/-(\w)/g,Yn=function(t){const e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}((t=>t.replace(Hn,((t,e)=>e?e.toUpperCase():""))));function Xn(t){null!==t.parentElement&&t.parentElement.removeChild(t)}function qn(t,e,n){const i=0===n?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,i)}function Zn(t,e){this.$nextTick((()=>this.$emit(t.toLowerCase(),e)))}function Gn(t){return e=>{null!==this.realList&&this["onDrag"+t](e),Zn.call(this,t,e)}}const Kn=["Start","Add","Remove","Update","End"],Qn=["Choose","Unchoose","Sort","Filter","Clone"],Jn=["Move",...Kn,...Qn].map((t=>"on"+t));let ti=null;const ei={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},ni=v({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Kn.map((t=>t.toLowerCase())),...Qn.map((t=>t.toLowerCase()))],props:ei,data:()=>({transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}),render(){const t=this.$slots.default?this.$slots.default():null,e=(n=this.$attrs,(i=this.componentData)?{...i.props,...i.attrs}:n);var n,i;return t?(this.transitionMode=function(t){if(!t||1!==t.length)return!1;const[{type:e}]=t;return!!e&&(n=e.name,["transition-group","TransitionGroup"].includes(n));var n}(t),S(this.getTag(),e,t)):S(this.getTag(),e,[])},created(){null!==this.list&&null!==this.modelValue&&Fn.error("list props are mutually exclusive! Please set one.")},mounted(){const t={};Kn.forEach((e=>{t["on"+e]=Gn.call(this,e)})),Qn.forEach((e=>{t["on"+e]=Zn.bind(this,e)}));const e=Object.keys(this.$attrs).reduce(((t,e)=>(t[Yn(e)]=this.$attrs[e],t)),{}),n=Object.assign({},e,t,{onMove:(t,e)=>this.onDragMove(t,e)});!("draggable"in n)&&(n.draggable=">*");const i=1===this.$el.nodeType?this.$el:this.$el.parentElement;this._sortable=new Sn(i,n),i.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{void 0!==this._sortable&&this._sortable.destroy()}catch(t){}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(t){this.updateOptions(t)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?n(this.component):this.tag},updateOptions(t){for(var e in t){const n=Yn(e);-1===Jn.indexOf(n)&&this._sortable.option(n,t[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick((()=>{this.visibleIndexes=function(t,e,n,i){if(!t)return[];const r=Object.values(t),o=e.length-i;return[...e].map(((t,e)=>e>=o?r.length:r.indexOf(t)))}(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)}))},getUnderlyingVm(t){const e=function(t,e){return Object.values(t).indexOf(e)}(this.getChildrenNodes()||[],t);if(-1===e)return null;return{index:e,element:this.realList[e]}},emitChanges(t){this.$nextTick((()=>{this.$emit("change",t)}))},alterList(t){if(this.list)return void t(this.list);const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){this.alterList((t=>t.splice(...arguments)))},updatePosition(t,e){this.alterList((n=>n.splice(e,0,n.splice(t,1)[0])))},getVmIndex(t){const e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(t){if(!this.noTransitionOnDrag||!this.transitionMode)return;this.getChildrenNodes()[t].data=null;const e=this.getComponent();e.children=[],e.kept=void 0},onDragStart(t){this.computeIndexes(),this.context=this.getUnderlyingVm(t.item),this.context&&(t.item._underlying_vm_=this.clone(this.context.element),ti=t.item)},onDragAdd(t){const e=t.item._underlying_vm_;if(void 0===e)return;Xn(t.item);const n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();const i={element:e,newIndex:n};this.emitChanges({added:i})},onDragRemove(t){if(qn(this.$el,t.item,t.oldIndex),"clone"===t.pullMode)return void Xn(t.clone);if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})},onDragUpdate(t){Xn(t.item),qn(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);const i={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:i})},updateProperty(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},onDragMove(t,e){const n=this.move;if(!n||!this.realList)return!0;const i=this.getRelatedContextFromMoveEvent(t),r=this.context,o=this.computeFutureIndex(i,t);Object.assign(r,{futureIndex:o});return n(Object.assign({},t,{relatedContext:i,draggedContext:r}),e)},onDragEnd(){this.computeIndexes(),ti=null},getTrargetedComponent:t=>t.__draggable_component__,getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getTrargetedComponent(t);if(!n)return{component:n};const i=n.realList,r={list:i,component:n};if(t!==e&&i&&n.getUnderlyingVm){const t=n.getUnderlyingVm(e);if(t)return Object.assign(t,r)}return r},computeFutureIndex(t,e){const n=[...e.to.children].filter((t=>"none"!==t.style.display));if(0===n.length)return 0;const i=n.indexOf(e.related),r=t.component.getVmIndex(i);return-1!==n.indexOf(ti)||!e.willInsertAfter?r:r+1}}});function ii(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ii(Object(n),!0).forEach((function(e){oi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ai(t){return function(t){if(Array.isArray(t))return si(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return si(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?si(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var li,ui,ci=(li=function(t){
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){var e={}.hasOwnProperty;function n(){for(var t=[],i=0;i<arguments.length;i++){var r=arguments[i];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)){if(r.length){var a=n.apply(null,r);a&&t.push(a)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var s in r)e.call(r,s)&&r[s]&&t.push(s);else t.push(r.toString())}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n}()},li(ui={path:undefined,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&ui.path)}},ui.exports),ui.exports),hi=function(t){return function(e,n){if(!e)return t;var i;"string"==typeof e?i=e:n=e;var r=t;return i&&(r+="__"+i),r+(n?Object.keys(n).reduce((function(t,e){var i=n[e];return i&&(t+=" "+("boolean"==typeof i?r+"--"+e:r+"--"+e+"_"+i)),t}),""):"")}};function di(t,e,n){var i,r,o,a,s;function l(){var u=Date.now()-a;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(o,r),o=r=null))}null==e&&(e=100);var u=function(){o=this,r=arguments,a=Date.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(o,r),o=r=null),s};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(s=t.apply(o,r),o=r=null,clearTimeout(i),i=null)},u}di.debounce=di;var fi=di,pi=function(){return pi=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},pi.apply(this,arguments)
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */};function gi(t,e){var n,i;return t&&e?(n=""+t+e[0].toUpperCase()+e.slice(1),i=t+"-"+e):(n=t||e,i=t||e),{name:n,classname:i}}function mi(t){return/^blob:/.test(t)}function vi(t){return mi(t)||function(t){return/^data:/.test(t)}(t)}function bi(t){return!!(t&&t.constructor&&t.call&&t.apply)}function yi(t){return void 0===t}function wi(t){return"object"==typeof t&&null!==t}function xi(t,e,n){var i={};return wi(t)?(Object.keys(e).forEach((function(r){yi(t[r])?i[r]=e[r]:wi(e[r])?wi(t[r])?i[r]=xi(t[r],e[r],n[r]):i[r]=t[r]?e[r]:n[r]:!0===e[r]||!1===e[r]?i[r]=Boolean(t[r]):i[r]=t[r]})),i):t?e:n}function _i(t){var e=Number(t);return Number.isNaN(e)?t:e}function Si(t){return typeof("number"==t||function(t){return"object"==typeof t&&null!==t}(t)&&"[object Number]"==toString.call(t))&&!Ai(t)}function Ai(t){return t!=t}function Ci(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}var zi=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.type="manipulateImage",this.move=t,this.scale=e},Ei=function(t,e){void 0===e&&(e={}),this.type="resize",this.directions=t,this.params=e},ki=function(t){this.type="move",this.directions=t},Ri=function(){function t(t,e,n,i,r){this.type="drag",this.nativeEvent=t,this.position=n,this.previousPosition=i,this.element=e,this.anchor=r}return t.prototype.shift=function(){var t=this,e=t.element,n=t.anchor,i=t.position;if(e){var r=e.getBoundingClientRect(),o=r.left,a=r.top;return{left:i.left-o-n.left,top:i.top-a-n.top}}return{left:0,top:0}},t}(),Di={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(t){t.cancelable&&!this.disabled&&1===t.touches.length&&(this.touches=ai(t.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),t.touches.length&&this.initAnchor(this.touches.reduce((function(e,n){return{clientX:e.clientX+n.clientX/t.touches.length,clientY:e.clientY+n.clientY/t.touches.length}}),{clientX:0,clientY:0})),t.preventDefault&&t.preventDefault(),t.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(t){this.touches.length&&(this.processMove(t,t.touches),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())},onMouseDown:function(t){if(!this.disabled){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(t){var e=this.$refs.draggable.getBoundingClientRect(),n=e.left,i=e.right,r=e.bottom,o=e.top;this.anchor={left:t.clientX-n,top:t.clientY-o,bottom:r-t.clientY,right:i-t.clientX}},processMove:function(t,e){var n=ai(e);if(this.touches.length){if(1===this.touches.length&&1===n.length){var i=this.$refs.draggable;this.$emit("drag",new Ri(t,i,{left:n[0].clientX,top:n[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=n}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"],render:function(t,e,n,o,a,s){return i(),r("div",{ref:"draggable",class:n.classname,onTouchstart:e[1]||(e[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:e[2]||(e[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onMouseover:e[3]||(e[3]=function(){return s.onMouseOver&&s.onMouseOver.apply(s,arguments)}),onMouseleave:e[4]||(e[4]=function(){return s.onMouseLeave&&s.onMouseLeave.apply(s,arguments)})},[A(t.$slots,"default")],34)}},Mi=hi("vue-handler-wrapper"),Ti={name:"HandlerWrapper",components:{DraggableElement:Di},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var t;if(this.horizontalPosition||this.verticalPosition){var e,n=gi(this.horizontalPosition,this.verticalPosition);t=Mi((oi(e={},n.classname,!0),oi(e,"disabled",this.disabled),e))}else t=Mi({disabled:this.disabled});return{root:t,draggable:Mi("draggable")}}},emits:["leave","enter","drag","drag-end"],render:function(t,e,a,s,u,c){var h=n("DraggableElement");return i(),r("div",{class:c.classes.root},[l(h,{class:c.classes.draggable,onDrag:e[1]||(e[1]=function(e){return t.$emit("drag",e)}),onDragEnd:e[2]||(e[2]=function(e){return t.$emit("drag-end")}),onLeave:e[3]||(e[3]=function(e){return t.$emit("leave")}),onEnter:e[4]||(e[4]=function(e){return t.$emit("enter")})},{default:o((function(){return[A(t.$slots,"default")]})),_:3},8,["class"])],2)}},Ii=hi("vue-line-wrapper"),Oi={name:"LineWrapper",components:{DraggableElement:Di},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var t;return Ii((oi(t={},this.position,!0),oi(t,"disabled",this.disabled),t))}},emits:["leave","enter","drag","drag-end"],render:function(t,e,a,s,l,u){var c=n("DraggableElement");return i(),r(c,{class:u.classname,onDrag:e[1]||(e[1]=function(e){return t.$emit("drag",e)}),onDragEnd:e[2]||(e[2]=function(e){return t.$emit("drag-end")}),onLeave:e[3]||(e[3]=function(e){return t.$emit("leave")}),onEnter:e[4]||(e[4]=function(e){return t.$emit("enter")})},{default:o((function(){return[A(t.$slots,"default")]})),_:3},8,["class"])}},ji=["left","right","top","bottom"],$i=["left","right"],Pi=["top","bottom"],Li=["left","top"],Wi=["fill-area","fit-area","stencil","none"],Bi={left:0,top:0,width:0,height:0};function Vi(t,e,n){return!(n=n||["width","height","left","top"]).some((function(n){return t[n]!==e[n]}))}function Ni(t){return{left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height}}function Ui(t,e){return{left:t.left-e.left,top:t.top-e.top}}function Fi(t){return{left:t.left+t.width/2,top:t.top+t.height/2}}function Hi(t,e){var n={left:0,top:0,right:0,bottom:0};return ji.forEach((function(i){var r=e[i],o=Ni(t)[i];n[i]=void 0!==r&&void 0!==o?"left"===i||"top"===i?Math.max(0,r-o):Math.max(0,o-r):0})),n}function Yi(t,e){return{left:t.left-e.left,top:t.top-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function Xi(t){return{left:-t.left,top:-t.top}}function qi(t,e){return pi(pi({},t),{left:t.left+e.left,top:t.top+e.top})}function Zi(t,e,n,i){if(1!==e){if(n){var r=Fi(t);return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2+(n.left-r.left)*(i||1-e),top:t.top+t.height*(1-e)/2+(n.top-r.top)*(i||1-e)}}return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2,top:t.top+t.height*(1-e)/2}}return t}function Gi(t){return t.width/t.height}function Ki(t,e){return Math.min(void 0!==e.right&&void 0!==e.left?(e.right-e.left)/t.width:1/0,void 0!==e.bottom&&void 0!==e.top?(e.bottom-e.top)/t.height:1/0)}function Qi(t,e){var n={left:0,top:0},i=Hi(t,e);return i.left&&i.left>0?n.left=i.left:i.right&&i.right>0&&(n.left=-i.right),i.top&&i.top>0?n.top=i.top:i.bottom&&i.bottom>0&&(n.top=-i.bottom),n}function Ji(t,e){var n;return e.minimum&&t<e.minimum?n=e.minimum:e.maximum&&t>e.maximum&&(n=e.maximum),n}function tr(t,e){var n=Gi(t),i=Gi(e);return e.width<1/0&&e.height<1/0?n>i?{width:e.width,height:e.width/n}:{width:e.height*n,height:e.height}:e.width<1/0?{width:e.width,height:e.width/n}:e.height<1/0?{width:e.height*n,height:e.height}:t}function er(t,e){var n=e*Math.PI/180;return{width:Math.abs(t.width*Math.cos(n))+Math.abs(t.height*Math.sin(n)),height:Math.abs(t.width*Math.sin(n))+Math.abs(t.height*Math.cos(n))}}function nr(t,e){var n=e*Math.PI/180;return{left:t.left*Math.cos(n)-t.top*Math.sin(n),top:t.left*Math.sin(n)+t.top*Math.cos(n)}}function ir(t,e){var n=Hi(rr(t,e),e);return n.left+n.right+n.top+n.bottom?n.left+n.right>n.top+n.bottom?Math.min((t.width+n.left+n.right)/t.width,Ki(t,e)):Math.min((t.height+n.top+n.bottom)/t.height,Ki(t,e)):1}function rr(t,e,n){void 0===n&&(n=!1);var i=Qi(t,e);return qi(t,n?Xi(i):i)}function or(t){return{width:void 0!==t.right&&void 0!==t.left?t.right-t.left:1/0,height:void 0!==t.bottom&&void 0!==t.top?t.bottom-t.top:1/0}}function ar(t,e,n){void 0===n&&(n=!0);var i={};return ji.forEach((function(r){var o=t[r],a=e[r];void 0!==o&&void 0!==a?i[r]="left"===r||"top"===r?n?Math.max(o,a):Math.min(o,a):n?Math.min(o,a):Math.max(o,a):void 0!==a?i[r]=a:void 0!==o&&(i[r]=o)})),i}function sr(t,e){return ar(t,e,!0)}function lr(t){var e=t.size,n=t.aspectRatio,i=t.ignoreMinimum,r=t.sizeRestrictions;return Boolean((e.correctRatio||Gi(e)>=n.minimum&&Gi(e)<=n.maximum)&&e.height<=r.maxHeight&&e.width<=r.maxWidth&&e.width&&e.height&&(i||e.height>=r.minHeight&&e.width>=r.minWidth))}function ur(t,e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)}function cr(t){var e=t.width,n=t.height,i=t.sizeRestrictions,r={minimum:t.aspectRatio&&t.aspectRatio.minimum||0,maximum:t.aspectRatio&&t.aspectRatio.maximum||1/0},o={width:Math.max(i.minWidth,Math.min(i.maxWidth,e)),height:Math.max(i.minHeight,Math.min(i.maxHeight,n))};function a(t,o){return void 0===o&&(o=!1),t.reduce((function(t,a){return lr({size:a,aspectRatio:r,sizeRestrictions:i,ignoreMinimum:o})&&(!t||ur(a,{width:e,height:n})<ur(t,{width:e,height:n}))?a:t}),null)}var s=[];r&&[r.minimum,r.maximum].forEach((function(t){t&&s.push({width:o.width,height:o.width/t,correctRatio:!0},{width:o.height*t,height:o.height,correctRatio:!0})})),lr({size:o,aspectRatio:r,sizeRestrictions:i})&&s.push(o);var l=a(s)||a(s,!0);return l&&{width:l.width,height:l.height}}function hr(t){var e=t.event,n=t.coordinates,i=t.positionRestrictions,r=void 0===i?{}:i,o=qi(n,e.directions);return qi(o,Qi(o,r))}function dr(t){t.event;var e=t.getAreaRestrictions,n=t.boundaries,i=t.coordinates,r=t.visibleArea;t.aspectRatio;var o=t.stencilSize,a=t.sizeRestrictions,s=t.positionRestrictions;t.stencilReference;var l,u,c,h=pi({},i),d=pi({},r),f=pi({},o);l=Gi(f),u=Gi(h),void 0===c&&(c=.001),(0===l||0===u?Math.abs(u-l)<c:Math.abs(u/l)<1+c&&Math.abs(u/l)>1-c)||(h=pi(pi({},h),cr({sizeRestrictions:a,width:h.width,height:h.height,aspectRatio:{minimum:Gi(f),maximum:Gi(f)}})));var p=ir(d=Zi(d,h.width*n.width/(d.width*f.width)),e({visibleArea:d,type:"resize"}));return 1!==p&&(d=Zi(d,p),h=Zi(h,p)),d=rr(d=qi(d,Ui(Fi(h),Fi(d))),e({visibleArea:d,type:"move"})),{coordinates:h=rr(h,sr(Ni(d),s)),visibleArea:d}}function fr(t){var e=t.event,n=t.getAreaRestrictions,i=t.boundaries,r=t.coordinates,o=t.visibleArea;t.aspectRatio,t.stencilSize,t.sizeRestrictions;var a=t.positionRestrictions;t.stencilReference;var s=pi({},r),l=pi({},o);if(r&&o&&"manipulateImage"!==e.type){var u={width:0,height:0};l.width,i.width,Gi(i)>Gi(s)?(u.height=.8*i.height,u.width=u.height*Gi(s)):(u.width=.8*i.width,u.height=u.width*Gi(s));var c=ir(l=Zi(l,s.width*i.width/(l.width*u.width)),n({visibleArea:l,type:"resize"}));l=Zi(l,c),1!==c&&(u.height/=c,u.width/=c),l=rr(l=qi(l,Ui(Fi(s),Fi(l))),n({visibleArea:l,type:"move"})),s=rr(s,sr(Ni(l),a))}return{coordinates:s,visibleArea:l}}function pr(t){var e=t.event,n=t.coordinates,i=t.visibleArea,r=t.getAreaRestrictions,o=pi({},i),a=pi({},n);if("setCoordinates"===e.type){var s=Math.max(0,a.width-o.width),l=Math.max(0,a.height-o.height);s>l?o=Zi(o,Math.min(a.width/o.width,Ki(o,r({visibleArea:o,type:"resize"})))):l>s&&(o=Zi(o,Math.min(a.height/o.height,Ki(o,r({visibleArea:o,type:"resize"}))))),o=rr(o=qi(o,Xi(Qi(a,Ni(o)))),r({visibleArea:o,type:"move"}))}return{visibleArea:o,coordinates:a}}function gr(t){var e=t.imageSize,n=t.visibleArea,i=t.coordinates,r=n||e;return{left:(n?n.left:0)+r.width/2-i.width/2,top:(n?n.top:0)+r.height/2-i.height/2}}function mr(t){var e=t.imageSize,n=t.visibleArea,i=t.aspectRatio,r=t.sizeRestrictions,o=n||e,a=Math.min(i.maximum||1/0,Math.max(i.minimum||0,Gi(o))),s=o.width<o.height?{width:.8*o.width,height:.8*o.width/a}:{height:.8*o.height,width:.8*o.height*a};return cr(pi(pi({},s),{aspectRatio:i,sizeRestrictions:r}))}function vr(t){var e,n,i=t.imageSize,r=t.visibleArea,o=t.boundaries,a=t.aspectRatio,s=t.sizeRestrictions,l=t.stencilSize,u=r||i;return Gi(u)>Gi(o)?n=(e=l.height*u.height/o.height)*Gi(l):e=(n=l.width*u.width/o.width)/Gi(l),cr({width:n,height:e,aspectRatio:a,sizeRestrictions:s})}function br(t){var e=t.getAreaRestrictions,n=t.coordinates,i=t.imageSize,r=Gi(t.boundaries);if(n){var o={height:Math.max(n.height,i.height),width:Math.max(n.width,i.width)},a=tr({width:Gi(o)>r?o.width:o.height*r,height:Gi(o)>r?o.width/r:o.height},or(e())),s={left:n.left+n.width/2-a.width/2,top:n.top+n.height/2-a.height/2,width:a.width,height:a.height},l=Hi(n,Ni(pi({left:0,top:0},i))),u={};return!l.left&&!l.right&&s.width<=i.width&&(u.left=0,u.right=i.width),!l.top&&!l.bottom&&s.height<=i.height&&(u.top=0,u.bottom=i.height),rr(s,u)}var c=Gi(i);return a={height:c>r?i.height:i.width/r,width:c>r?i.height*r:i.width},{left:i.width/2-a.width/2,top:i.height/2-a.height/2,width:a.width,height:a.height}}function yr(t,e){return ar(t,Ni(e))}function wr(t){var e=t.directions,n=t.coordinates,i=t.positionRestrictions,r=void 0===i?{}:i,o=t.sizeRestrictions,a=t.preserveRatio,s=t.compensate,l=pi({},e),u=Yi(n,l).width,c=Yi(n,l).height;u<0&&(l.left<0&&l.right<0?(l.left=-(n.width-o.minWidth)/(l.left/l.right),l.right=-(n.width-o.minWidth)/(l.right/l.left)):l.left<0?l.left=-(n.width-o.minWidth):l.right<0&&(l.right=-(n.width-o.minWidth))),c<0&&(l.top<0&&l.bottom<0?(l.top=-(n.height-o.minHeight)/(l.top/l.bottom),l.bottom=-(n.height-o.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(n.height-o.minHeight):l.bottom<0&&(l.bottom=-(n.height-o.minHeight)));var h=Hi(Yi(n,l),r);s&&(h.left&&h.left>0&&0===h.right?(l.right+=h.left,l.left-=h.left):h.right&&h.right>0&&0===h.left&&(l.left+=h.right,l.right-=h.right),h.top&&h.top>0&&0===h.bottom?(l.bottom+=h.top,l.top-=h.top):h.bottom&&h.bottom>0&&0===h.top&&(l.top+=h.bottom,l.bottom-=h.bottom),h=Hi(Yi(n,l),r));var d={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(ji.forEach((function(t){var e=h[t];e&&l[t]&&(d[t]=Math.max(0,1-e/l[t]))})),a){var f=Math.min.apply(null,ji.map((function(t){return d[t]})));f!==1/0&&ji.forEach((function(t){l[t]*=f}))}else ji.forEach((function(t){d[t]!==1/0&&(l[t]*=d[t])}));if(u=Yi(n,l).width,c=Yi(n,l).height,l.right+l.left&&(u>o.maxWidth?d.width=(o.maxWidth-n.width)/(l.right+l.left):u<o.minWidth&&(d.width=(o.minWidth-n.width)/(l.right+l.left))),l.bottom+l.top&&(c>o.maxHeight?d.height=(o.maxHeight-n.height)/(l.bottom+l.top):c<o.minHeight&&(d.height=(o.minHeight-n.height)/(l.bottom+l.top))),a){var p=Math.min(d.width,d.height);p!==1/0&&ji.forEach((function(t){l[t]*=p}))}else d.width!==1/0&&$i.forEach((function(t){l[t]*=d.width})),d.height!==1/0&&Pi.forEach((function(t){l[t]*=d.height}));return l}function xr(t,e,n){return 0==e&&0==n?t/2:0==e?0:0==n?t:t*Math.abs(e/(e+n))}var _r=hi("vue-simple-handler"),Sr=hi("vue-simple-handler-wrapper"),Ar={name:"SimpleHandler",components:{HandlerWrapper:Ti},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var t,e=(oi(t={},this.horizontalPosition,Boolean(this.horizontalPosition)),oi(t,this.verticalPosition,Boolean(this.verticalPosition)),oi(t,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),Boolean(this.verticalPosition&&this.horizontalPosition)),oi(t,"hover",this.hover),t);return{default:ci(_r(e),this.defaultClass,this.hover&&this.hoverClass),wrapper:ci(Sr(e),this.wrapperClass)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"],render:function(t,e,a,s,u,c){var h=n("HandlerWrapper");return i(),r(h,{class:c.classes.wrapper,"vertical-position":a.verticalPosition,"horizontal-position":a.horizontalPosition,disabled:a.disabled,onDrag:c.onDrag,onDragEnd:c.onDragEnd,onEnter:c.onEnter,onLeave:c.onLeave},{default:o((function(){return[l("div",{class:c.classes.default},null,2)]})),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])}},Cr=hi("vue-simple-line"),zr=hi("vue-simple-line-wrapper"),Er={name:"SimpleLine",components:{LineWrapper:Oi},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:ci(Cr(oi({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:ci(zr(oi({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"],render:function(t,e,a,s,u,c){var h=n("LineWrapper");return i(),r(h,{class:c.classes.wrapper,position:a.position,disabled:a.disabled,onDrag:c.onDrag,onDragEnd:c.onDragEnd,onEnter:c.onEnter,onLeave:c.onLeave},{default:o((function(){return[l("div",{class:c.classes.root},null,2)]})),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])}},kr=hi("vue-bounding-box"),Rr=["east","west",null],Dr=["south","north",null],Mr={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Ar}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Er}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var t=[];return Rr.forEach((function(e){Dr.forEach((function(n){if(e!==n){var i=gi(e,n),r=i.name,o=i.classname;t.push({name:r,classname:o,verticalDirection:n,horizontalDirection:e})}}))})),{points:t}},computed:{style:function(){var t={};return this.width&&this.height&&(t.width="".concat(this.width,"px"),t.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),t},classes:function(){var t=this.handlersClasses,e=this.handlersWrappersClasses,n=this.linesClasses,i=this.linesWrappersClasses;return{root:kr(),handlers:t,handlersWrappers:e,lines:n,linesWrappers:i}},lineNodes:function(){var t=this,e=[];return this.points.forEach((function(n){n.horizontalDirection&&n.verticalDirection||!t.lines[n.name]||e.push({name:n.name,component:t.linesComponent,class:ci(t.classes.lines.default,t.classes.lines[n.name],!t.resizable&&t.classes.lines.disabled),wrapperClass:ci(t.classes.linesWrappers.default,t.classes.linesWrappers[n.name],!t.resizable&&t.classes.linesWrappers.disabled),hoverClass:t.classes.lines.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!t.resizable})})),e},handlerNodes:function(){var t=this,e=[],n=this.width,i=this.height;return this.points.forEach((function(r){if(t.handlers[r.name]){var o={name:r.name,component:t.handlersComponent,class:ci(t.classes.handlers.default,t.classes.handlers[r.name]),wrapperClass:ci(t.classes.handlersWrappers.default,t.classes.handlersWrappers[r.name]),hoverClass:t.classes.handlers.hover,verticalDirection:r.verticalDirection,horizontalDirection:r.horizontalDirection,disabled:!t.resizable};if(n&&i){var a=r.horizontalDirection,s=r.verticalDirection,l="east"===a?n:"west"===a?0:n/2,u="south"===s?i:"north"===s?0:i/2;o.wrapperClass=kr("handler"),o.wrapperStyle={transform:"translate(".concat(l,"px, ").concat(u,"px)")},t.transitions&&t.transitions.enabled&&(o.wrapperStyle.transition="".concat(t.transitions.time,"ms ").concat(t.transitions.timingFunction))}else o.wrapperClass=kr("handler",oi({},r.classname,!0));e.push(o)}})),e}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(t,e,n){var i,r=t.shift(),o=r.left,a=r.top,s={left:0,right:0,top:0,bottom:0};"west"===e?s.left-=o:"east"===e&&(s.right+=o),"north"===n?s.top-=a:"south"===n&&(s.bottom+=a),!n&&e?i="width":n&&!e&&(i="height"),this.resizable&&this.$emit("resize",new Ei(s,{allowedDirections:{left:"west"===e||!e,right:"east"===e||!e,bottom:"south"===n||!n,top:"north"===n||!n},preserveAspectRatio:t.nativeEvent&&t.nativeEvent.shiftKey,respectDirection:i}))}},emits:["resize","resize-end"],render:function(t,e,n,o,a,s){return i(),r("div",{ref:"box",class:s.classes.root,style:s.style},[A(t.$slots,"default"),l("div",null,[(i(!0),r(d,null,f(s.lineNodes,(function(t){return i(),r(C(t.component),{key:t.name,"default-class":t.class,"hover-class":t.hoverClass,"wrapper-class":t.wrapperClass,position:t.name,disabled:t.disabled,onDrag:function(e){return s.onHandlerDrag(e,t.horizontalDirection,t.verticalDirection)},onDragEnd:e[1]||(e[1]=function(t){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])})),128))]),(i(!0),r(d,null,f(s.handlerNodes,(function(t){return i(),r("div",{key:t.name,style:t.wrapperStyle,class:t.wrapperClass},[(i(),r(C(t.component),{"default-class":t.class,"hover-class":t.hoverClass,"wrapper-class":t.wrapperClass,"horizontal-position":t.horizontalDirection,"vertical-position":t.verticalDirection,disabled:t.disabled,onDrag:function(e){return s.onHandlerDrag(e,t.horizontalDirection,t.verticalDirection)},onDragEnd:e[2]||(e[2]=function(t){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)})),128))],6)}},Tr=hi("vue-draggable-area"),Ir={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:Tr()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(t){if(t.cancelable){var e=this.movable&&1===t.touches.length;e&&(this.touches=ai(t.touches)),(this.touchStarted||e)&&(t.preventDefault(),t.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(t){this.touches.length>=1&&(this.touchStarted?(this.processMove(t,t.touches),t.preventDefault(),t.stopPropagation()):Ci({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:t.touches[0].clientX,y:t.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(t){if(this.movable&&0===t.button){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(t){var e=this.$refs.container.getBoundingClientRect(),n=e.left,i=e.top;this.anchor={x:t.clientX-n,y:t.clientY-i}},processMove:function(t,e){var n=ai(e);if(this.touches.length){var i=this.$refs.container.getBoundingClientRect(),r=i.left,o=i.top;1===this.touches.length&&1===n.length&&this.$emit("move",new ki({left:n[0].clientX-(r+this.anchor.x),top:n[0].clientY-(o+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};function Or(t){var e,n;return{rotate:t.rotate||0,flip:{horizontal:(null===(e=null==t?void 0:t.flip)||void 0===e?void 0:e.horizontal)||!1,vertical:(null===(n=null==t?void 0:t.flip)||void 0===n?void 0:n.vertical)||!1}}}function jr(t){var e=t.rotate,n=t.flip,i=t.scaleX,r=t.scaleY,o="";return o+=" rotate("+e+"deg) ",(o+=" scaleX("+i*(n.horizontal?-1:1)+") ")+" scaleY("+r*(n.vertical?-1:1)+") "}function $r(t,e){var n=e.getBoundingClientRect(),i=n.left,r=n.top,o={left:0,top:0},a=0;return t.forEach((function(e){o.left+=(e.clientX-i)/t.length,o.top+=(e.clientY-r)/t.length})),t.forEach((function(t){a+=Ci({x:o.left,y:o.top},{x:t.clientX-i,y:t.clientY-r})})),{centerMass:o,spread:a,count:t.length}}Ir.render=function(t,e,n,o,a,s){return i(),r("div",{ref:"container",onTouchstart:e[1]||(e[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:e[2]||(e[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)})},[A(t.$slots,"default")],544)};var Pr={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=fi(this.processEnd),this.touches=[]},methods:{processMove:function(t,e){if(this.touches.length){if(1===this.touches.length&&1===e.length)this.$emit("move",new zi({left:this.touches[0].clientX-e[0].clientX,top:this.touches[0].clientY-e[0].clientY}));else if(this.touches.length>1&&this.touchResize){var n=$r(e,this.$refs.container),i=this.oldGeometricProperties;i.count===n.count&&i.count>1&&this.$emit("resize",new zi({left:i.centerMass.left-n.centerMass.left,top:i.centerMass.top-n.centerMass.top},{factor:i.spread/n.spread,center:n.centerMass})),this.oldGeometricProperties=n}this.touches=e}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(t){return this.eventsFilter?!1!==this.eventsFilter(t,this.transforming):(t.preventDefault(),t.stopPropagation(),!0)},onTouchStart:function(t){if(t.cancelable&&(this.touchMove||this.touchResize&&t.touches.length>1)&&this.processEvent(t)){var e=this.$refs.container,n=e.getBoundingClientRect(),i=n.left,r=n.top,o=n.bottom,a=n.right;this.touches=ai(t.touches).filter((function(t){return t.clientX>i&&t.clientX<a&&t.clientY>r&&t.clientY<o})),this.oldGeometricProperties=$r(this.touches,e)}},onTouchEnd:function(t){0===t.touches.length&&(this.touches=[],this.processEnd())},onTouchMove:function(t){var e=this;if(this.touches.length){var n=ai(t.touches).filter((function(t){return!t.identifier||e.touches.find((function(e){return e.identifier===t.identifier}))}));this.processEvent(t)&&(this.processMove(t,n),this.processStart())}},onMouseDown:function(t){if(this.mouseMove&&"buttons"in t&&1===t.buttons&&this.processEvent(t)){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.processStart()}},onMouseMove:function(t){this.touches.length&&this.processEvent(t)&&this.processMove(t,[{clientX:t.clientX,clientY:t.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(t){if(this.wheelResize&&this.processEvent(t)){var e=this.$refs.container.getBoundingClientRect(),n=e.left,i=e.top,r=1+this.wheelResize.ratio*(0==(a=+(t.deltaY||t.detail||t.wheelDelta))||Ai(a)?a:a>0?1:-1),o={left:t.clientX-n,top:t.clientY-i};this.$emit("resize",new zi({},{factor:r,center:o})),this.touches.length||this.debouncedProcessEnd()}var a}},emits:["resize","move","transform-end"],render:function(t,e,n,o,a,s){return i(),r("div",{ref:"container",onTouchstart:e[1]||(e[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:e[2]||(e[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onWheel:e[3]||(e[3]=function(){return s.onWheel&&s.onWheel.apply(s,arguments)})},[A(t.$slots,"default")],544)}},Lr={components:{TransformableImage:Pr},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"],render:function(t,e,a,s,l,u){var c=n("transformable-image");return i(),r(c,{"touch-move":a.touchMove,"touch-resize":a.touchResize,"mouse-move":a.mouseMove,"wheel-resize":a.wheelResize,onMove:e[1]||(e[1]=function(e){return t.$emit("move",e)}),onResize:e[2]||(e[2]=function(e){return t.$emit("resize",e)})},{default:o((function(){return[A(t.$slots,"default")]})),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])}},Wr=hi("vue-preview"),Br={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:Wr({fill:this.fill}),wrapper:Wr("wrapper"),imageWrapper:Wr("image-wrapper"),image:ci(Wr("image"),this.imageClass)}},style:function(){if(this.fill)return{};var t={};return this.width&&(t.width="".concat(this.size.width,"px")),this.height&&(t.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},wrapperStyle:function(){var t={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},imageStyle:function(){if(this.coordinates&&this.image){var t=this.coordinates.width/this.size.width,e=ri(ri({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/t,scaleY:1/t}),n=this.imageSize.width,i=this.imageSize.height,r=er({width:n,height:i},e.rotate),o={width:"".concat(n,"px"),height:"".concat(i,"px"),left:"0px",top:"0px"},a={rotate:{left:(n-r.width)*e.scaleX/2,top:(i-r.height)*e.scaleY/2},scale:{left:(1-e.scaleX)*n/2,top:(1-e.scaleY)*i/2}};return o.transform="translate(\n\t\t\t\t".concat(-this.coordinates.left/t-a.rotate.left-a.scale.left,"px,").concat(-this.coordinates.top/t-a.rotate.top-a.scale.top,"px) ")+jr(e),this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(t){(t.width||t.height)&&this.onChangeImage()}},mounted:function(){var t=this;this.onChangeImage(),this.$refs.image.addEventListener("load",(function(){t.refreshImage()})),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var t=this.$refs.image;this.calculatedImageSize.height=t.naturalHeight,this.calculatedImageSize.width=t.naturalWidth},refresh:function(){var t=this.$refs.root;this.width||(this.calculatedSize.width=t.clientWidth),this.height||(this.calculatedSize.height=t.clientHeight)},onChangeImage:function(){var t=this.$refs.image;t&&t.complete&&this.refreshImage(),this.refresh()}},render:function(t,e,n,o,a,s){return i(),r("div",{ref:"root",class:s.classes.root,style:s.style},[l("div",{ref:"wrapper",class:s.classes.wrapper,style:s.wrapperStyle},[z(l("img",{ref:"image",src:n.image&&n.image.src,class:s.classes.image,style:s.imageStyle},null,14,["src"]),[[E,n.image&&n.image.src]])],6)],6)}},Vr={components:{Preview:Br},inheritAttrs:!1,render:function(t,e,o,a,s,l){var u=n("preview");return i(),r(u,k(t.$attrs,{fill:!0}),null,16)}},Nr=hi("vue-rectangle-stencil"),Ur={name:"RectangleStencil",components:{StencilPreview:Vr,BoundingBox:Mr,DraggableArea:Ir},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Ar}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Er}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:ci(Nr({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:ci(Nr("preview"),this.previewClass),boundingBox:ci(Nr("bounding-box"),this.boundingBoxClass)}},style:function(){var t=this.stencilCoordinates,e=t.height,n=t.width,i=t.left,r=t.top,o={width:"".concat(n,"px"),height:"".concat(e,"px"),transform:"translate(".concat(i,"px, ").concat(r,"px)")};return this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}},methods:{onMove:function(t){this.$emit("move",t),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(t){this.$emit("resize",t),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"],render:function(t,e,a,s,u,c){var h=n("stencil-preview"),d=n("draggable-area"),f=n("bounding-box");return i(),r("div",{class:c.classes.stencil,style:c.style},[l(f,{width:a.stencilCoordinates.width,height:a.stencilCoordinates.height,transitions:a.transitions,class:c.classes.boundingBox,handlers:a.handlers,"handlers-component":a.handlersComponent,"handlers-classes":a.handlersClasses,"handlers-wrappers-classes":a.handlersWrappersClasses,lines:a.lines,"lines-component":a.linesComponent,"lines-classes":a.linesClasses,"lines-wrappers-classes":a.linesWrappersClasses,resizable:a.resizable,onResize:c.onResize,onResizeEnd:c.onResizeEnd},{default:o((function(){return[l(d,{movable:a.movable,onMove:c.onMove,onMoveEnd:c.onMoveEnd},{default:o((function(){return[l(h,{image:a.image,coordinates:a.coordinates,width:a.stencilCoordinates.width,height:a.stencilCoordinates.height,class:c.classes.preview,transitions:a.transitions},null,8,["image","coordinates","width","height","class","transitions"])]})),_:1},8,["movable","onMove","onMoveEnd"])]})),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)}},Fr=["transitions"],Hr=hi("vue-advanced-cropper"),Yr={name:"Cropper",components:{BackgroundWrapper:Lr},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return Ur}},backgroundWrapperComponent:{type:[Object,String],default:function(){return Lr}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(t){return-1!==Wi.indexOf(t)}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(t){return!("string"==typeof t&&"fill"!==t&&"fit"!==t)}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(t){var e=t.event,n=t.coordinates,i=t.aspectRatio,r=t.positionRestrictions,o=t.sizeRestrictions,a=pi(pi({},n),{right:n.left+n.width,bottom:n.top+n.height}),s=e.params||{},l=pi({},e.directions),u=s.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};o.widthFrozen&&(l.left=0,l.right=0),o.heightFrozen&&(l.top=0,l.bottom=0),ji.forEach((function(t){u[t]||(l[t]=0)}));var c=Yi(a,l=wr({coordinates:a,directions:l,sizeRestrictions:o,positionRestrictions:r})).width,h=Yi(a,l).height,d=s.preserveRatio?Gi(a):Ji(c/h,i);if(d){var f=s.respectDirection;if(f||(f=a.width>=a.height||1===d?"width":"height"),"width"===f){var p=c/d-a.height;if(u.top&&u.bottom){var g=l.top,m=l.bottom;l.bottom=xr(p,m,g),l.top=xr(p,g,m)}else u.bottom?l.bottom=p:u.top?l.top=p:u.right?l.right=0:u.left&&(l.left=0)}else if("height"===f){var v=a.width-h*d;if(u.left&&u.right){var b=l.left,y=l.right;l.left=-xr(v,b,y),l.right=-xr(v,y,b)}else u.left?l.left=-v:u.right?l.right=-v:u.top?l.top=0:u.bottom&&(l.bottom=0)}l=wr({directions:l,coordinates:a,sizeRestrictions:o,positionRestrictions:r,preserveRatio:!0,compensate:s.compensate})}return c=Yi(a,l).width,h=Yi(a,l).height,(d=s.preserveRatio?Gi(a):Ji(c/h,i))&&Math.abs(d-c/h)>.001&&ji.forEach((function(t){u[t]||(l[t]=0)})),hr({event:new ki({left:-l.left,top:-l.top}),coordinates:{width:n.width+l.right+l.left,height:n.height+l.top+l.bottom,left:n.left,top:n.top},positionRestrictions:r})}},moveAlgorithm:{type:Function,default:hr},initStretcher:{type:Function,default:function(t){var e=t.stretcher,n=t.imageSize,i=Gi(n);e.style.width=n.width+"px",e.style.height=e.clientWidth/i+"px",e.style.width=e.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(t){var e=t.visibleArea,n=t.coordinates,i=t.aspectRatio,r=t.sizeRestrictions,o=t.positionRestrictions,a=pi(pi({},n),cr({width:n.width,height:n.height,aspectRatio:i,sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minHeight:Math.min(e.height,r.minHeight),minWidth:Math.min(e.width,r.minWidth)}}));return rr(a=qi(a,Ui(Fi(n),Fi(a))),sr(Ni(e),o))}},fitVisibleArea:{type:Function,default:function(t){var e=t.visibleArea,n=t.boundaries,i=t.getAreaRestrictions,r=t.coordinates,o=pi({},e);o.height=o.width/Gi(n),o.top+=(e.height-o.height)/2,(r.height-o.height>0||r.width-o.width>0)&&(o=Zi(o,Math.max(r.height/o.height,r.width/o.width)));var a=Xi(Qi(r,Ni(o=Zi(o,ir(o,i({visibleArea:o,type:"resize"}))))));return o.width<r.width&&(a.left=0),o.height<r.height&&(a.top=0),rr(o=qi(o,a),i({visibleArea:o,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(t){var e=t.visibleArea,n=t.boundaries,i=t.imageSize,r=t.imageRestriction,o=t.type,a={};return"fill-area"===r?a={left:0,top:0,right:i.width,bottom:i.height}:"fit-area"===r&&(Gi(n)>Gi(i)?(a={top:0,bottom:i.height},e&&"move"===o&&(e.width>i.width?(a.left=-(e.width-i.width)/2,a.right=i.width-a.left):(a.left=0,a.right=i.width))):(a={left:0,right:i.width},e&&"move"===o&&(e.height>i.height?(a.top=-(e.height-i.height)/2,a.bottom=i.height-a.top):(a.top=0,a.bottom=i.height)))),a}},sizeRestrictionsAlgorithm:{type:Function,default:function(t){return{minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(t){var e=t.imageSize,n={};return"none"!==t.imageRestriction&&(n={left:0,top:0,right:e.width,bottom:e.height}),n}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:ri({},Bi)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var t=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(t))+Math.abs(this.imageAttributes.height*Math.sin(t)),height:Math.abs(this.imageAttributes.width*Math.sin(t))+Math.abs(this.imageAttributes.height*Math.cos(t))}},initialized:function(){return Boolean(this.visibleArea&&this.imageLoaded)},settings:function(){var t=xi(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:xi(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:t}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var t=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:yi(this.minWidth)?0:_i(this.minWidth),minHeight:yi(this.minHeight)?0:_i(this.minHeight),maxWidth:yi(this.maxWidth)?1/0:_i(this.maxWidth),maxHeight:yi(this.maxHeight)?1/0:_i(this.maxHeight)});if(t=function(t){var e=t.areaRestrictions,n=t.sizeRestrictions,i=t.boundaries,r=t.positionRestrictions,o=pi(pi({},n),{minWidth:void 0!==n.minWidth?n.minWidth:0,minHeight:void 0!==n.minHeight?n.minHeight:0,maxWidth:void 0!==n.maxWidth?n.maxWidth:1/0,maxHeight:void 0!==n.maxHeight?n.maxHeight:1/0});void 0!==r.left&&void 0!==r.right&&(o.maxWidth=Math.min(o.maxWidth,r.right-r.left)),void 0!==r.bottom&&void 0!==r.top&&(o.maxHeight=Math.min(o.maxHeight,r.bottom-r.top));var a=or(e),s=tr(i,a);return a.width<1/0&&(!o.maxWidth||o.maxWidth>s.width)&&(o.maxWidth=Math.min(o.maxWidth,s.width)),a.height<1/0&&(!o.maxHeight||o.maxHeight>s.height)&&(o.maxHeight=Math.min(o.maxHeight,s.height)),o.minWidth>o.maxWidth&&(o.minWidth=o.maxWidth,o.widthFrozen=!0),o.minHeight>o.maxHeight&&(o.minHeight=o.maxHeight,o.heightFrozen=!0),o}({sizeRestrictions:t,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var e=this.getStencilSize(),n=or(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));t.maxWidth=Math.min(t.maxWidth,n.width*e.width/this.boundaries.width),t.maxHeight=Math.min(t.maxHeight,n.height*e.height/this.boundaries.height),t.maxWidth<t.minWidth&&(t.minWidth=t.maxWidth),t.maxHeight<t.minHeight&&(t.minHeight=t.maxHeight)}return t}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:Hr(),image:ci(Hr("image"),this.imageClass),stencil:Hr("stencil"),boundaries:ci(Hr("boundaries"),this.boundariesClass),stretcher:ci(Hr("stretcher")),background:ci(Hr("background"),this.backgroundClass),foreground:ci(Hr("foreground"),this.foregroundClass),imageWrapper:ci(Hr("image-wrapper")),cropperWrapper:ci(Hr("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var t=this.coordinates,e=t.width,n=t.height,i=t.left,r=t.top;return{width:e/this.coefficient,height:n/this.coefficient,left:(i-this.visibleArea.left)/this.coefficient,top:(r-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var t={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(t.opacity="0"),t},imageStyle:function(){var t=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},e=(t.width-this.imageSize.width)/(2*this.coefficient),n=(t.height-this.imageSize.height)/(2*this.coefficient),i=(1-1/this.coefficient)*t.width/2,r=(1-1/this.coefficient)*t.height/2,o=ri(ri({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/t.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/t.height)}),a={width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-e-i-this.imageTransforms.translateX,"px, ").concat(-n-r-this.imageTransforms.translateY,"px)")+jr(o)};return this.transitionsOptions.enabled&&(a.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),a}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var t=this;this.$nextTick((function(){t.resetCoordinates(),t.runAutoZoom("setCoordinates"),t.onChange()}))},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(t,e){["aspectRatio","minAspectRatio","maxAspectRatio"].find((function(n){return t[n]!==e[n]}))&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=fi(this.update,this.debounce),this.debouncedDisableTransitions=fi(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var t=this.initialized?this.prepareResult(ri({},this.coordinates)):this.defaultCoordinates(),e={rotate:this.imageTransforms.rotate%360,flip:ri({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var n=this;return{image:this.image,coordinates:t,visibleArea:this.visibleArea?ri({},this.visibleArea):null,imageTransforms:e,get canvas(){return n.canvas?n.getCanvas():void 0}}}return{image:this.image,coordinates:t,visibleArea:this.visibleArea?ri({},this.visibleArea):null,canvas:void 0,imageTransforms:e}},zoom:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transitions,i=void 0===n||n;this.onManipulateImage(new zi({},{factor:1/t,center:e}),{normalize:!1,transitions:i})},move:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transitions,i=void 0===n||n;this.onManipulateImage(new zi({left:t||0,top:e||0}),{normalize:!1,transitions:i})},setCoordinates:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.autoZoom,r=void 0===i||i,o=n.transitions,a=void 0===o||o;this.$nextTick((function(){e.imageLoaded?(e.transitionsActive||(a&&e.enableTransitions(),e.coordinates=e.applyTransform(t),r&&e.runAutoZoom("setCoordinates"),a&&e.debouncedDisableTransitions()),e.onChange()):e.delayedTransforms=t}))},refresh:function(){var t=this,e=this.$refs.image;if(this.src&&e)return this.initialized?this.updateVisibleArea().then((function(){t.onChange()})):this.resetVisibleArea().then((function(){t.onChange()}))},reset:function(){var t=this;return this.resetVisibleArea().then((function(){t.onChange(!1)}))},awaitRender:function(t){var e=this;this.awaiting||(this.awaiting=!0,this.$nextTick((function(){t(),e.awaiting=!1})))},prepareResult:function(t){return this.roundResult?function(t){var e=t.coordinates,n=t.sizeRestrictions,i=t.positionRestrictions,r={width:Math.round(e.width),height:Math.round(e.height),left:Math.round(e.left),top:Math.round(e.top)};return r.width>n.maxWidth?r.width=Math.floor(e.width):r.width<n.minWidth&&(r.width=Math.ceil(e.width)),r.height>n.maxHeight?r.height=Math.floor(e.height):r.height<n.minHeight&&(r.height=Math.ceil(e.height)),rr(r,i)}(ri(ri({},this.getPublicProperties()),{},{positionRestrictions:yr(this.positionRestrictions,this.visibleArea),coordinates:t})):t},processAutoZoom:function(t,e,n,i){var r=this.autoZoomAlgorithm;r||(r=this.stencilSize?dr:this.autoZoom?fr:pr);var o=r({event:{type:t,params:i},visibleArea:e,coordinates:n,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return ri(ri({},o),{},{changed:!Vi(o.visibleArea,e)||!Vi(o.coordinates,n)})},runAutoZoom:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transitions,i=void 0!==n&&n,r=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(e,Fr),o=this.processAutoZoom(t,this.visibleArea,this.coordinates,r),a=o.visibleArea,s=o.coordinates,l=o.changed;i&&l&&this.enableTransitions(),this.visibleArea=a,this.coordinates=s,i&&l&&this.debouncedDisableTransitions()},normalizeEvent:function(t){return function(t){var e=t.event,n=t.visibleArea,i=t.coefficient;if("manipulateImage"===e.type)return pi(pi({},e),{move:{left:e.move&&e.move.left?i*e.move.left:0,top:e.move&&e.move.top?i*e.move.top:0},scale:{factor:e.scale&&e.scale.factor?e.scale.factor:1,center:e.scale&&e.scale.center?{left:e.scale.center.left*i+n.left,top:e.scale.center.top*i+n.top}:null}});if("resize"===e.type){var r=pi(pi({},e),{directions:pi({},e.directions)});return ji.forEach((function(t){r.directions[t]*=i})),r}if("move"===e.type){var o=pi(pi({},e),{directions:pi({},e.directions)});return Li.forEach((function(t){o.directions[t]*=i})),o}return e}(ri(ri({},this.getPublicProperties()),{},{event:t}))},getCanvas:function(){if(this.$refs.canvas){var t=this.$refs.canvas,e=this.$refs.image,n=0!==this.imageTransforms.rotate||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(t,e,n){var i=n.rotate,r=n.flip,o={width:e.naturalWidth,height:e.naturalHeight},a=er(o,i),s=t.getContext("2d");t.height=a.height,t.width=a.width,s.save();var l=nr(Fi(pi({left:0,top:0},o)),i);return s.translate(-(l.left-a.width/2),-(l.top-a.height/2)),s.rotate(i*Math.PI/180),s.translate(r.horizontal?o.width:0,r.vertical?o.height:0),s.scale(r.horizontal?-1:1,r.vertical?-1:1),s.drawImage(e,0,0,o.width,o.height),s.restore(),t}(this.$refs.sourceCanvas,e,this.imageTransforms):e,i=ri({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),r=function(t){return t.find((function(t){return e=t,!Number.isNaN(parseFloat(e))&&isFinite(e);var e}))},o=cr({sizeRestrictions:{minWidth:r([i.width,i.minWidth])||0,minHeight:r([i.height,i.minHeight])||0,maxWidth:r([i.width,i.maxWidth])||1/0,maxHeight:r([i.height,i.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(i.maxArea&&o.width*o.height>i.maxArea){var a=Math.sqrt(i.maxArea/(o.width*o.height));o={width:Math.round(a*o.width),height:Math.round(a*o.height)}}return function(t,e,n,i,r){t.width=i?i.width:n.width,t.height=i?i.height:n.height;var o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),r&&(r.imageSmoothingEnabled&&(o.imageSmoothingEnabled=r.imageSmoothingEnabled),r.imageSmoothingQuality&&(o.imageSmoothingQuality=r.imageSmoothingQuality),r.fillColor&&(o.fillStyle=r.fillColor,o.fillRect(0,0,t.width,t.height),o.save()));var a=n.left<0?-n.left:0,s=n.top<0?-n.top:0;o.drawImage(e,n.left+a,n.top+s,n.width,n.height,a*(t.width/n.width),s*(t.height/n.height),t.width,t.height)}(t,n,this.coordinates,o,i),t}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.visibleArea&&e?function(t,e){return pi(pi({},t),{minWidth:Math.min(e.width,t.minWidth),minHeight:Math.min(e.height,t.minHeight),maxWidth:Math.min(e.width,t.maxWidth),maxHeight:Math.min(e.height,t.maxHeight)})}(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,i=this.visibleArea&&e?yr(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return function(t){var e=t.coordinates,n=t.transform,i=t.imageSize,r=t.sizeRestrictions,o=t.positionRestrictions,a=t.aspectRatio,s=t.visibleArea,l=function(t,e){return hr({coordinates:t,positionRestrictions:o,event:new ki({left:e.left-t.left,top:e.top-t.top})})},u=pi({},e);return(Array.isArray(n)?n:[n]).forEach((function(t){var e;yi((e="function"==typeof t?t({coordinates:u,imageSize:i,visibleArea:s}):t).width)&&yi(e.height)||(u=function(t,e){var n=pi(pi(pi({},t),cr({width:e.width,height:e.height,sizeRestrictions:r,aspectRatio:a})),{left:0,top:0});return l(n,{left:t.left,top:t.top})}(u,pi(pi({},u),e))),yi(e.left)&&yi(e.top)||(u=l(u,pi(pi({},u),e)))})),u}({transform:t,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:n,positionRestrictions:i,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var t=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var e=this.defaultSize;e||(e=this.stencilSize?vr:mr);var n=this.sizeRestrictions;n.minWidth,n.minHeight,n.maxWidth,n.maxHeight;var i=bi(e)?e({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):e,r=this.defaultPosition||gr,o=[i,function(e){var n=e.coordinates;return ri({},bi(r)?r({coordinates:n,imageSize:t.imageSize,visibleArea:t.visibleArea}):t.defaultPosition)}];this.delayedTransforms&&o.push.apply(o,ai(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(o,!0),this.delayedTransforms=null}},clearImage:function(){var t=this;this.imageLoaded=!1,setTimeout((function(){var e=t.$refs.stretcher;e&&(e.style.height="auto",e.style.width="auto"),t.coordinates=t.defaultCoordinates(),t.boundaries={width:0,height:0}}),this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var t=this,e=this.$refs.stretcher,n=this.$refs.cropper;return this.initStretcher({cropper:n,stretcher:e,imageSize:this.imageSize}),this.$nextTick().then((function(){var e={cropper:n,imageSize:t.imageSize};if(bi(t.defaultBoundaries)?t.boundaries=t.defaultBoundaries(e):"fit"===t.defaultBoundaries?t.boundaries=function(t){var e=t.cropper,n=t.imageSize,i=e.clientHeight,r=e.clientWidth,o=i,a=n.width*i/n.height;return a>r&&(a=r,o=n.height*r/n.width),{width:a,height:o}}(e):t.boundaries=function(t){var e=t.cropper;return{width:e.clientWidth,height:e.clientHeight}}(e),!t.boundaries.width||!t.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")}))},resetVisibleArea:function(){var t=this;return this.appliedImageTransforms=ri(ri({},this.defaultImageTransforms),{},{flip:ri({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then((function(){"visible-area"!==t.priority&&(t.visibleArea=null,t.resetCoordinates());var e,n,i,r,o,a=t.defaultVisibleArea||br;t.visibleArea=bi(a)?a({imageSize:t.imageSize,boundaries:t.boundaries,coordinates:"visible-area"!==t.priority?t.coordinates:null,getAreaRestrictions:t.getAreaRestrictions,stencilSize:t.getStencilSize()}):t.defaultVisibleArea,t.visibleArea=(n=(e={visibleArea:t.visibleArea,boundaries:t.boundaries,getAreaRestrictions:t.getAreaRestrictions}).boundaries,i=e.getAreaRestrictions,r=pi({},e.visibleArea),o=Gi(n),r.width/r.height!==o&&(r.height=r.width/o),rr(r,i({visibleArea:r,type:"move"}))),"visible-area"===t.priority?t.resetCoordinates():t.coordinates=t.fitCoordinates({visibleArea:t.visibleArea,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.sizeRestrictions}),t.runAutoZoom("resetVisibleArea")})).catch((function(){t.visibleArea=null}))},updateVisibleArea:function(){var t=this;return this.updateBoundaries().then((function(){t.visibleArea=t.fitVisibleArea({imageSize:t.imageSize,boundaries:t.boundaries,visibleArea:t.visibleArea,coordinates:t.coordinates,getAreaRestrictions:t.getAreaRestrictions}),t.coordinates=t.fitCoordinates({visibleArea:t.visibleArea,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.sizeRestrictions}),t.runAutoZoom("updateVisibleArea")})).catch((function(){t.visibleArea=null}))},onChange:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var t,e=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(t){if(vi(t))return!1;var e=window.location,n=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t)||[],i={protocol:n[1]||"",host:n[2]||"",port:n[3]||""},r=function(t){return t.port||("http"===(t.protocol||e.protocol)?80:433)};return!(!i.protocol&&!i.host&&!i.port||Boolean(i.protocol&&i.protocol==e.protocol&&i.host&&i.host==e.host&&i.host&&r(i)==r(e)))}(this.src)){var n=yi(this.crossOrigin)?this.canvas:this.crossOrigin;!0===n&&(n="anonymous"),this.imageAttributes.crossOrigin=n||null}if(this.checkOrientation){var i=(t=this.src,new Promise((function(e){(function(t){return new Promise((function(e,n){try{if(t)if(/^data:/i.test(t))e(function(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),n=e.length,i=new ArrayBuffer(n),r=new Uint8Array(i),o=0;o<n;o++)r[o]=e.charCodeAt(o);return i}(t));else if(/^blob:/i.test(t)){var i=new FileReader;i.onload=function(t){e(t.target.result)},o=t,a=function(t){i.readAsArrayBuffer(t)},(s=new XMLHttpRequest).open("GET",o,!0),s.responseType="blob",s.onload=function(){200!=this.status&&0!==this.status||a(this.response)},s.send()}else{var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status||0===r.status?e(r.response):n("Warning: could not load an image to parse its orientation"),r=null)},r.onprogress=function(){"image/jpeg"!==r.getResponseHeader("content-type")&&r.abort()},r.withCredentials=!1,r.open("GET",t,!0),r.responseType="arraybuffer",r.send(null)}else n("Error: the image is empty")}catch(t){n(t)}var o,a,s}))})(t).then((function(n){var i=function(t){try{var e,n=new DataView(t),i=void 0,r=void 0,o=void 0,a=void 0;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var s=n.byteLength,l=2;l+1<s;){if(255===n.getUint8(l)&&225===n.getUint8(l+1)){o=l;break}l++}if(o&&(i=o+10,"Exif"===function(t,e,n){var i,r="";for(i=e,n+=e;i<n;i++)r+=String.fromCharCode(t.getUint8(i));return r}(n,o+4,4))){var u=n.getUint16(i);if(((r=18761===u)||19789===u)&&42===n.getUint16(i+2,r)){var c=n.getUint32(i+4,r);c>=8&&(a=i+c)}}if(a)for(var h=n.getUint16(a,r),d=0;d<h;d++)if(l=a+12*d+2,274===n.getUint16(l,r)){l+=8,e=n.getUint16(l,r),n.setUint16(l,1,r);break}return e}catch(t){return null}}(n);e(n?{source:t,arrayBuffer:n,orientation:i}:{source:t,arrayBuffer:null,orientation:null})})).catch((function(n){console.warn(n),e({source:t,arrayBuffer:null,orientation:null})}))})));setTimeout((function(){i.then(e.onParseImage)}),this.transitionTime)}else setTimeout((function(){e.onParseImage({source:e.src})}),this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var t=this,e=this.$refs.image;e&&!this.imageLoaded&&(this.imageAttributes.height=e.naturalHeight,this.imageAttributes.width=e.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then((function(){t.$emit("ready"),t.onChange(!1)})))},onParseImage:function(t){var e=this,n=t.source,i=t.arrayBuffer,r=t.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,i&&r&&r>1?mi(n)||!vi(n)?(this.imageAttributes.src=URL.createObjectURL(new Blob([i])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(t){for(var e=[],n=new Uint8Array(t);n.length>0;){var i=n.subarray(0,8192);e.push(String.fromCharCode.apply(null,Array.from?Array.from(i):i.slice())),n=n.subarray(8192)}return"data:image/jpeg;base64,"+btoa(e.join(""))}(i):this.imageAttributes.src=n,bi(this.defaultTransforms)?this.appliedImageTransforms=Or(this.defaultTransforms()):wi(this.defaultTransforms)?this.appliedImageTransforms=Or(this.defaultTransforms):this.appliedImageTransforms=function(t){var e=Or({});if(t)switch(t){case 2:e.flip.horizontal=!0;break;case 3:e.rotate=-180;break;case 4:e.flip.vertical=!0;break;case 5:e.rotate=90,e.flip.vertical=!0;break;case 6:e.rotate=90;break;case 7:e.rotate=90,e.flip.horizontal=!0;break;case 8:e.rotate=-90}return e}(r),this.defaultImageTransforms=ri(ri({},this.appliedImageTransforms),{},{flip:ri({},this.appliedImageTransforms.flip)}),this.$nextTick((function(){var t=e.$refs.image;t&&t.complete&&(function(t){return Boolean(t.naturalWidth)}(t)?e.onSuccessLoadImage():e.onFailLoadImage())}))},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(t){var e=this;this.transitionsOptions.enabled||this.awaitRender((function(){e.coordinates=e.moveAlgorithm(ri(ri({},e.getPublicProperties()),{},{positionRestrictions:yr(e.positionRestrictions,e.visibleArea),coordinates:e.coordinates,event:e.normalizeEvent(t)})),e.onChange()}))},onResize:function(t){var e=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender((function(){var n=e.sizeRestrictions,i=Math.min(e.coordinates.width,e.coordinates.height,20*e.coefficient);e.coordinates=e.resizeAlgorithm(ri(ri({},e.getPublicProperties()),{},{positionRestrictions:yr(e.positionRestrictions,e.visibleArea),sizeRestrictions:{maxWidth:Math.min(n.maxWidth,e.visibleArea.width),maxHeight:Math.min(n.maxHeight,e.visibleArea.height),minWidth:Math.max(n.minWidth,i),minHeight:Math.max(n.minHeight,i)},event:e.normalizeEvent(t)})),e.onChange(),e.ticking=!1}))},onManipulateImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.transitionsOptions.enabled){var n=e.transitions,i=void 0!==n&&n,r=e.normalize,o=void 0===r||r;i&&this.enableTransitions();var a=function(t){var e=t.event,n=t.coordinates,i=t.visibleArea,r=t.sizeRestrictions,o=t.getAreaRestrictions,a=t.positionRestrictions,s=t.adjustStencil,l=e.scale,u=e.move,c=pi({},i),h=pi({},n),d=1,f=1,p=l.factor&&Math.abs(l.factor-1)>.001;c=qi(c,{left:u.left||0,top:u.top||0});var g={stencil:{minimum:Math.max(r.minWidth?r.minWidth/h.width:0,r.minHeight?r.minHeight/h.height:0),maximum:Math.min(r.maxWidth?r.maxWidth/h.width:1/0,r.maxHeight?r.maxHeight/h.height:1/0,Ki(h,a))},area:{maximum:Ki(c,o({visibleArea:c,type:"resize"}))}};l.factor&&p&&(l.factor<1?(f=Math.max(l.factor,g.stencil.minimum))>1&&(f=1):l.factor>1&&(f=Math.min(l.factor,Math.min(g.area.maximum,g.stencil.maximum)))<1&&(f=1)),f&&(c=Zi(c,f,l.center));var m=n.left-i.left,v=i.width+i.left-(n.width+n.left),b=n.top-i.top,y=i.height+i.top-(n.height+n.top);return c=rr(c=qi(c,Qi(c,{left:void 0!==a.left?a.left-m*f:void 0,top:void 0!==a.top?a.top-b*f:void 0,bottom:void 0!==a.bottom?a.bottom+y*f:void 0,right:void 0!==a.right?a.right+v*f:void 0})),o({visibleArea:c,type:"move"})),h.width=h.width*f,h.height=h.height*f,h.left=c.left+m*f,h.top=c.top+b*f,h=rr(h,sr(Ni(c),a)),l.factor&&p&&s&&(l.factor>1?d=Math.min(g.area.maximum,l.factor)/f:l.factor<1&&(d=Math.max(h.height/c.height,h.width/c.width,l.factor/f)),1!==d&&(c=qi(c=rr(c=Zi(c,d,l.factor>1?l.center:Fi(h)),o({visibleArea:c,type:"move"})),Xi(Qi(h,Ni(c)))))),{coordinates:h,visibleArea:c}}(ri(ri({},this.getPublicProperties()),{},{event:o?this.normalizeEvent(t):t,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),s=a.visibleArea,l=a.coordinates;this.visibleArea=s,this.coordinates=l,this.runAutoZoom("manipulateImage"),this.onChange(),i&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visibleArea,n=t.type,i=void 0===n?"move":n;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:e,type:i})},getAspectRatio:function(t){var e,n,i=this.stencilProps,r=i.aspectRatio,o=i.minAspectRatio,a=i.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var s=this.$refs.stencil.aspectRatios();e=s.minimum,n=s.maximum}if(yi(e)&&(e=yi(r)?o:r),yi(n)&&(n=yi(r)?a:r),!t&&(yi(e)||yi(n))){var l=this.getStencilSize(),u=l?Gi(l):null;yi(e)&&(e=Si(u)?u:void 0),yi(n)&&(n=Si(u)?u:void 0)}return{minimum:e,maximum:n}},getStencilSize:function(){if(this.stencilSize)return e=(t={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)}).boundaries,i=t.aspectRatio,Ji(Gi(r=bi(n=t.stencilSize)?n({boundaries:e,aspectRatio:i}):n),i)&&(r=cr({sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:i.minimum,maximum:i.maximum}})),(r.width>e.width||r.height>e.height)&&(r=cr({sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:Gi(r),maximum:Gi(r)}})),r;var t,e,n,i,r},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return ri({},Bi)},flip:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transitions,i=void 0===n||n;if(!this.transitionsActive){i&&this.enableTransitions();var r=ri({},this.imageTransforms.flip),o=function(t){var e=t.flip,n=t.previousFlip,i=t.rotate;t.aspectRatio;var r=t.getAreaRestrictions,o=t.coordinates,a=t.visibleArea,s=t.imageSize,l=pi({},o),u=pi({},a),c=n.horizontal!==e.horizontal,h=n.vertical!==e.vertical;if(c||h){var d=nr({left:s.width/2,top:s.height/2},-i),f=nr(Fi(l),-i),p=nr({left:c?d.left-(f.left-d.left):f.left,top:h?d.top-(f.top-d.top):f.top},i);l=qi(l,Ui(p,Fi(l))),f=nr(Fi(u),-i),u=rr(u=qi(u,Ui(p=nr({left:c?d.left-(f.left-d.left):f.left,top:h?d.top-(f.top-d.top):f.top},i),Fi(u))),r({visibleArea:u,type:"move"}))}return{coordinates:l,visibleArea:u}}({flip:{horizontal:t?!r.horizontal:r.horizontal,vertical:e?!r.vertical:r.vertical},previousFlip:r,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=o.visibleArea,s=o.coordinates;t&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),e&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=a,this.coordinates=s,this.onChange(),i&&this.debouncedDisableTransitions()}},rotate:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).transitions,n=void 0===e||e;if(!this.transitionsActive){n&&this.enableTransitions();var i=ri({},this.imageSize);this.appliedImageTransforms.rotate+=t;var r=function(t){var e=t.aspectRatio,n=t.getAreaRestrictions,i=t.coordinates,r=t.visibleArea,o=t.sizeRestrictions,a=t.positionRestrictions,s=t.imageSize,l=t.previousImageSize,u=t.angle,c=pi({},i),h=pi({},r),d=nr(Fi(pi({left:0,top:0},l)),u);return(c=pi(pi({},cr({sizeRestrictions:o,aspectRatio:e,width:c.width,height:c.height})),nr(Fi(c),u))).left-=d.left-s.width/2+c.width/2,c.top-=d.top-s.height/2+c.height/2,h=Zi(h,ir(h,n({visibleArea:h,type:"resize"}))),{coordinates:c=rr(c,a),visibleArea:h=rr(h=qi(h,Ui(Fi(c),Fi(i))),n({visibleArea:h,type:"move"}))}}({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:i,imageSize:this.imageSize,angle:t,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),o=r.visibleArea,a=r.coordinates,s=this.processAutoZoom("rotateImage",o,a);o=s.visibleArea,a=s.coordinates,this.visibleArea=o,this.coordinates=a,this.onChange(),n&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},Xr={key:0,ref:"canvas",style:{display:"none"}},qr={key:1,ref:"sourceCanvas",style:{display:"none"}};Yr.render=function(t,e,n,a,s,c){return i(),r("div",{ref:"cropper",class:c.classes.cropper},[l("div",{ref:"stretcher",class:c.classes.stretcher},null,2),l("div",{class:c.classes.boundaries,style:c.boundariesStyle},[(i(),r(C(n.backgroundWrapperComponent),{class:c.classes.cropperWrapper,"wheel-resize":c.settings.resizeImage.wheel,"touch-resize":c.settings.resizeImage.touch,"touch-move":c.settings.moveImage.touch,"mouse-move":c.settings.moveImage.mouse,onMove:c.onManipulateImage,onResize:c.onManipulateImage},{default:o((function(){return[l("div",{class:c.classes.background,style:c.boundariesStyle},null,6),l("div",{class:c.classes.imageWrapper},[l("img",{ref:"image",crossorigin:s.imageAttributes.crossOrigin,src:s.imageAttributes.src,class:c.classes.image,style:c.imageStyle,onMousedown:e[1]||(e[1]=R((function(){}),["prevent"]))},null,46,["crossorigin","src"])],2),l("div",{class:c.classes.foreground,style:c.boundariesStyle},null,6),z((i(),r(C(n.stencilComponent),k({ref:"stencil",image:c.image,coordinates:s.coordinates,"stencil-coordinates":c.stencilCoordinates,transitions:c.transitionsOptions},n.stencilProps,{onResize:c.onResize,onResizeEnd:c.onResizeEnd,onMove:c.onMove,onMoveEnd:c.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[E,s.imageLoaded]]),n.canvas?(i(),r("canvas",Xr,null,512)):u("",!0),n.canvas?(i(),r("canvas",qr,null,512)):u("",!0)]})),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};var Zr,Gr,Kr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qr={exports:{}};Zr=Qr,Gr=Qr.exports,function(){var t,e="Expected a function",n="__lodash_hash_undefined__",i="__lodash_placeholder__",r=16,o=32,a=64,s=128,l=256,u=1/0,c=9007199254740991,h=NaN,d=4294967295,f=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",r],["flip",512],["partial",o],["partialRight",a],["rearg",l]],p="[object Arguments]",g="[object Array]",m="[object Boolean]",v="[object Date]",b="[object Error]",y="[object Function]",w="[object GeneratorFunction]",x="[object Map]",_="[object Number]",S="[object Object]",A="[object Promise]",C="[object RegExp]",z="[object Set]",E="[object String]",k="[object Symbol]",R="[object WeakMap]",D="[object ArrayBuffer]",M="[object DataView]",T="[object Float32Array]",I="[object Float64Array]",O="[object Int8Array]",j="[object Int16Array]",$="[object Int32Array]",P="[object Uint8Array]",L="[object Uint8ClampedArray]",W="[object Uint16Array]",B="[object Uint32Array]",V=/\b__p \+= '';/g,N=/\b(__p \+=) '' \+/g,U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,F=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,Y=RegExp(F.source),X=RegExp(H.source),q=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,G=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt=/[\\^$.*+?()[\]{}|]/g,et=RegExp(tt.source),nt=/^\s+/,it=/\s/,rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,st=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ht=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,pt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,yt=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_t="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",Ct="\\ufe0e\\ufe0f",zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Et="['â€™]",kt="["+wt+"]",Rt="["+zt+"]",Dt="["+xt+"]",Mt="\\d+",Tt="["+_t+"]",It="["+St+"]",Ot="[^"+wt+zt+Mt+_t+St+At+"]",jt="\\ud83c[\\udffb-\\udfff]",$t="[^"+wt+"]",Pt="(?:\\ud83c[\\udde6-\\uddff]){2}",Lt="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+At+"]",Bt="\\u200d",Vt="(?:"+It+"|"+Ot+")",Nt="(?:"+Wt+"|"+Ot+")",Ut="(?:['â€™](?:d|ll|m|re|s|t|ve))?",Ft="(?:['â€™](?:D|LL|M|RE|S|T|VE))?",Ht="(?:"+Dt+"|"+jt+")?",Yt="["+Ct+"]?",Xt=Yt+Ht+"(?:"+Bt+"(?:"+[$t,Pt,Lt].join("|")+")"+Yt+Ht+")*",qt="(?:"+[Tt,Pt,Lt].join("|")+")"+Xt,Zt="(?:"+[$t+Dt+"?",Dt,Pt,Lt,kt].join("|")+")",Gt=RegExp(Et,"g"),Kt=RegExp(Dt,"g"),Qt=RegExp(jt+"(?="+jt+")|"+Zt+Xt,"g"),Jt=RegExp([Wt+"?"+It+"+"+Ut+"(?="+[Rt,Wt,"$"].join("|")+")",Nt+"+"+Ft+"(?="+[Rt,Wt+Vt,"$"].join("|")+")",Wt+"?"+Vt+"+"+Ut,Wt+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,qt].join("|"),"g"),te=RegExp("["+Bt+wt+xt+Ct+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,re={};re[T]=re[I]=re[O]=re[j]=re[$]=re[P]=re[L]=re[W]=re[B]=!0,re[p]=re[g]=re[D]=re[m]=re[M]=re[v]=re[b]=re[y]=re[x]=re[_]=re[S]=re[C]=re[z]=re[E]=re[R]=!1;var oe={};oe[p]=oe[g]=oe[D]=oe[M]=oe[m]=oe[v]=oe[T]=oe[I]=oe[O]=oe[j]=oe[$]=oe[x]=oe[_]=oe[S]=oe[C]=oe[z]=oe[E]=oe[k]=oe[P]=oe[L]=oe[W]=oe[B]=!0,oe[b]=oe[y]=oe[R]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,le=parseInt,ue="object"==typeof Kr&&Kr&&Kr.Object===Object&&Kr,ce="object"==typeof self&&self&&self.Object===Object&&self,he=ue||ce||Function("return this")(),de=Gr&&!Gr.nodeType&&Gr,fe=de&&Zr&&!Zr.nodeType&&Zr,pe=fe&&fe.exports===de,ge=pe&&ue.process,me=function(){try{var t=fe&&fe.require&&fe.require("util").types;return t||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),ve=me&&me.isArrayBuffer,be=me&&me.isDate,ye=me&&me.isMap,we=me&&me.isRegExp,xe=me&&me.isSet,_e=me&&me.isTypedArray;function Se(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ae(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function Ce(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function ze(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ee(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ke(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Re(t,e){return!(null==t||!t.length)&&We(t,e,0)>-1}function De(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Me(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Te(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Ie(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Oe(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function je(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var $e=Ue("length");function Pe(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Le(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function We(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Le(t,Ve,n)}function Be(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Ve(t){return t!=t}function Ne(t,e){var n=null==t?0:t.length;return n?Ye(t,e)/n:h}function Ue(e){return function(n){return null==n?t:n[e]}}function Fe(e){return function(n){return null==e?t:e[n]}}function He(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function Ye(e,n){for(var i,r=-1,o=e.length;++r<o;){var a=n(e[r]);a!==t&&(i=i===t?a:i+a)}return i}function Xe(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function qe(t){return t?t.slice(0,dn(t)+1).replace(nt,""):t}function Ze(t){return function(e){return t(e)}}function Ge(t,e){return Me(e,(function(e){return t[e]}))}function Ke(t,e){return t.has(e)}function Qe(t,e){for(var n=-1,i=t.length;++n<i&&We(e,t[n],0)>-1;);return n}function Je(t,e){for(var n=t.length;n--&&We(e,t[n],0)>-1;);return n}var tn=Fe({"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss","Ä€":"A","Ä‚":"A","Ä„":"A","Ä":"a","Äƒ":"a","Ä…":"a","Ä†":"C","Äˆ":"C","ÄŠ":"C","ÄŒ":"C","Ä‡":"c","Ä‰":"c","Ä‹":"c","Ä":"c","ÄŽ":"D","Ä":"D","Ä":"d","Ä‘":"d","Ä’":"E","Ä”":"E","Ä–":"E","Ä˜":"E","Äš":"E","Ä“":"e","Ä•":"e","Ä—":"e","Ä™":"e","Ä›":"e","Äœ":"G","Äž":"G","Ä ":"G","Ä¢":"G","Ä":"g","ÄŸ":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å€":"l","Å‚":"l","Åƒ":"N","Å…":"N","Å‡":"N","ÅŠ":"N","Å„":"n","Å†":"n","Åˆ":"n","Å‹":"n","ÅŒ":"O","ÅŽ":"O","Å":"O","Å":"o","Å":"o","Å‘":"o","Å”":"R","Å–":"R","Å˜":"R","Å•":"r","Å—":"r","Å™":"r","Åš":"S","Åœ":"S","Åž":"S","Å ":"S","Å›":"s","Å":"s","ÅŸ":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å’":"Oe","Å“":"oe","Å‰":"'n","Å¿":"s"}),en=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+ae[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function an(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,r=t.length,o=0,a=[];++n<r;){var s=t[n];s!==e&&s!==i||(t[n]=i,a[o++]=n)}return a}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function cn(t){return rn(t)?function(t){for(var e=Qt.lastIndex=0;Qt.test(t);)++e;return e}(t):$e(t)}function hn(t){return rn(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}function dn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var fn=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function it(wt){var xt,_t=(wt=null==wt?he:pn.defaults(he.Object(),wt,pn.pick(he,ne))).Array,St=wt.Date,At=wt.Error,Ct=wt.Function,zt=wt.Math,Et=wt.Object,kt=wt.RegExp,Rt=wt.String,Dt=wt.TypeError,Mt=_t.prototype,Tt=Ct.prototype,It=Et.prototype,Ot=wt["__core-js_shared__"],jt=Tt.toString,$t=It.hasOwnProperty,Pt=0,Lt=(xt=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+xt:"",Wt=It.toString,Bt=jt.call(Et),Vt=he._,Nt=kt("^"+jt.call($t).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=pe?wt.Buffer:t,Ft=wt.Symbol,Ht=wt.Uint8Array,Yt=Ut?Ut.allocUnsafe:t,Xt=an(Et.getPrototypeOf,Et),qt=Et.create,Zt=It.propertyIsEnumerable,Qt=Mt.splice,te=Ft?Ft.isConcatSpreadable:t,ae=Ft?Ft.iterator:t,ue=Ft?Ft.toStringTag:t,ce=function(){try{var t=fo(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),de=wt.clearTimeout!==he.clearTimeout&&wt.clearTimeout,fe=St&&St.now!==he.Date.now&&St.now,ge=wt.setTimeout!==he.setTimeout&&wt.setTimeout,me=zt.ceil,$e=zt.floor,Fe=Et.getOwnPropertySymbols,gn=Ut?Ut.isBuffer:t,mn=wt.isFinite,vn=Mt.join,bn=an(Et.keys,Et),yn=zt.max,wn=zt.min,xn=St.now,_n=wt.parseInt,Sn=zt.random,An=Mt.reverse,Cn=fo(wt,"DataView"),zn=fo(wt,"Map"),En=fo(wt,"Promise"),kn=fo(wt,"Set"),Rn=fo(wt,"WeakMap"),Dn=fo(Et,"create"),Mn=Rn&&new Rn,Tn={},In=Wo(Cn),On=Wo(zn),jn=Wo(En),$n=Wo(kn),Pn=Wo(Rn),Ln=Ft?Ft.prototype:t,Wn=Ln?Ln.valueOf:t,Bn=Ln?Ln.toString:t;function Vn(t){if(ns(t)&&!Ha(t)&&!(t instanceof Hn)){if(t instanceof Fn)return t;if($t.call(t,"__wrapped__"))return Bo(t)}return new Fn(t)}var Nn=function(){function e(){}return function(n){if(!es(n))return{};if(qt)return qt(n);e.prototype=n;var i=new e;return e.prototype=t,i}}();function Un(){}function Fn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new qn;++e<n;)this.add(t[e])}function Gn(t){var e=this.__data__=new Xn(t);this.size=e.size}function Kn(t,e){var n=Ha(t),i=!n&&Fa(t),r=!n&&!i&&Za(t),o=!n&&!i&&!r&&cs(t),a=n||i||r||o,s=a?Xe(t.length,Rt):[],l=s.length;for(var u in t)!e&&!$t.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wo(u,l))||s.push(u);return s}function Qn(e){var n=e.length;return n?e[Zi(0,n-1)]:t}function Jn(t,e){return $o(Dr(t),li(e,0,t.length))}function ti(t){return $o(Dr(t))}function ei(e,n,i){(i!==t&&!Va(e[n],i)||i===t&&!(n in e))&&ai(e,n,i)}function ni(e,n,i){var r=e[n];$t.call(e,n)&&Va(r,i)&&(i!==t||n in e)||ai(e,n,i)}function ii(t,e){for(var n=t.length;n--;)if(Va(t[n][0],e))return n;return-1}function ri(t,e,n,i){return fi(t,(function(t,r,o){e(i,t,n(t),o)})),i}function oi(t,e){return t&&Mr(e,Ts(e),t)}function ai(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function si(e,n){for(var i=-1,r=n.length,o=_t(r),a=null==e;++i<r;)o[i]=a?t:Es(e,n[i]);return o}function li(e,n,i){return e==e&&(i!==t&&(e=e<=i?e:i),n!==t&&(e=e>=n?e:n)),e}function ui(e,n,i,r,o,a){var s,l=1&n,u=2&n,c=4&n;if(i&&(s=o?i(e,r,o,a):i(e)),s!==t)return s;if(!es(e))return e;var h=Ha(e);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&$t.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return Dr(e,s)}else{var d=mo(e),f=d==y||d==w;if(Za(e))return Ar(e,l);if(d==S||d==p||f&&!o){if(s=u||f?{}:bo(e),!l)return u?function(t,e){return Mr(t,go(t),e)}(e,function(t,e){return t&&Mr(e,Is(e),t)}(s,e)):function(t,e){return Mr(t,po(t),e)}(e,oi(s,e))}else{if(!oe[d])return o?e:{};s=function(t,e,n){var i,r=t.constructor;switch(e){case D:return Cr(t);case m:case v:return new r(+t);case M:return function(t,e){var n=e?Cr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case T:case I:case O:case j:case $:case P:case L:case W:case B:return zr(t,n);case x:return new r;case _:case E:return new r(t);case C:return function(t){var e=new t.constructor(t.source,ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case z:return new r;case k:return i=t,Wn?Et(Wn.call(i)):{}}}(e,d,l)}}a||(a=new Gn);var g=a.get(e);if(g)return g;a.set(e,s),ss(e)?e.forEach((function(t){s.add(ui(t,n,i,t,e,a))})):is(e)&&e.forEach((function(t,r){s.set(r,ui(t,n,i,r,e,a))}));var b=h?t:(c?u?oo:ro:u?Is:Ts)(e);return Ce(b||e,(function(t,r){b&&(t=e[r=t]),ni(s,r,ui(t,n,i,r,e,a))})),s}function ci(e,n,i){var r=i.length;if(null==e)return!r;for(e=Et(e);r--;){var o=i[r],a=n[o],s=e[o];if(s===t&&!(o in e)||!a(s))return!1}return!0}function hi(n,i,r){if("function"!=typeof n)throw new Dt(e);return To((function(){n.apply(t,r)}),i)}function di(t,e,n,i){var r=-1,o=Re,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=Me(e,Ze(n))),i?(o=De,a=!1):e.length>=200&&(o=Ke,a=!1,e=new Zn(e));t:for(;++r<s;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,a&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;l.push(c)}else o(e,h,i)||l.push(c)}return l}Vn.templateSettings={escape:q,evaluate:Z,interpolate:G,variable:"",imports:{_:Vn}},Vn.prototype=Un.prototype,Vn.prototype.constructor=Vn,Fn.prototype=Nn(Un.prototype),Fn.prototype.constructor=Fn,Hn.prototype=Nn(Un.prototype),Hn.prototype.constructor=Hn,Yn.prototype.clear=function(){this.__data__=Dn?Dn(null):{},this.size=0},Yn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Yn.prototype.get=function(e){var i=this.__data__;if(Dn){var r=i[e];return r===n?t:r}return $t.call(i,e)?i[e]:t},Yn.prototype.has=function(e){var n=this.__data__;return Dn?n[e]!==t:$t.call(n,e)},Yn.prototype.set=function(e,i){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Dn&&i===t?n:i,this},Xn.prototype.clear=function(){this.__data__=[],this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=ii(e,t);return!(n<0||(n==e.length-1?e.pop():Qt.call(e,n,1),--this.size,0))},Xn.prototype.get=function(e){var n=this.__data__,i=ii(n,e);return i<0?t:n[i][1]},Xn.prototype.has=function(t){return ii(this.__data__,t)>-1},Xn.prototype.set=function(t,e){var n=this.__data__,i=ii(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(zn||Xn),string:new Yn}},qn.prototype.delete=function(t){var e=co(this,t).delete(t);return this.size-=e?1:0,e},qn.prototype.get=function(t){return co(this,t).get(t)},qn.prototype.has=function(t){return co(this,t).has(t)},qn.prototype.set=function(t,e){var n=co(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Zn.prototype.add=Zn.prototype.push=function(t){return this.__data__.set(t,n),this},Zn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.clear=function(){this.__data__=new Xn,this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Gn.prototype.get=function(t){return this.__data__.get(t)},Gn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Xn){var i=n.__data__;if(!zn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new qn(i)}return n.set(t,e),this.size=n.size,this};var fi=Or(xi),pi=Or(_i,!0);function gi(t,e){var n=!0;return fi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function mi(e,n,i){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=n(a);if(null!=s&&(l===t?s==s&&!us(s):i(s,l)))var l=s,u=a}return u}function vi(t,e){var n=[];return fi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function bi(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=yo),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?bi(s,e-1,n,i,r):Te(r,s):i||(r[r.length]=s)}return r}var yi=jr(),wi=jr(!0);function xi(t,e){return t&&yi(t,e,Ts)}function _i(t,e){return t&&wi(t,e,Ts)}function Si(t,e){return ke(e,(function(e){return Qa(t[e])}))}function Ai(e,n){for(var i=0,r=(n=wr(n,e)).length;null!=e&&i<r;)e=e[Lo(n[i++])];return i&&i==r?e:t}function Ci(t,e,n){var i=e(t);return Ha(t)?i:Te(i,n(t))}function zi(e){return null==e?e===t?"[object Undefined]":"[object Null]":ue&&ue in Et(e)?function(e){var n=$t.call(e,ue),i=e[ue];try{e[ue]=t;var r=!0}catch(t){}var o=Wt.call(e);return r&&(n?e[ue]=i:delete e[ue]),o}(e):function(t){return Wt.call(t)}(e)}function Ei(t,e){return t>e}function ki(t,e){return null!=t&&$t.call(t,e)}function Ri(t,e){return null!=t&&e in Et(t)}function Di(e,n,i){for(var r=i?De:Re,o=e[0].length,a=e.length,s=a,l=_t(a),u=1/0,c=[];s--;){var h=e[s];s&&n&&(h=Me(h,Ze(n))),u=wn(h.length,u),l[s]=!i&&(n||o>=120&&h.length>=120)?new Zn(s&&h):t}h=e[0];var d=-1,f=l[0];t:for(;++d<o&&c.length<u;){var p=h[d],g=n?n(p):p;if(p=i||0!==p?p:0,!(f?Ke(f,g):r(c,g,i))){for(s=a;--s;){var m=l[s];if(!(m?Ke(m,g):r(e[s],g,i)))continue t}f&&f.push(g),c.push(p)}}return c}function Mi(e,n,i){var r=null==(e=Ro(e,n=wr(n,e)))?e:e[Lo(Ko(n))];return null==r?t:Se(r,e,i)}function Ti(t){return ns(t)&&zi(t)==p}function Ii(e,n,i,r,o){return e===n||(null==e||null==n||!ns(e)&&!ns(n)?e!=e&&n!=n:function(e,n,i,r,o,a){var s=Ha(e),l=Ha(n),u=s?g:mo(e),c=l?g:mo(n),h=(u=u==p?S:u)==S,d=(c=c==p?S:c)==S,f=u==c;if(f&&Za(e)){if(!Za(n))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new Gn),s||cs(e)?no(e,n,i,r,o,a):function(t,e,n,i,r,o,a){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case m:case v:case _:return Va(+t,+e);case b:return t.name==e.name&&t.message==e.message;case C:case E:return t==e+"";case x:var s=on;case z:var l=1&i;if(s||(s=ln),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;i|=2,a.set(t,e);var c=no(s(t),s(e),i,r,o,a);return a.delete(t),c;case k:if(Wn)return Wn.call(t)==Wn.call(e)}return!1}(e,n,u,i,r,o,a);if(!(1&i)){var y=h&&$t.call(e,"__wrapped__"),w=d&&$t.call(n,"__wrapped__");if(y||w){var A=y?e.value():e,R=w?n.value():n;return a||(a=new Gn),o(A,R,i,r,a)}}return!!f&&(a||(a=new Gn),function(e,n,i,r,o,a){var s=1&i,l=ro(e),u=l.length,c=ro(n),h=c.length;if(u!=h&&!s)return!1;for(var d=u;d--;){var f=l[d];if(!(s?f in n:$t.call(n,f)))return!1}var p=a.get(e),g=a.get(n);if(p&&g)return p==n&&g==e;var m=!0;a.set(e,n),a.set(n,e);for(var v=s;++d<u;){var b=e[f=l[d]],y=n[f];if(r)var w=s?r(y,b,f,n,e,a):r(b,y,f,e,n,a);if(!(w===t?b===y||o(b,y,i,r,a):w)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=e.constructor,_=n.constructor;x==_||!("constructor"in e)||!("constructor"in n)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(m=!1)}return a.delete(e),a.delete(n),m}(e,n,i,r,o,a))}(e,n,i,r,Ii,o))}function Oi(e,n,i,r){var o=i.length,a=o,s=!r;if(null==e)return!a;for(e=Et(e);o--;){var l=i[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var u=(l=i[o])[0],c=e[u],h=l[1];if(s&&l[2]){if(c===t&&!(u in e))return!1}else{var d=new Gn;if(r)var f=r(c,h,u,e,n,d);if(!(f===t?Ii(h,c,3,r,d):f))return!1}}return!0}function ji(t){return!(!es(t)||(e=t,Lt&&Lt in e))&&(Qa(t)?Nt:pt).test(Wo(t));var e}function $i(t){return"function"==typeof t?t:null==t?rl:"object"==typeof t?Ha(t)?Ni(t[0],t[1]):Vi(t):fl(t)}function Pi(t){if(!Co(t))return bn(t);var e=[];for(var n in Et(t))$t.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Li(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var i in t)("constructor"!=i||!e&&$t.call(t,i))&&n.push(i);return n}function Wi(t,e){return t<e}function Bi(t,e){var n=-1,i=Xa(t)?_t(t.length):[];return fi(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Vi(t){var e=ho(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||Oi(n,t,e)}}function Ni(e,n){return _o(e)&&zo(n)?Eo(Lo(e),n):function(i){var r=Es(i,e);return r===t&&r===n?ks(i,e):Ii(n,r,3)}}function Ui(e,n,i,r,o){e!==n&&yi(n,(function(a,s){if(o||(o=new Gn),es(a))!function(e,n,i,r,o,a,s){var l=Do(e,i),u=Do(n,i),c=s.get(u);if(c)ei(e,i,c);else{var h=a?a(l,u,i+"",e,n,s):t,d=h===t;if(d){var f=Ha(u),p=!f&&Za(u),g=!f&&!p&&cs(u);h=u,f||p||g?Ha(l)?h=l:qa(l)?h=Dr(l):p?(d=!1,h=Ar(u,!0)):g?(d=!1,h=zr(u,!0)):h=[]:os(u)||Fa(u)?(h=l,Fa(l)?h=bs(l):es(l)&&!Qa(l)||(h=bo(u))):d=!1}d&&(s.set(u,h),o(h,u,r,a,s),s.delete(u)),ei(e,i,h)}}(e,n,s,i,Ui,r,o);else{var l=r?r(Do(e,s),a,s+"",e,n,o):t;l===t&&(l=a),ei(e,s,l)}}),Is)}function Fi(e,n){var i=e.length;if(i)return wo(n+=n<0?i:0,i)?e[n]:t}function Hi(t,e,n){e=e.length?Me(e,(function(t){return Ha(t)?function(e){return Ai(e,1===t.length?t[0]:t)}:t})):[rl];var i=-1;e=Me(e,Ze(uo()));var r=Bi(t,(function(t,n,r){var o=Me(e,(function(e){return e(t)}));return{criteria:o,index:++i,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(r,(function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=Er(r[i],o[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}))}function Yi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=Ai(t,a);n(s,a)&&tr(o,wr(a,t),s)}return o}function Xi(t,e,n,i){var r=i?Be:We,o=-1,a=e.length,s=t;for(t===e&&(e=Dr(e)),n&&(s=Me(t,Ze(n)));++o<a;)for(var l=0,u=e[o],c=n?n(u):u;(l=r(s,c,l,i))>-1;)s!==t&&Qt.call(s,l,1),Qt.call(t,l,1);return t}function qi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;wo(r)?Qt.call(t,r,1):dr(t,r)}}return t}function Zi(t,e){return t+$e(Sn()*(e-t+1))}function Gi(t,e){var n="";if(!t||e<1||e>c)return n;do{e%2&&(n+=t),(e=$e(e/2))&&(t+=t)}while(e);return n}function Ki(t,e){return Io(ko(t,e,rl),t+"")}function Qi(t){return Qn(Vs(t))}function Ji(t,e){var n=Vs(t);return $o(n,li(e,0,n.length))}function tr(e,n,i,r){if(!es(e))return e;for(var o=-1,a=(n=wr(n,e)).length,s=a-1,l=e;null!=l&&++o<a;){var u=Lo(n[o]),c=i;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var h=l[u];(c=r?r(h,u,l):t)===t&&(c=es(h)?h:wo(n[o+1])?[]:{})}ni(l,u,c),l=l[u]}return e}var er=Mn?function(t,e){return Mn.set(t,e),t}:rl,nr=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:rl;function ir(t){return $o(Vs(t))}function rr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=_t(r);++i<r;)o[i]=t[i+e];return o}function or(t,e){var n;return fi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function ar(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!us(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return sr(t,e,rl,n)}function sr(e,n,i,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(n=i(n))!=n,l=null===n,u=us(n),c=n===t;o<a;){var h=$e((o+a)/2),d=i(e[h]),f=d!==t,p=null===d,g=d==d,m=us(d);if(s)var v=r||g;else v=c?g&&(r||f):l?g&&f&&(r||!p):u?g&&f&&!p&&(r||!m):!p&&!m&&(r?d<=n:d<n);v?o=h+1:a=h}return wn(a,4294967294)}function lr(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!Va(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function ur(t){return"number"==typeof t?t:us(t)?h:+t}function cr(t){if("string"==typeof t)return t;if(Ha(t))return Me(t,cr)+"";if(us(t))return Bn?Bn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function hr(t,e,n){var i=-1,r=Re,o=t.length,a=!0,s=[],l=s;if(n)a=!1,r=De;else if(o>=200){var u=e?null:Gr(t);if(u)return ln(u);a=!1,r=Ke,l=new Zn}else l=e?[]:s;t:for(;++i<o;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(c)}else r(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}function dr(t,e){return null==(t=Ro(t,e=wr(e,t)))||delete t[Lo(Ko(e))]}function fr(t,e,n,i){return tr(t,e,n(Ai(t,e)),i)}function pr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?rr(t,i?0:o,i?o+1:r):rr(t,i?o+1:0,i?r:o)}function gr(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Ie(e,(function(t,e){return e.func.apply(e.thisArg,Te([t],e.args))}),n)}function mr(t,e,n){var i=t.length;if(i<2)return i?hr(t[0]):[];for(var r=-1,o=_t(i);++r<i;)for(var a=t[r],s=-1;++s<i;)s!=r&&(o[r]=di(o[r]||a,t[s],e,n));return hr(bi(o,1),e,n)}function vr(e,n,i){for(var r=-1,o=e.length,a=n.length,s={};++r<o;){var l=r<a?n[r]:t;i(s,e[r],l)}return s}function br(t){return qa(t)?t:[]}function yr(t){return"function"==typeof t?t:rl}function wr(t,e){return Ha(t)?t:_o(t,e)?[t]:Po(ys(t))}var xr=Ki;function _r(e,n,i){var r=e.length;return i=i===t?r:i,!n&&i>=r?e:rr(e,n,i)}var Sr=de||function(t){return he.clearTimeout(t)};function Ar(t,e){if(e)return t.slice();var n=t.length,i=Yt?Yt(n):new t.constructor(n);return t.copy(i),i}function Cr(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function zr(t,e){var n=e?Cr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Er(e,n){if(e!==n){var i=e!==t,r=null===e,o=e==e,a=us(e),s=n!==t,l=null===n,u=n==n,c=us(n);if(!l&&!c&&!a&&e>n||a&&s&&u&&!l&&!c||r&&s&&u||!i&&u||!o)return 1;if(!r&&!a&&!c&&e<n||c&&i&&o&&!r&&!a||l&&i&&o||!s&&o||!u)return-1}return 0}function kr(t,e,n,i){for(var r=-1,o=t.length,a=n.length,s=-1,l=e.length,u=yn(o-a,0),c=_t(l+u),h=!i;++s<l;)c[s]=e[s];for(;++r<a;)(h||r<o)&&(c[n[r]]=t[r]);for(;u--;)c[s++]=t[r++];return c}function Rr(t,e,n,i){for(var r=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,c=yn(o-s,0),h=_t(c+u),d=!i;++r<c;)h[r]=t[r];for(var f=r;++l<u;)h[f+l]=e[l];for(;++a<s;)(d||r<o)&&(h[f+n[a]]=t[r++]);return h}function Dr(t,e){var n=-1,i=t.length;for(e||(e=_t(i));++n<i;)e[n]=t[n];return e}function Mr(e,n,i,r){var o=!i;i||(i={});for(var a=-1,s=n.length;++a<s;){var l=n[a],u=r?r(i[l],e[l],l,i,e):t;u===t&&(u=e[l]),o?ai(i,l,u):ni(i,l,u)}return i}function Tr(t,e){return function(n,i){var r=Ha(n)?Ae:ri,o=e?e():{};return r(n,t,uo(i,2),o)}}function Ir(e){return Ki((function(n,i){var r=-1,o=i.length,a=o>1?i[o-1]:t,s=o>2?i[2]:t;for(a=e.length>3&&"function"==typeof a?(o--,a):t,s&&xo(i[0],i[1],s)&&(a=o<3?t:a,o=1),n=Et(n);++r<o;){var l=i[r];l&&e(n,l,r,a)}return n}))}function Or(t,e){return function(n,i){if(null==n)return n;if(!Xa(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Et(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function jr(t){return function(e,n,i){for(var r=-1,o=Et(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}function $r(e){return function(n){var i=rn(n=ys(n))?hn(n):t,r=i?i[0]:n.charAt(0),o=i?_r(i,1).join(""):n.slice(1);return r[e]()+o}}function Pr(t){return function(e){return Ie(Qs(Fs(e).replace(Gt,"")),t,"")}}function Lr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Nn(t.prototype),i=t.apply(n,e);return es(i)?i:n}}function Wr(e){return function(n,i,r){var o=Et(n);if(!Xa(n)){var a=uo(i,3);n=Ts(n),i=function(t){return a(o[t],t,o)}}var s=e(n,i,r);return s>-1?o[a?n[s]:s]:t}}function Br(n){return io((function(i){var r=i.length,o=r,a=Fn.prototype.thru;for(n&&i.reverse();o--;){var s=i[o];if("function"!=typeof s)throw new Dt(e);if(a&&!l&&"wrapper"==so(s))var l=new Fn([],!0)}for(o=l?o:r;++o<r;){var u=so(s=i[o]),c="wrapper"==u?ao(s):t;l=c&&So(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[so(c[0])].apply(l,c[3]):1==s.length&&So(s)?l[u]():l.thru(s)}return function(){var t=arguments,e=t[0];if(l&&1==t.length&&Ha(e))return l.plant(e).value();for(var n=0,o=r?i[n].apply(this,t):e;++n<r;)o=i[n].call(this,o);return o}}))}function Vr(e,n,i,r,o,a,l,u,c,h){var d=n&s,f=1&n,p=2&n,g=24&n,m=512&n,v=p?t:Lr(e);return function s(){for(var b=arguments.length,y=_t(b),w=b;w--;)y[w]=arguments[w];if(g)var x=lo(s),_=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(y,x);if(r&&(y=kr(y,r,o,g)),a&&(y=Rr(y,a,l,g)),b-=_,g&&b<h){var S=sn(y,x);return qr(e,n,Vr,s.placeholder,i,y,S,u,c,h-b)}var A=f?i:this,C=p?A[e]:e;return b=y.length,u?y=function(e,n){for(var i=e.length,r=wn(n.length,i),o=Dr(e);r--;){var a=n[r];e[r]=wo(a,i)?o[a]:t}return e}(y,u):m&&b>1&&y.reverse(),d&&c<b&&(y.length=c),this&&this!==he&&this instanceof s&&(C=v||Lr(C)),C.apply(A,y)}}function Nr(t,e){return function(n,i){return function(t,e,n,i){return xi(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Ur(e,n){return function(i,r){var o;if(i===t&&r===t)return n;if(i!==t&&(o=i),r!==t){if(o===t)return r;"string"==typeof i||"string"==typeof r?(i=cr(i),r=cr(r)):(i=ur(i),r=ur(r)),o=e(i,r)}return o}}function Fr(t){return io((function(e){return e=Me(e,Ze(uo())),Ki((function(n){var i=this;return t(e,(function(t){return Se(t,i,n)}))}))}))}function Hr(e,n){var i=(n=n===t?" ":cr(n)).length;if(i<2)return i?Gi(n,e):n;var r=Gi(n,me(e/cn(n)));return rn(n)?_r(hn(r),0,e).join(""):r.slice(0,e)}function Yr(e){return function(n,i,r){return r&&"number"!=typeof r&&xo(n,i,r)&&(i=r=t),n=ps(n),i===t?(i=n,n=0):i=ps(i),function(t,e,n,i){for(var r=-1,o=yn(me((e-t)/(n||1)),0),a=_t(o);o--;)a[i?o:++r]=t,t+=n;return a}(n,i,r=r===t?n<i?1:-1:ps(r),e)}}function Xr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function qr(e,n,i,r,s,l,u,c,h,d){var f=8&n;n|=f?o:a,4&(n&=~(f?a:o))||(n&=-4);var p=[e,n,s,f?l:t,f?u:t,f?t:l,f?t:u,c,h,d],g=i.apply(t,p);return So(e)&&Mo(g,p),g.placeholder=r,Oo(g,e,n)}function Zr(t){var e=zt[t];return function(t,n){if(t=vs(t),(n=null==n?0:wn(gs(n),292))&&mn(t)){var i=(ys(t)+"e").split("e");return+((i=(ys(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Gr=kn&&1/ln(new kn([,-0]))[1]==u?function(t){return new kn(t)}:ul;function Kr(t){return function(e){var n=mo(e);return n==x?on(e):n==z?un(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qr(n,u,c,h,d,f,p,g){var m=2&u;if(!m&&"function"!=typeof n)throw new Dt(e);var v=h?h.length:0;if(v||(u&=-97,h=d=t),p=p===t?p:yn(gs(p),0),g=g===t?g:gs(g),v-=d?d.length:0,u&a){var b=h,y=d;h=d=t}var w=m?t:ao(n),x=[n,u,c,h,d,b,y,f,p,g];if(w&&function(t,e){var n=t[1],r=e[1],o=n|r,a=o<131,u=r==s&&8==n||r==s&&n==l&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!a&&!u)return t;1&r&&(t[2]=e[2],o|=1&n?0:4);var c=e[3];if(c){var h=t[3];t[3]=h?kr(h,c,e[4]):c,t[4]=h?sn(t[3],i):e[4]}(c=e[5])&&(h=t[5],t[5]=h?Rr(h,c,e[6]):c,t[6]=h?sn(t[5],i):e[6]),(c=e[7])&&(t[7]=c),r&s&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(x,w),n=x[0],u=x[1],c=x[2],h=x[3],d=x[4],!(g=x[9]=x[9]===t?m?0:n.length:yn(x[9]-v,0))&&24&u&&(u&=-25),u&&1!=u)_=8==u||u==r?function(e,n,i){var r=Lr(e);return function o(){for(var a=arguments.length,s=_t(a),l=a,u=lo(o);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:sn(s,u);return(a-=c.length)<i?qr(e,n,Vr,o.placeholder,t,s,c,t,t,i-a):Se(this&&this!==he&&this instanceof o?r:e,this,s)}}(n,u,g):u!=o&&33!=u||d.length?Vr.apply(t,x):function(t,e,n,i){var r=1&e,o=Lr(t);return function e(){for(var a=-1,s=arguments.length,l=-1,u=i.length,c=_t(u+s),h=this&&this!==he&&this instanceof e?o:t;++l<u;)c[l]=i[l];for(;s--;)c[l++]=arguments[++a];return Se(h,r?n:this,c)}}(n,u,c,h);else var _=function(t,e,n){var i=1&e,r=Lr(t);return function e(){return(this&&this!==he&&this instanceof e?r:t).apply(i?n:this,arguments)}}(n,u,c);return Oo((w?er:Mo)(_,x),n,u)}function Jr(e,n,i,r){return e===t||Va(e,It[i])&&!$t.call(r,i)?n:e}function to(e,n,i,r,o,a){return es(e)&&es(n)&&(a.set(n,e),Ui(e,n,t,to,a),a.delete(n)),e}function eo(e){return os(e)?t:e}function no(e,n,i,r,o,a){var s=1&i,l=e.length,u=n.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(e),h=a.get(n);if(c&&h)return c==n&&h==e;var d=-1,f=!0,p=2&i?new Zn:t;for(a.set(e,n),a.set(n,e);++d<l;){var g=e[d],m=n[d];if(r)var v=s?r(m,g,d,n,e,a):r(g,m,d,e,n,a);if(v!==t){if(v)continue;f=!1;break}if(p){if(!je(n,(function(t,e){if(!Ke(p,e)&&(g===t||o(g,t,i,r,a)))return p.push(e)}))){f=!1;break}}else if(g!==m&&!o(g,m,i,r,a)){f=!1;break}}return a.delete(e),a.delete(n),f}function io(e){return Io(ko(e,t,Yo),e+"")}function ro(t){return Ci(t,Ts,po)}function oo(t){return Ci(t,Is,go)}var ao=Mn?function(t){return Mn.get(t)}:ul;function so(t){for(var e=t.name+"",n=Tn[e],i=$t.call(Tn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function lo(t){return($t.call(Vn,"placeholder")?Vn:t).placeholder}function uo(){var t=Vn.iteratee||ol;return t=t===ol?$i:t,arguments.length?t(arguments[0],arguments[1]):t}function co(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function ho(t){for(var e=Ts(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,zo(r)]}return e}function fo(e,n){var i=function(e,n){return null==e?t:e[n]}(e,n);return ji(i)?i:t}var po=Fe?function(t){return null==t?[]:(t=Et(t),ke(Fe(t),(function(e){return Zt.call(t,e)})))}:ml,go=Fe?function(t){for(var e=[];t;)Te(e,po(t)),t=Xt(t);return e}:ml,mo=zi;function vo(t,e,n){for(var i=-1,r=(e=wr(e,t)).length,o=!1;++i<r;){var a=Lo(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ts(r)&&wo(a,r)&&(Ha(t)||Fa(t))}function bo(t){return"function"!=typeof t.constructor||Co(t)?{}:Nn(Xt(t))}function yo(t){return Ha(t)||Fa(t)||!!(te&&t&&t[te])}function wo(t,e){var n=typeof t;return!!(e=null==e?c:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function xo(t,e,n){if(!es(n))return!1;var i=typeof e;return!!("number"==i?Xa(n)&&wo(e,n.length):"string"==i&&e in n)&&Va(n[e],t)}function _o(t,e){if(Ha(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||Q.test(t)||!K.test(t)||null!=e&&t in Et(e)}function So(t){var e=so(t),n=Vn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var i=ao(n);return!!i&&t===i[0]}(Cn&&mo(new Cn(new ArrayBuffer(1)))!=M||zn&&mo(new zn)!=x||En&&mo(En.resolve())!=A||kn&&mo(new kn)!=z||Rn&&mo(new Rn)!=R)&&(mo=function(e){var n=zi(e),i=n==S?e.constructor:t,r=i?Wo(i):"";if(r)switch(r){case In:return M;case On:return x;case jn:return A;case $n:return z;case Pn:return R}return n});var Ao=Ot?Qa:vl;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)}function zo(t){return t==t&&!es(t)}function Eo(e,n){return function(i){return null!=i&&i[e]===n&&(n!==t||e in Et(i))}}function ko(e,n,i){return n=yn(n===t?e.length-1:n,0),function(){for(var t=arguments,r=-1,o=yn(t.length-n,0),a=_t(o);++r<o;)a[r]=t[n+r];r=-1;for(var s=_t(n+1);++r<n;)s[r]=t[r];return s[n]=i(a),Se(e,this,s)}}function Ro(t,e){return e.length<2?t:Ai(t,rr(e,0,-1))}function Do(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Mo=jo(er),To=ge||function(t,e){return he.setTimeout(t,e)},Io=jo(nr);function Oo(t,e,n){var i=e+"";return Io(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(rt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Ce(f,(function(n){var i="_."+n[0];e&n[1]&&!Re(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(at):[]}(i),n)))}function jo(e){var n=0,i=0;return function(){var r=xn(),o=16-(r-i);if(i=r,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function $o(e,n){var i=-1,r=e.length,o=r-1;for(n=n===t?r:n;++i<n;){var a=Zi(i,o),s=e[a];e[a]=e[i],e[i]=s}return e.length=n,e}var Po=function(t){var e=ja(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(J,(function(t,n,i,r){e.push(i?r.replace(ut,"$1"):n||t)})),e}));function Lo(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Wo(t){if(null!=t){try{return jt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bo(t){if(t instanceof Hn)return t.clone();var e=new Fn(t.__wrapped__,t.__chain__);return e.__actions__=Dr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vo=Ki((function(t,e){return qa(t)?di(t,bi(e,1,qa,!0)):[]})),No=Ki((function(e,n){var i=Ko(n);return qa(i)&&(i=t),qa(e)?di(e,bi(n,1,qa,!0),uo(i,2)):[]})),Uo=Ki((function(e,n){var i=Ko(n);return qa(i)&&(i=t),qa(e)?di(e,bi(n,1,qa,!0),t,i):[]}));function Fo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:gs(n);return r<0&&(r=yn(i+r,0)),Le(t,uo(e,3),r)}function Ho(e,n,i){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return i!==t&&(o=gs(i),o=i<0?yn(r+o,0):wn(o,r-1)),Le(e,uo(n,3),o,!0)}function Yo(t){return null!=t&&t.length?bi(t,1):[]}function Xo(e){return e&&e.length?e[0]:t}var qo=Ki((function(t){var e=Me(t,br);return e.length&&e[0]===t[0]?Di(e):[]})),Zo=Ki((function(e){var n=Ko(e),i=Me(e,br);return n===Ko(i)?n=t:i.pop(),i.length&&i[0]===e[0]?Di(i,uo(n,2)):[]})),Go=Ki((function(e){var n=Ko(e),i=Me(e,br);return(n="function"==typeof n?n:t)&&i.pop(),i.length&&i[0]===e[0]?Di(i,t,n):[]}));function Ko(e){var n=null==e?0:e.length;return n?e[n-1]:t}var Qo=Ki(Jo);function Jo(t,e){return t&&t.length&&e&&e.length?Xi(t,e):t}var ta=io((function(t,e){var n=null==t?0:t.length,i=si(t,e);return qi(t,Me(e,(function(t){return wo(t,n)?+t:t})).sort(Er)),i}));function ea(t){return null==t?t:An.call(t)}var na=Ki((function(t){return hr(bi(t,1,qa,!0))})),ia=Ki((function(e){var n=Ko(e);return qa(n)&&(n=t),hr(bi(e,1,qa,!0),uo(n,2))})),ra=Ki((function(e){var n=Ko(e);return n="function"==typeof n?n:t,hr(bi(e,1,qa,!0),t,n)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=ke(t,(function(t){if(qa(t))return e=yn(t.length,e),!0})),Xe(e,(function(e){return Me(t,Ue(e))}))}function aa(e,n){if(!e||!e.length)return[];var i=oa(e);return null==n?i:Me(i,(function(e){return Se(n,t,e)}))}var sa=Ki((function(t,e){return qa(t)?di(t,e):[]})),la=Ki((function(t){return mr(ke(t,qa))})),ua=Ki((function(e){var n=Ko(e);return qa(n)&&(n=t),mr(ke(e,qa),uo(n,2))})),ca=Ki((function(e){var n=Ko(e);return n="function"==typeof n?n:t,mr(ke(e,qa),t,n)})),ha=Ki(oa),da=Ki((function(e){var n=e.length,i=n>1?e[n-1]:t;return i="function"==typeof i?(e.pop(),i):t,aa(e,i)}));function fa(t){var e=Vn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var ga=io((function(e){var n=e.length,i=n?e[0]:0,r=this.__wrapped__,o=function(t){return si(t,e)};return!(n>1||this.__actions__.length)&&r instanceof Hn&&wo(i)?((r=r.slice(i,+i+(n?1:0))).__actions__.push({func:pa,args:[o],thisArg:t}),new Fn(r,this.__chain__).thru((function(e){return n&&!e.length&&e.push(t),e}))):this.thru(o)})),ma=Tr((function(t,e,n){$t.call(t,n)?++t[n]:ai(t,n,1)})),va=Wr(Fo),ba=Wr(Ho);function ya(t,e){return(Ha(t)?Ce:fi)(t,uo(e,3))}function wa(t,e){return(Ha(t)?ze:pi)(t,uo(e,3))}var xa=Tr((function(t,e,n){$t.call(t,n)?t[n].push(e):ai(t,n,[e])})),_a=Ki((function(t,e,n){var i=-1,r="function"==typeof e,o=Xa(t)?_t(t.length):[];return fi(t,(function(t){o[++i]=r?Se(e,t,n):Mi(t,e,n)})),o})),Sa=Tr((function(t,e,n){ai(t,n,e)}));function Aa(t,e){return(Ha(t)?Me:Bi)(t,uo(e,3))}var Ca=Tr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),za=Ki((function(t,e){if(null==t)return[];var n=e.length;return n>1&&xo(t,e[0],e[1])?e=[]:n>2&&xo(e[0],e[1],e[2])&&(e=[e[0]]),Hi(t,bi(e,1),[])})),Ea=fe||function(){return he.Date.now()};function ka(e,n,i){return n=i?t:n,n=e&&null==n?e.length:n,Qr(e,s,t,t,t,t,n)}function Ra(n,i){var r;if("function"!=typeof i)throw new Dt(e);return n=gs(n),function(){return--n>0&&(r=i.apply(this,arguments)),n<=1&&(i=t),r}}var Da=Ki((function(t,e,n){var i=1;if(n.length){var r=sn(n,lo(Da));i|=o}return Qr(t,i,e,n,r)})),Ma=Ki((function(t,e,n){var i=3;if(n.length){var r=sn(n,lo(Ma));i|=o}return Qr(e,i,t,n,r)}));function Ta(n,i,r){var o,a,s,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof n)throw new Dt(e);function g(e){var i=o,r=a;return o=a=t,h=e,l=n.apply(r,i)}function m(e){var n=e-c;return c===t||n>=i||n<0||f&&e-h>=s}function v(){var t=Ea();if(m(t))return b(t);u=To(v,function(t){var e=i-(t-c);return f?wn(e,s-(t-h)):e}(t))}function b(e){return u=t,p&&o?g(e):(o=a=t,l)}function y(){var e=Ea(),n=m(e);if(o=arguments,a=this,c=e,n){if(u===t)return function(t){return h=t,u=To(v,i),d?g(t):l}(c);if(f)return Sr(u),u=To(v,i),g(c)}return u===t&&(u=To(v,i)),l}return i=vs(i)||0,es(r)&&(d=!!r.leading,s=(f="maxWait"in r)?yn(vs(r.maxWait)||0,i):s,p="trailing"in r?!!r.trailing:p),y.cancel=function(){u!==t&&Sr(u),h=0,o=c=a=u=t},y.flush=function(){return u===t?l:b(Ea())},y}var Ia=Ki((function(t,e){return hi(t,1,e)})),Oa=Ki((function(t,e,n){return hi(t,vs(e)||0,n)}));function ja(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new Dt(e);var i=function(){var e=arguments,r=n?n.apply(this,e):e[0],o=i.cache;if(o.has(r))return o.get(r);var a=t.apply(this,e);return i.cache=o.set(r,a)||o,a};return i.cache=new(ja.Cache||qn),i}function $a(t){if("function"!=typeof t)throw new Dt(e);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ja.Cache=qn;var Pa=xr((function(t,e){var n=(e=1==e.length&&Ha(e[0])?Me(e[0],Ze(uo())):Me(bi(e,1),Ze(uo()))).length;return Ki((function(i){for(var r=-1,o=wn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return Se(t,this,i)}))})),La=Ki((function(e,n){var i=sn(n,lo(La));return Qr(e,o,t,n,i)})),Wa=Ki((function(e,n){var i=sn(n,lo(Wa));return Qr(e,a,t,n,i)})),Ba=io((function(e,n){return Qr(e,l,t,t,t,n)}));function Va(t,e){return t===e||t!=t&&e!=e}var Na=Xr(Ei),Ua=Xr((function(t,e){return t>=e})),Fa=Ti(function(){return arguments}())?Ti:function(t){return ns(t)&&$t.call(t,"callee")&&!Zt.call(t,"callee")},Ha=_t.isArray,Ya=ve?Ze(ve):function(t){return ns(t)&&zi(t)==D};function Xa(t){return null!=t&&ts(t.length)&&!Qa(t)}function qa(t){return ns(t)&&Xa(t)}var Za=gn||vl,Ga=be?Ze(be):function(t){return ns(t)&&zi(t)==v};function Ka(t){if(!ns(t))return!1;var e=zi(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Qa(t){if(!es(t))return!1;var e=zi(t);return e==y||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ja(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var is=ye?Ze(ye):function(t){return ns(t)&&mo(t)==x};function rs(t){return"number"==typeof t||ns(t)&&zi(t)==_}function os(t){if(!ns(t)||zi(t)!=S)return!1;var e=Xt(t);if(null===e)return!0;var n=$t.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&jt.call(n)==Bt}var as=we?Ze(we):function(t){return ns(t)&&zi(t)==C},ss=xe?Ze(xe):function(t){return ns(t)&&mo(t)==z};function ls(t){return"string"==typeof t||!Ha(t)&&ns(t)&&zi(t)==E}function us(t){return"symbol"==typeof t||ns(t)&&zi(t)==k}var cs=_e?Ze(_e):function(t){return ns(t)&&ts(t.length)&&!!re[zi(t)]},hs=Xr(Wi),ds=Xr((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(Xa(t))return ls(t)?hn(t):Dr(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=mo(t);return(e==x?on:e==z?ln:Vs)(t)}function ps(t){return t?(t=vs(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function ms(t){return t?li(gs(t),0,d):0}function vs(t){if("number"==typeof t)return t;if(us(t))return h;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=qe(t);var n=ft.test(t);return n||gt.test(t)?le(t.slice(2),n?2:8):dt.test(t)?h:+t}function bs(t){return Mr(t,Is(t))}function ys(t){return null==t?"":cr(t)}var ws=Ir((function(t,e){if(Co(e)||Xa(e))Mr(e,Ts(e),t);else for(var n in e)$t.call(e,n)&&ni(t,n,e[n])})),xs=Ir((function(t,e){Mr(e,Is(e),t)})),_s=Ir((function(t,e,n,i){Mr(e,Is(e),t,i)})),Ss=Ir((function(t,e,n,i){Mr(e,Ts(e),t,i)})),As=io(si),Cs=Ki((function(e,n){e=Et(e);var i=-1,r=n.length,o=r>2?n[2]:t;for(o&&xo(n[0],n[1],o)&&(r=1);++i<r;)for(var a=n[i],s=Is(a),l=-1,u=s.length;++l<u;){var c=s[l],h=e[c];(h===t||Va(h,It[c])&&!$t.call(e,c))&&(e[c]=a[c])}return e})),zs=Ki((function(e){return e.push(t,to),Se(js,t,e)}));function Es(e,n,i){var r=null==e?t:Ai(e,n);return r===t?i:r}function ks(t,e){return null!=t&&vo(t,e,Ri)}var Rs=Nr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),t[e]=n}),el(rl)),Ds=Nr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),$t.call(t,e)?t[e].push(n):t[e]=[n]}),uo),Ms=Ki(Mi);function Ts(t){return Xa(t)?Kn(t):Pi(t)}function Is(t){return Xa(t)?Kn(t,!0):Li(t)}var Os=Ir((function(t,e,n){Ui(t,e,n)})),js=Ir((function(t,e,n,i){Ui(t,e,n,i)})),$s=io((function(t,e){var n={};if(null==t)return n;var i=!1;e=Me(e,(function(e){return e=wr(e,t),i||(i=e.length>1),e})),Mr(t,oo(t),n),i&&(n=ui(n,7,eo));for(var r=e.length;r--;)dr(n,e[r]);return n})),Ps=io((function(t,e){return null==t?{}:function(t,e){return Yi(t,e,(function(e,n){return ks(t,n)}))}(t,e)}));function Ls(t,e){if(null==t)return{};var n=Me(oo(t),(function(t){return[t]}));return e=uo(e),Yi(t,n,(function(t,n){return e(t,n[0])}))}var Ws=Kr(Ts),Bs=Kr(Is);function Vs(t){return null==t?[]:Ge(t,Ts(t))}var Ns=Pr((function(t,e,n){return e=e.toLowerCase(),t+(n?Us(e):e)}));function Us(t){return Ks(ys(t).toLowerCase())}function Fs(t){return(t=ys(t))&&t.replace(vt,tn).replace(Kt,"")}var Hs=Pr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ys=Pr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xs=$r("toLowerCase"),qs=Pr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Zs=Pr((function(t,e,n){return t+(n?" ":"")+Ks(e)})),Gs=Pr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=$r("toUpperCase");function Qs(e,n,i){return e=ys(e),(n=i?t:n)===t?function(t){return ee.test(t)}(e)?function(t){return t.match(Jt)||[]}(e):function(t){return t.match(st)||[]}(e):e.match(n)||[]}var Js=Ki((function(e,n){try{return Se(e,t,n)}catch(t){return Ka(t)?t:new At(t)}})),tl=io((function(t,e){return Ce(e,(function(e){e=Lo(e),ai(t,e,Da(t[e],t))})),t}));function el(t){return function(){return t}}var nl=Br(),il=Br(!0);function rl(t){return t}function ol(t){return $i("function"==typeof t?t:ui(t,1))}var al=Ki((function(t,e){return function(n){return Mi(n,t,e)}})),sl=Ki((function(t,e){return function(n){return Mi(t,n,e)}}));function ll(t,e,n){var i=Ts(e),r=Si(e,i);null!=n||es(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Si(e,Ts(e)));var o=!(es(n)&&"chain"in n&&!n.chain),a=Qa(t);return Ce(r,(function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Dr(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Te([this.value()],arguments))})})),t}function ul(){}var cl=Fr(Me),hl=Fr(Ee),dl=Fr(je);function fl(t){return _o(t)?Ue(Lo(t)):function(t){return function(e){return Ai(e,t)}}(t)}var pl=Yr(),gl=Yr(!0);function ml(){return[]}function vl(){return!1}var bl,yl=Ur((function(t,e){return t+e}),0),wl=Zr("ceil"),xl=Ur((function(t,e){return t/e}),1),_l=Zr("floor"),Sl=Ur((function(t,e){return t*e}),1),Al=Zr("round"),Cl=Ur((function(t,e){return t-e}),0);return Vn.after=function(t,n){if("function"!=typeof n)throw new Dt(e);return t=gs(t),function(){if(--t<1)return n.apply(this,arguments)}},Vn.ary=ka,Vn.assign=ws,Vn.assignIn=xs,Vn.assignInWith=_s,Vn.assignWith=Ss,Vn.at=As,Vn.before=Ra,Vn.bind=Da,Vn.bindAll=tl,Vn.bindKey=Ma,Vn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ha(t)?t:[t]},Vn.chain=fa,Vn.chunk=function(e,n,i){n=(i?xo(e,n,i):n===t)?1:yn(gs(n),0);var r=null==e?0:e.length;if(!r||n<1)return[];for(var o=0,a=0,s=_t(me(r/n));o<r;)s[a++]=rr(e,o,o+=n);return s},Vn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Vn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=_t(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Te(Ha(n)?Dr(n):[n],bi(e,1))},Vn.cond=function(t){var n=null==t?0:t.length,i=uo();return t=n?Me(t,(function(t){if("function"!=typeof t[1])throw new Dt(e);return[i(t[0]),t[1]]})):[],Ki((function(e){for(var i=-1;++i<n;){var r=t[i];if(Se(r[0],this,e))return Se(r[1],this,e)}}))},Vn.conforms=function(t){return function(t){var e=Ts(t);return function(n){return ci(n,t,e)}}(ui(t,1))},Vn.constant=el,Vn.countBy=ma,Vn.create=function(t,e){var n=Nn(t);return null==e?n:oi(n,e)},Vn.curry=function e(n,i,r){var o=Qr(n,8,t,t,t,t,t,i=r?t:i);return o.placeholder=e.placeholder,o},Vn.curryRight=function e(n,i,o){var a=Qr(n,r,t,t,t,t,t,i=o?t:i);return a.placeholder=e.placeholder,a},Vn.debounce=Ta,Vn.defaults=Cs,Vn.defaultsDeep=zs,Vn.defer=Ia,Vn.delay=Oa,Vn.difference=Vo,Vn.differenceBy=No,Vn.differenceWith=Uo,Vn.drop=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,(n=i||n===t?1:gs(n))<0?0:n,r):[]},Vn.dropRight=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,0,(n=r-(n=i||n===t?1:gs(n)))<0?0:n):[]},Vn.dropRightWhile=function(t,e){return t&&t.length?pr(t,uo(e,3),!0,!0):[]},Vn.dropWhile=function(t,e){return t&&t.length?pr(t,uo(e,3),!0):[]},Vn.fill=function(e,n,i,r){var o=null==e?0:e.length;return o?(i&&"number"!=typeof i&&xo(e,n,i)&&(i=0,r=o),function(e,n,i,r){var o=e.length;for((i=gs(i))<0&&(i=-i>o?0:o+i),(r=r===t||r>o?o:gs(r))<0&&(r+=o),r=i>r?0:ms(r);i<r;)e[i++]=n;return e}(e,n,i,r)):[]},Vn.filter=function(t,e){return(Ha(t)?ke:vi)(t,uo(e,3))},Vn.flatMap=function(t,e){return bi(Aa(t,e),1)},Vn.flatMapDeep=function(t,e){return bi(Aa(t,e),u)},Vn.flatMapDepth=function(e,n,i){return i=i===t?1:gs(i),bi(Aa(e,n),i)},Vn.flatten=Yo,Vn.flattenDeep=function(t){return null!=t&&t.length?bi(t,u):[]},Vn.flattenDepth=function(e,n){return null!=e&&e.length?bi(e,n=n===t?1:gs(n)):[]},Vn.flip=function(t){return Qr(t,512)},Vn.flow=nl,Vn.flowRight=il,Vn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Vn.functions=function(t){return null==t?[]:Si(t,Ts(t))},Vn.functionsIn=function(t){return null==t?[]:Si(t,Is(t))},Vn.groupBy=xa,Vn.initial=function(t){return null!=t&&t.length?rr(t,0,-1):[]},Vn.intersection=qo,Vn.intersectionBy=Zo,Vn.intersectionWith=Go,Vn.invert=Rs,Vn.invertBy=Ds,Vn.invokeMap=_a,Vn.iteratee=ol,Vn.keyBy=Sa,Vn.keys=Ts,Vn.keysIn=Is,Vn.map=Aa,Vn.mapKeys=function(t,e){var n={};return e=uo(e,3),xi(t,(function(t,i,r){ai(n,e(t,i,r),t)})),n},Vn.mapValues=function(t,e){var n={};return e=uo(e,3),xi(t,(function(t,i,r){ai(n,i,e(t,i,r))})),n},Vn.matches=function(t){return Vi(ui(t,1))},Vn.matchesProperty=function(t,e){return Ni(t,ui(e,1))},Vn.memoize=ja,Vn.merge=Os,Vn.mergeWith=js,Vn.method=al,Vn.methodOf=sl,Vn.mixin=ll,Vn.negate=$a,Vn.nthArg=function(t){return t=gs(t),Ki((function(e){return Fi(e,t)}))},Vn.omit=$s,Vn.omitBy=function(t,e){return Ls(t,$a(uo(e)))},Vn.once=function(t){return Ra(2,t)},Vn.orderBy=function(e,n,i,r){return null==e?[]:(Ha(n)||(n=null==n?[]:[n]),Ha(i=r?t:i)||(i=null==i?[]:[i]),Hi(e,n,i))},Vn.over=cl,Vn.overArgs=Pa,Vn.overEvery=hl,Vn.overSome=dl,Vn.partial=La,Vn.partialRight=Wa,Vn.partition=Ca,Vn.pick=Ps,Vn.pickBy=Ls,Vn.property=fl,Vn.propertyOf=function(e){return function(n){return null==e?t:Ai(e,n)}},Vn.pull=Qo,Vn.pullAll=Jo,Vn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Xi(t,e,uo(n,2)):t},Vn.pullAllWith=function(e,n,i){return e&&e.length&&n&&n.length?Xi(e,n,t,i):e},Vn.pullAt=ta,Vn.range=pl,Vn.rangeRight=gl,Vn.rearg=Ba,Vn.reject=function(t,e){return(Ha(t)?ke:vi)(t,$a(uo(e,3)))},Vn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=uo(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return qi(t,r),n},Vn.rest=function(n,i){if("function"!=typeof n)throw new Dt(e);return Ki(n,i=i===t?i:gs(i))},Vn.reverse=ea,Vn.sampleSize=function(e,n,i){return n=(i?xo(e,n,i):n===t)?1:gs(n),(Ha(e)?Jn:Ji)(e,n)},Vn.set=function(t,e,n){return null==t?t:tr(t,e,n)},Vn.setWith=function(e,n,i,r){return r="function"==typeof r?r:t,null==e?e:tr(e,n,i,r)},Vn.shuffle=function(t){return(Ha(t)?ti:ir)(t)},Vn.slice=function(e,n,i){var r=null==e?0:e.length;return r?(i&&"number"!=typeof i&&xo(e,n,i)?(n=0,i=r):(n=null==n?0:gs(n),i=i===t?r:gs(i)),rr(e,n,i)):[]},Vn.sortBy=za,Vn.sortedUniq=function(t){return t&&t.length?lr(t):[]},Vn.sortedUniqBy=function(t,e){return t&&t.length?lr(t,uo(e,2)):[]},Vn.split=function(e,n,i){return i&&"number"!=typeof i&&xo(e,n,i)&&(n=i=t),(i=i===t?d:i>>>0)?(e=ys(e))&&("string"==typeof n||null!=n&&!as(n))&&!(n=cr(n))&&rn(e)?_r(hn(e),0,i):e.split(n,i):[]},Vn.spread=function(t,n){if("function"!=typeof t)throw new Dt(e);return n=null==n?0:yn(gs(n),0),Ki((function(e){var i=e[n],r=_r(e,0,n);return i&&Te(r,i),Se(t,this,r)}))},Vn.tail=function(t){var e=null==t?0:t.length;return e?rr(t,1,e):[]},Vn.take=function(e,n,i){return e&&e.length?rr(e,0,(n=i||n===t?1:gs(n))<0?0:n):[]},Vn.takeRight=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,(n=r-(n=i||n===t?1:gs(n)))<0?0:n,r):[]},Vn.takeRightWhile=function(t,e){return t&&t.length?pr(t,uo(e,3),!1,!0):[]},Vn.takeWhile=function(t,e){return t&&t.length?pr(t,uo(e,3)):[]},Vn.tap=function(t,e){return e(t),t},Vn.throttle=function(t,n,i){var r=!0,o=!0;if("function"!=typeof t)throw new Dt(e);return es(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),Ta(t,n,{leading:r,maxWait:n,trailing:o})},Vn.thru=pa,Vn.toArray=fs,Vn.toPairs=Ws,Vn.toPairsIn=Bs,Vn.toPath=function(t){return Ha(t)?Me(t,Lo):us(t)?[t]:Dr(Po(ys(t)))},Vn.toPlainObject=bs,Vn.transform=function(t,e,n){var i=Ha(t),r=i||Za(t)||cs(t);if(e=uo(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:es(t)&&Qa(o)?Nn(Xt(t)):{}}return(r?Ce:xi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Vn.unary=function(t){return ka(t,1)},Vn.union=na,Vn.unionBy=ia,Vn.unionWith=ra,Vn.uniq=function(t){return t&&t.length?hr(t):[]},Vn.uniqBy=function(t,e){return t&&t.length?hr(t,uo(e,2)):[]},Vn.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?hr(e,t,n):[]},Vn.unset=function(t,e){return null==t||dr(t,e)},Vn.unzip=oa,Vn.unzipWith=aa,Vn.update=function(t,e,n){return null==t?t:fr(t,e,yr(n))},Vn.updateWith=function(e,n,i,r){return r="function"==typeof r?r:t,null==e?e:fr(e,n,yr(i),r)},Vn.values=Vs,Vn.valuesIn=function(t){return null==t?[]:Ge(t,Is(t))},Vn.without=sa,Vn.words=Qs,Vn.wrap=function(t,e){return La(yr(e),t)},Vn.xor=la,Vn.xorBy=ua,Vn.xorWith=ca,Vn.zip=ha,Vn.zipObject=function(t,e){return vr(t||[],e||[],ni)},Vn.zipObjectDeep=function(t,e){return vr(t||[],e||[],tr)},Vn.zipWith=da,Vn.entries=Ws,Vn.entriesIn=Bs,Vn.extend=xs,Vn.extendWith=_s,ll(Vn,Vn),Vn.add=yl,Vn.attempt=Js,Vn.camelCase=Ns,Vn.capitalize=Us,Vn.ceil=wl,Vn.clamp=function(e,n,i){return i===t&&(i=n,n=t),i!==t&&(i=(i=vs(i))==i?i:0),n!==t&&(n=(n=vs(n))==n?n:0),li(vs(e),n,i)},Vn.clone=function(t){return ui(t,4)},Vn.cloneDeep=function(t){return ui(t,5)},Vn.cloneDeepWith=function(e,n){return ui(e,5,n="function"==typeof n?n:t)},Vn.cloneWith=function(e,n){return ui(e,4,n="function"==typeof n?n:t)},Vn.conformsTo=function(t,e){return null==e||ci(t,e,Ts(e))},Vn.deburr=Fs,Vn.defaultTo=function(t,e){return null==t||t!=t?e:t},Vn.divide=xl,Vn.endsWith=function(e,n,i){e=ys(e),n=cr(n);var r=e.length,o=i=i===t?r:li(gs(i),0,r);return(i-=n.length)>=0&&e.slice(i,o)==n},Vn.eq=Va,Vn.escape=function(t){return(t=ys(t))&&X.test(t)?t.replace(H,en):t},Vn.escapeRegExp=function(t){return(t=ys(t))&&et.test(t)?t.replace(tt,"\\$&"):t},Vn.every=function(e,n,i){var r=Ha(e)?Ee:gi;return i&&xo(e,n,i)&&(n=t),r(e,uo(n,3))},Vn.find=va,Vn.findIndex=Fo,Vn.findKey=function(t,e){return Pe(t,uo(e,3),xi)},Vn.findLast=ba,Vn.findLastIndex=Ho,Vn.findLastKey=function(t,e){return Pe(t,uo(e,3),_i)},Vn.floor=_l,Vn.forEach=ya,Vn.forEachRight=wa,Vn.forIn=function(t,e){return null==t?t:yi(t,uo(e,3),Is)},Vn.forInRight=function(t,e){return null==t?t:wi(t,uo(e,3),Is)},Vn.forOwn=function(t,e){return t&&xi(t,uo(e,3))},Vn.forOwnRight=function(t,e){return t&&_i(t,uo(e,3))},Vn.get=Es,Vn.gt=Na,Vn.gte=Ua,Vn.has=function(t,e){return null!=t&&vo(t,e,ki)},Vn.hasIn=ks,Vn.head=Xo,Vn.identity=rl,Vn.includes=function(t,e,n,i){t=Xa(t)?t:Vs(t),n=n&&!i?gs(n):0;var r=t.length;return n<0&&(n=yn(r+n,0)),ls(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&We(t,e,n)>-1},Vn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:gs(n);return r<0&&(r=yn(i+r,0)),We(t,e,r)},Vn.inRange=function(e,n,i){return n=ps(n),i===t?(i=n,n=0):i=ps(i),function(t,e,n){return t>=wn(e,n)&&t<yn(e,n)}(e=vs(e),n,i)},Vn.invoke=Ms,Vn.isArguments=Fa,Vn.isArray=Ha,Vn.isArrayBuffer=Ya,Vn.isArrayLike=Xa,Vn.isArrayLikeObject=qa,Vn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&zi(t)==m},Vn.isBuffer=Za,Vn.isDate=Ga,Vn.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},Vn.isEmpty=function(t){if(null==t)return!0;if(Xa(t)&&(Ha(t)||"string"==typeof t||"function"==typeof t.splice||Za(t)||cs(t)||Fa(t)))return!t.length;var e=mo(t);if(e==x||e==z)return!t.size;if(Co(t))return!Pi(t).length;for(var n in t)if($t.call(t,n))return!1;return!0},Vn.isEqual=function(t,e){return Ii(t,e)},Vn.isEqualWith=function(e,n,i){var r=(i="function"==typeof i?i:t)?i(e,n):t;return r===t?Ii(e,n,t,i):!!r},Vn.isError=Ka,Vn.isFinite=function(t){return"number"==typeof t&&mn(t)},Vn.isFunction=Qa,Vn.isInteger=Ja,Vn.isLength=ts,Vn.isMap=is,Vn.isMatch=function(t,e){return t===e||Oi(t,e,ho(e))},Vn.isMatchWith=function(e,n,i){return i="function"==typeof i?i:t,Oi(e,n,ho(n),i)},Vn.isNaN=function(t){return rs(t)&&t!=+t},Vn.isNative=function(t){if(Ao(t))throw new At("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ji(t)},Vn.isNil=function(t){return null==t},Vn.isNull=function(t){return null===t},Vn.isNumber=rs,Vn.isObject=es,Vn.isObjectLike=ns,Vn.isPlainObject=os,Vn.isRegExp=as,Vn.isSafeInteger=function(t){return Ja(t)&&t>=-9007199254740991&&t<=c},Vn.isSet=ss,Vn.isString=ls,Vn.isSymbol=us,Vn.isTypedArray=cs,Vn.isUndefined=function(e){return e===t},Vn.isWeakMap=function(t){return ns(t)&&mo(t)==R},Vn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==zi(t)},Vn.join=function(t,e){return null==t?"":vn.call(t,e)},Vn.kebabCase=Hs,Vn.last=Ko,Vn.lastIndexOf=function(e,n,i){var r=null==e?0:e.length;if(!r)return-1;var o=r;return i!==t&&(o=(o=gs(i))<0?yn(r+o,0):wn(o,r-1)),n==n?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(e,n,o):Le(e,Ve,o,!0)},Vn.lowerCase=Ys,Vn.lowerFirst=Xs,Vn.lt=hs,Vn.lte=ds,Vn.max=function(e){return e&&e.length?mi(e,rl,Ei):t},Vn.maxBy=function(e,n){return e&&e.length?mi(e,uo(n,2),Ei):t},Vn.mean=function(t){return Ne(t,rl)},Vn.meanBy=function(t,e){return Ne(t,uo(e,2))},Vn.min=function(e){return e&&e.length?mi(e,rl,Wi):t},Vn.minBy=function(e,n){return e&&e.length?mi(e,uo(n,2),Wi):t},Vn.stubArray=ml,Vn.stubFalse=vl,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=Sl,Vn.nth=function(e,n){return e&&e.length?Fi(e,gs(n)):t},Vn.noConflict=function(){return he._===this&&(he._=Vt),this},Vn.noop=ul,Vn.now=Ea,Vn.pad=function(t,e,n){t=ys(t);var i=(e=gs(e))?cn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Hr($e(r),n)+t+Hr(me(r),n)},Vn.padEnd=function(t,e,n){t=ys(t);var i=(e=gs(e))?cn(t):0;return e&&i<e?t+Hr(e-i,n):t},Vn.padStart=function(t,e,n){t=ys(t);var i=(e=gs(e))?cn(t):0;return e&&i<e?Hr(e-i,n)+t:t},Vn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_n(ys(t).replace(nt,""),e||0)},Vn.random=function(e,n,i){if(i&&"boolean"!=typeof i&&xo(e,n,i)&&(n=i=t),i===t&&("boolean"==typeof n?(i=n,n=t):"boolean"==typeof e&&(i=e,e=t)),e===t&&n===t?(e=0,n=1):(e=ps(e),n===t?(n=e,e=0):n=ps(n)),e>n){var r=e;e=n,n=r}if(i||e%1||n%1){var o=Sn();return wn(e+o*(n-e+se("1e-"+((o+"").length-1))),n)}return Zi(e,n)},Vn.reduce=function(t,e,n){var i=Ha(t)?Ie:He,r=arguments.length<3;return i(t,uo(e,4),n,r,fi)},Vn.reduceRight=function(t,e,n){var i=Ha(t)?Oe:He,r=arguments.length<3;return i(t,uo(e,4),n,r,pi)},Vn.repeat=function(e,n,i){return n=(i?xo(e,n,i):n===t)?1:gs(n),Gi(ys(e),n)},Vn.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Vn.result=function(e,n,i){var r=-1,o=(n=wr(n,e)).length;for(o||(o=1,e=t);++r<o;){var a=null==e?t:e[Lo(n[r])];a===t&&(r=o,a=i),e=Qa(a)?a.call(e):a}return e},Vn.round=Al,Vn.runInContext=it,Vn.sample=function(t){return(Ha(t)?Qn:Qi)(t)},Vn.size=function(t){if(null==t)return 0;if(Xa(t))return ls(t)?cn(t):t.length;var e=mo(t);return e==x||e==z?t.size:Pi(t).length},Vn.snakeCase=qs,Vn.some=function(e,n,i){var r=Ha(e)?je:or;return i&&xo(e,n,i)&&(n=t),r(e,uo(n,3))},Vn.sortedIndex=function(t,e){return ar(t,e)},Vn.sortedIndexBy=function(t,e,n){return sr(t,e,uo(n,2))},Vn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=ar(t,e);if(i<n&&Va(t[i],e))return i}return-1},Vn.sortedLastIndex=function(t,e){return ar(t,e,!0)},Vn.sortedLastIndexBy=function(t,e,n){return sr(t,e,uo(n,2),!0)},Vn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ar(t,e,!0)-1;if(Va(t[n],e))return n}return-1},Vn.startCase=Zs,Vn.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:li(gs(n),0,t.length),e=cr(e),t.slice(n,n+e.length)==e},Vn.subtract=Cl,Vn.sum=function(t){return t&&t.length?Ye(t,rl):0},Vn.sumBy=function(t,e){return t&&t.length?Ye(t,uo(e,2)):0},Vn.template=function(e,n,i){var r=Vn.templateSettings;i&&xo(e,n,i)&&(n=t),e=ys(e),n=_s({},n,r,Jr);var o,a,s=_s({},n.imports,r.imports,Jr),l=Ts(s),u=Ge(s,l),c=0,h=n.interpolate||bt,d="__p += '",f=kt((n.escape||bt).source+"|"+h.source+"|"+(h===G?ct:bt).source+"|"+(n.evaluate||bt).source+"|$","g"),p="//# sourceURL="+($t.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";e.replace(f,(function(t,n,i,r,s,l){return i||(i=r),d+=e.slice(c,l).replace(yt,nn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var g=$t.call(n,"variable")&&n.variable;if(g){if(lt.test(g))throw new At("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(V,""):d).replace(N,"$1").replace(U,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Js((function(){return Ct(l,p+"return "+d).apply(t,u)}));if(m.source=d,Ka(m))throw m;return m},Vn.times=function(t,e){if((t=gs(t))<1||t>c)return[];var n=d,i=wn(t,d);e=uo(e),t-=d;for(var r=Xe(i,e);++n<t;)e(n);return r},Vn.toFinite=ps,Vn.toInteger=gs,Vn.toLength=ms,Vn.toLower=function(t){return ys(t).toLowerCase()},Vn.toNumber=vs,Vn.toSafeInteger=function(t){return t?li(gs(t),-9007199254740991,c):0===t?t:0},Vn.toString=ys,Vn.toUpper=function(t){return ys(t).toUpperCase()},Vn.trim=function(e,n,i){if((e=ys(e))&&(i||n===t))return qe(e);if(!e||!(n=cr(n)))return e;var r=hn(e),o=hn(n);return _r(r,Qe(r,o),Je(r,o)+1).join("")},Vn.trimEnd=function(e,n,i){if((e=ys(e))&&(i||n===t))return e.slice(0,dn(e)+1);if(!e||!(n=cr(n)))return e;var r=hn(e);return _r(r,0,Je(r,hn(n))+1).join("")},Vn.trimStart=function(e,n,i){if((e=ys(e))&&(i||n===t))return e.replace(nt,"");if(!e||!(n=cr(n)))return e;var r=hn(e);return _r(r,Qe(r,hn(n))).join("")},Vn.truncate=function(e,n){var i=30,r="...";if(es(n)){var o="separator"in n?n.separator:o;i="length"in n?gs(n.length):i,r="omission"in n?cr(n.omission):r}var a=(e=ys(e)).length;if(rn(e)){var s=hn(e);a=s.length}if(i>=a)return e;var l=i-cn(r);if(l<1)return r;var u=s?_r(s,0,l).join(""):e.slice(0,l);if(o===t)return u+r;if(s&&(l+=u.length-l),as(o)){if(e.slice(l).search(o)){var c,h=u;for(o.global||(o=kt(o.source,ys(ht.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var d=c.index;u=u.slice(0,d===t?l:d)}}else if(e.indexOf(cr(o),l)!=l){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+r},Vn.unescape=function(t){return(t=ys(t))&&Y.test(t)?t.replace(F,fn):t},Vn.uniqueId=function(t){var e=++Pt;return ys(t)+e},Vn.upperCase=Gs,Vn.upperFirst=Ks,Vn.each=ya,Vn.eachRight=wa,Vn.first=Xo,ll(Vn,(bl={},xi(Vn,(function(t,e){$t.call(Vn.prototype,e)||(bl[e]=t)})),bl),{chain:!1}),Vn.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Vn[t].placeholder=Vn})),Ce(["drop","take"],(function(e,n){Hn.prototype[e]=function(i){i=i===t?1:yn(gs(i),0);var r=this.__filtered__&&!n?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=wn(i,r.__takeCount__):r.__views__.push({size:wn(i,d),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:uo(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(rl)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Ki((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return Mi(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter($a(uo(t)))},Hn.prototype.slice=function(e,n){e=gs(e);var i=this;return i.__filtered__&&(e>0||n<0)?new Hn(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),n!==t&&(i=(n=gs(n))<0?i.dropRight(-n):i.take(n-e)),i)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(d)},xi(Hn.prototype,(function(e,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),o=Vn[r?"take"+("last"==n?"Right":""):n],a=r||/^find/.test(n);o&&(Vn.prototype[n]=function(){var n=this.__wrapped__,s=r?[1]:arguments,l=n instanceof Hn,u=s[0],c=l||Ha(n),h=function(t){var e=o.apply(Vn,Te([t],s));return r&&d?e[0]:e};c&&i&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&c){n=g?n:new Hn(this);var m=e.apply(n,s);return m.__actions__.push({func:pa,args:[h],thisArg:t}),new Fn(m,d)}return p&&g?e.apply(this,s):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Mt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Vn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Ha(r)?r:[],t)}return this[n]((function(n){return e.apply(Ha(n)?n:[],t)}))}})),xi(Hn.prototype,(function(t,e){var n=Vn[e];if(n){var i=n.name+"";$t.call(Tn,i)||(Tn[i]=[]),Tn[i].push({name:e,func:n})}})),Tn[Vr(t,2).name]=[{name:"wrapper",func:t}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Dr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Dr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Dr(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ha(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=yn(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,u=i?s:a-1,c=this.__iteratees__,h=c.length,d=0,f=wn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return gr(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var g=-1,m=t[u+=e];++g<h;){var v=c[g],b=v.iteratee,y=v.type,w=b(m);if(2==y)m=w;else if(!w){if(1==y)continue t;break t}}p[d++]=m}return p},Vn.prototype.at=ga,Vn.prototype.chain=function(){return fa(this)},Vn.prototype.commit=function(){return new Fn(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===t&&(this.__values__=fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},Vn.prototype.plant=function(e){for(var n,i=this;i instanceof Un;){var r=Bo(i);r.__index__=0,r.__values__=t,n?o.__wrapped__=r:n=r;var o=r;i=i.__wrapped__}return o.__wrapped__=e,n},Vn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var n=e;return this.__actions__.length&&(n=new Hn(this)),(n=n.reverse()).__actions__.push({func:pa,args:[ea],thisArg:t}),new Fn(n,this.__chain__)}return this.thru(ea)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return gr(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,ae&&(Vn.prototype[ae]=function(){return this}),Vn}();fe?((fe.exports=pn)._=pn,de._=pn):he._=pn}.call(Kr);var Jr=Qr.exports;W(".vue-advanced-cropper {\n  text-align: center;\n  position: relative;\n  user-select: none;\n  max-height: 100%;\n  max-width: 100%;\n  direction: ltr;\n}\n.vue-advanced-cropper__stretcher {\n  pointer-events: none;\n  position: relative;\n  max-width: 100%;\n  max-height: 100%;\n}\n.vue-advanced-cropper__image {\n  user-select: none;\n  position: absolute;\n  transform-origin: center;\n  max-width: none !important;\n}\n.vue-advanced-cropper__background, .vue-advanced-cropper__foreground {\n  opacity: 1;\n  background: black;\n  transform: translate(-50%, -50%);\n  position: absolute;\n  top: 50%;\n  left: 50%;\n}\n.vue-advanced-cropper__foreground {\n  opacity: 0.5;\n}\n.vue-advanced-cropper__boundaries {\n  opacity: 1;\n  transform: translate(-50%, -50%);\n  position: absolute;\n  left: 50%;\n  top: 50%;\n}\n.vue-advanced-cropper__cropper-wrapper {\n  width: 100%;\n  height: 100%;\n}\n.vue-advanced-cropper__image-wrapper {\n  overflow: hidden;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.vue-advanced-cropper__stencil-wrapper {\n  position: absolute;\n}\n\n.vue-simple-handler {\n  display: block;\n  background: white;\n  height: 10px;\n  width: 10px;\n}\n\n.vue-handler-wrapper {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  width: 30px;\n  height: 30px;\n}\n.vue-handler-wrapper__draggable {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.vue-handler-wrapper--west-north {\n  cursor: nw-resize;\n}\n.vue-handler-wrapper--north {\n  cursor: n-resize;\n}\n.vue-handler-wrapper--east-north {\n  cursor: ne-resize;\n}\n.vue-handler-wrapper--east {\n  cursor: e-resize;\n}\n.vue-handler-wrapper--east-south {\n  cursor: se-resize;\n}\n.vue-handler-wrapper--south {\n  cursor: s-resize;\n}\n.vue-handler-wrapper--west-south {\n  cursor: sw-resize;\n}\n.vue-handler-wrapper--west {\n  cursor: w-resize;\n}\n.vue-handler-wrapper--disabled {\n  cursor: auto;\n}\n\n.vue-line-wrapper {\n  background: none;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.vue-line-wrapper--north, .vue-line-wrapper--south {\n  height: 12px;\n  width: 100%;\n  left: 0;\n  transform: translateY(-50%);\n}\n.vue-line-wrapper--north {\n  top: 0;\n  cursor: n-resize;\n}\n.vue-line-wrapper--south {\n  top: 100%;\n  cursor: s-resize;\n}\n.vue-line-wrapper--east, .vue-line-wrapper--west {\n  width: 12px;\n  height: 100%;\n  transform: translateX(-50%);\n  top: 0;\n}\n.vue-line-wrapper--east {\n  left: 100%;\n  cursor: e-resize;\n}\n.vue-line-wrapper--west {\n  left: 0;\n  cursor: w-resize;\n}\n.vue-line-wrapper--disabled {\n  cursor: auto;\n}\n\n.vue-bounding-box {\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n.vue-bounding-box__handler {\n  position: absolute;\n}\n.vue-bounding-box__handler--west-north {\n  left: 0;\n  top: 0;\n}\n.vue-bounding-box__handler--north {\n  left: 50%;\n  top: 0;\n}\n.vue-bounding-box__handler--east-north {\n  left: 100%;\n  top: 0;\n}\n.vue-bounding-box__handler--east {\n  left: 100%;\n  top: 50%;\n}\n.vue-bounding-box__handler--east-south {\n  left: 100%;\n  top: 100%;\n}\n.vue-bounding-box__handler--south {\n  left: 50%;\n  top: 100%;\n}\n.vue-bounding-box__handler--west-south {\n  left: 0;\n  top: 100%;\n}\n.vue-bounding-box__handler--west {\n  left: 0;\n  top: 50%;\n}\n\n.vue-draggable-area {\n  position: relative;\n}\n\n.vue-preview-result {\n  overflow: hidden;\n  box-sizing: border-box;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n.vue-preview-result__wrapper {\n  position: absolute;\n}\n.vue-preview-result__image {\n  pointer-events: none;\n  position: relative;\n  user-select: none;\n  transform-origin: center;\n  max-width: none !important;\n}\n\n.vue-rectangle-stencil {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n}\n.vue-rectangle-stencil__preview {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.vue-rectangle-stencil--movable {\n  cursor: move;\n}\n\n.vue-circle-stencil {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  box-sizing: content-box;\n  cursor: move;\n}\n.vue-circle-stencil__preview {\n  border-radius: 50%;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.vue-circle-stencil--movable {\n  cursor: move;\n}\n\n.vue-preview {\n  overflow: hidden;\n  box-sizing: border-box;\n  position: relative;\n}\n.vue-preview--fill {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n.vue-preview__wrapper {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n.vue-preview__image {\n  pointer-events: none;\n  position: absolute;\n  user-select: none;\n  transform-origin: center;\n  max-width: none !important;\n}\n\n.vue-simple-line {\n  background: none;\n  transition: border 0.5s;\n  border-color: rgba(255, 255, 255, 0.3);\n  border-width: 0;\n  border-style: solid;\n}\n.vue-simple-line--south, .vue-simple-line--north {\n  height: 0;\n  width: 100%;\n}\n.vue-simple-line--east, .vue-simple-line--west {\n  height: 100%;\n  width: 0;\n}\n.vue-simple-line--east {\n  border-right-width: 1px;\n}\n.vue-simple-line--west {\n  border-left-width: 1px;\n}\n.vue-simple-line--south {\n  border-bottom-width: 1px;\n}\n.vue-simple-line--north {\n  border-top-width: 1px;\n}\n.vue-simple-line--hover {\n  opacity: 1;\n  border-color: white;\n}",{});W('.vue-advanced-cropper__foreground {\n  opacity: 0.7;\n}\n\n.vue-circle-stencil__preview:after, .vue-circle-stencil__preview:before,\n.vue-rectangle-stencil__preview:after,\n.vue-rectangle-stencil__preview:before {\n  content: "";\n  opacity: 0;\n  -webkit-transition: opacity 0.25s;\n  transition: opacity 0.25s;\n  position: absolute;\n  pointer-events: none;\n  z-index: 1;\n}\n.vue-circle-stencil__preview:after,\n.vue-rectangle-stencil__preview:after {\n  border-left: solid 1px white;\n  border-right: solid 1px white;\n  width: 33%;\n  height: 100%;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  left: 50%;\n  top: 0;\n}\n.vue-circle-stencil__preview:before,\n.vue-rectangle-stencil__preview:before {\n  border-top: solid 1px white;\n  border-bottom: solid 1px white;\n  height: 33%;\n  width: 100%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n  top: 50%;\n  left: 0;\n}\n.vue-circle-stencil--moving .vue-rectangle-stencil__preview:after, .vue-circle-stencil--moving .vue-rectangle-stencil__preview:before,\n.vue-circle-stencil--moving .vue-circle-stencil__preview:after,\n.vue-circle-stencil--moving .vue-circle-stencil__preview:before, .vue-circle-stencil--resizing .vue-rectangle-stencil__preview:after, .vue-circle-stencil--resizing .vue-rectangle-stencil__preview:before,\n.vue-circle-stencil--resizing .vue-circle-stencil__preview:after,\n.vue-circle-stencil--resizing .vue-circle-stencil__preview:before,\n.vue-rectangle-stencil--moving .vue-rectangle-stencil__preview:after,\n.vue-rectangle-stencil--moving .vue-rectangle-stencil__preview:before,\n.vue-rectangle-stencil--moving .vue-circle-stencil__preview:after,\n.vue-rectangle-stencil--moving .vue-circle-stencil__preview:before,\n.vue-rectangle-stencil--resizing .vue-rectangle-stencil__preview:after,\n.vue-rectangle-stencil--resizing .vue-rectangle-stencil__preview:before,\n.vue-rectangle-stencil--resizing .vue-circle-stencil__preview:after,\n.vue-rectangle-stencil--resizing .vue-circle-stencil__preview:before {\n  opacity: 0.7;\n}\n\n.vue-simple-line {\n  border-color: rgba(255, 255, 255, 0.8);\n}\n\n.vue-simple-handler-wrapper {\n  width: 24px;\n  height: 24px;\n}\n.vue-simple-handler-wrapper--west-north {\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n}\n.vue-simple-handler-wrapper--east-south {\n  -webkit-transform: translate(-100%, -100%);\n          transform: translate(-100%, -100%);\n}\n.vue-simple-handler-wrapper--west-south {\n  -webkit-transform: translate(0, -100%);\n          transform: translate(0, -100%);\n}\n.vue-simple-handler-wrapper--east-north {\n  -webkit-transform: translate(-100%, 0);\n          transform: translate(-100%, 0);\n}\n\n.vue-simple-handler {\n  display: block;\n  position: relative;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  -webkit-transition: opacity 0.5s;\n  transition: opacity 0.5s;\n  border: none;\n  background: white;\n  top: auto;\n  left: auto;\n  height: 4px;\n  width: 4px;\n  opacity: 0;\n}\n.vue-simple-handler--west-north, .vue-simple-handler--east-south, .vue-simple-handler--west-south, .vue-simple-handler--east-north {\n  display: block;\n  height: 16px;\n  width: 16px;\n  background: none;\n  opacity: 0.7;\n}\n.vue-simple-handler--west-north {\n  border-left: solid 2px white;\n  border-top: solid 2px white;\n}\n.vue-simple-handler--east-south {\n  border-right: solid 2px white;\n  border-bottom: solid 2px white;\n}\n.vue-simple-handler--west-south {\n  border-left: solid 2px white;\n  border-bottom: solid 2px white;\n}\n.vue-simple-handler--east-north {\n  border-right: solid 2px white;\n  border-top: solid 2px white;\n}\n.vue-simple-handler--hover {\n  opacity: 1;\n}\n\n.vue-circle-stencil__preview {\n  border: solid 2px rgba(255, 255, 255, 0.8);\n}\n.vue-circle-stencil .vue-simple-line {\n  border-color: rgba(255, 255, 255, 0.3);\n}\n.vue-circle-stencil .vue-simple-handler--west-north, .vue-circle-stencil .vue-simple-handler--east-south, .vue-circle-stencil .vue-simple-handler--west-south, .vue-circle-stencil .vue-simple-handler--east-north {\n  opacity: 0.4;\n}\n.vue-circle-stencil .vue-simple-handler--hover {\n  opacity: 1;\n}',{});W(".exceeds-the-limit {\r\n    color: red;\r\n}\r\n\r\n.ml-1 {\r\n    margin-left: 0.5rem;\r\n}\r\n\r\n#sfx-modal .filerobot-Provider-ItemCategory-wrapper .filerobot-u-reset {\r\n    top: 0;\r\n}\r\n\r\n.modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1000;\r\n}\r\n\r\n.modal {\r\n    background: white;\r\n    border-radius: 8px;\r\n    padding: 1rem;\r\n    width: 80%;\r\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n    overflow-y: auto;\r\n    max-height: 80vh;\r\n    margin: 1.75rem auto;\r\n}\r\n\r\n.modal-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.modal-close-btn {\r\n    background: transparent;\r\n    border: none;\r\n    font-size: 1.5rem;\r\n    cursor: pointer;\r\n}\r\n\r\n.modal-body {\r\n    margin: 1rem 0;\r\n}\r\n\r\n.modal-footer {\r\n    text-align: right;\r\n}\r\n\r\n.sfx-media-icon {\r\n    width: 34px;\r\n    height: 34px;\r\n    border-radius: 25%;\r\n    position: relative; /* Ensure the pseudo-element is positioned relative to this container */\r\n    overflow: hidden;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.media-item-icon {\r\n    position: absolute !important;\r\n    top: 7px;\r\n    left: 5px;\r\n    opacity: 0;\r\n    transition: opacity 0.3s ease;\r\n    z-index: 9;\r\n}\r\n\r\n.sfx-media-icon::after {\r\n    content: ''; /* Empty content to create the pseudo-element */\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    z-index: 100;\r\n    height: 100%;\r\n    background-color: #0c3745;\r\n    opacity: 0; /* Start with no visibility */\r\n    transition: opacity 0.3s ease; /* Smooth fade in/out effect */\r\n    backdrop-filter: blur(5px); /* Apply blur effect */\r\n    z-index: 1;\r\n}\r\n\r\n.sfx-media-icon:hover .media-item-icon {\r\n    opacity: 1;\r\n}\r\n\r\n.sfx-media-icon:hover::after {\r\n    opacity: 0.85; /* Show the white blur overlay on hover */\r\n}\r\n\r\n.sfx-media-icon img {\r\n    width: 34px;\r\n    height: 34px;\r\n    display: block;\r\n    margin: 0 auto;\r\n    object-fit: cover;\r\n    border-radius: 25%;\r\n}\r\n\r\n.sfx-item .item-info {\r\n    margin-left: 12px;\r\n}\r\n\r\n.sfx-item .item-info a {\r\n    color: var(--theme--primary);\r\n}\r\n\r\n.sfx-item-inner {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.bottom-message {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: end;\r\n    margin-top: var(--v-list-item-margin, 4px);\r\n}\r\n\r\n.sfx-item {\r\n    padding: 6px;\r\n    border: var(--theme--border-width) solid var(--v-list-item-border-color, var(--theme--form--field--input--border-color));\r\n    border-radius: var(--theme--border-radius);\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    color: var(--v-list-item-color, var(--v-list-color, var(--theme--foreground)));\r\n    margin-top: var(--v-list-item-margin, 4px);\r\n    cursor: pointer;\r\n    transition: border-color 500ms ease;\r\n    width: 100%;\r\n}\r\n\r\n.sfx-item:hover {\r\n    border: var(--theme--border-width) solid var(--v-list-item-border-color-hover, var(--theme--form--field--input--border-color-hover));\r\n}\r\n\r\n.sfx-media-icon .icon {\r\n    width: 80px;\r\n    height: 80px;\r\n    position: relative;\r\n}\r\n\r\n.btn-delete-item:hover {\r\n    color: var(--theme--danger);\r\n}\r\n\r\n.sfx-media-icon .icon i {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(50%, 50%);\r\n    font-size: 35px;\r\n}\r\n\r\n.item-icon {\r\n    width: 34px !important;\r\n    text-align: center;\r\n    padding: 0 var(--v-list-item-margin, 4px);\r\n}\r\n\r\n.remove-all span {\r\n    color: red;\r\n    font-size: 12px;\r\n    border: none;\r\n    background: none;\r\n    width: 100%;\r\n}\r\n\r\n.remove-all span:hover {\r\n    cursor: pointer;\r\n    color: rgb(185, 37, 37);\r\n}\r\n\r\n.asset-content {\r\n    max-height: 545px;\r\n    overflow-y: scroll;\r\n}\r\n\r\n.btn-drag-item {\r\n    margin-right: 8px;\r\n    cursor: move;\r\n    cursor: grab;\r\n}\r\n\r\n.btn-drag-item:active {\r\n    cursor: grabbing;\r\n}\r\n\r\n.asset-content::-webkit-scrollbar-track {\r\n    -webkit-box-shadow: inset 0 0 6px rgba(174, 174, 174, 0.3);\r\n    border-radius: 10px;\r\n    background-color: #F5F5F5;\r\n}\r\n\r\n.toolbar {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-top: var(--v-list-item-margin, 4px);\r\n}\r\n\r\n\r\n.container .v-card {\r\n    max-width: 80%;\r\n}\r\n\r\n.grid-bg{\r\n    margin: 0;\r\n    background-color: #fff; /* White background */\r\n    background-image:\r\n            linear-gradient(to right, rgba(204, 204, 204, 0.29) 1px, transparent 1px), /* Vertical lines */\r\n            linear-gradient(to bottom, rgba(204, 204, 204, 0.29) 1px, transparent 1px); /* Horizontal lines */\r\n    background-size: 5px 5px; /* Size of the grid cell */\r\n}\r\n\r\n.cropper {\r\n    max-height: 500px;\r\n    max-width: 85%;\r\n    background: transparent;\r\n    margin: 0 auto;\r\n}\r\n\r\n.btn-close-variant {\r\n    position: absolute;\r\n    top: -59px;\r\n    right: 6px;\r\n}\r\n\r\n.notice-body {\r\n    max-width: 100%;\r\n    padding-bottom: 25px;\r\n}\r\n\r\n.notice-link {\r\n    text-decoration: underline;\r\n    color: dodgerblue;\r\n    cursor: pointer;\r\n}\r\n\r\n.notice-text {\r\n    font-size: 14px;\r\n    margin-left: 5px;\r\n}\r\n\r\n.notice-title {\r\n    color: tomato;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.notice-card {\r\n    max-width: 100%;\r\n    margin-top: 20px;\r\n}\r\n\r\n.image-preview {\r\n    height: 80%;\r\n    width: auto;\r\n}\r\n\r\n.margin-left {\r\n    margin-left: 8px;\r\n}\r\n\r\n.save-crop-btn, .crop-btn {\r\n    z-index: 9;\r\n}\r\n\r\n.variant-buttons {\r\n    position: absolute;\r\n    top: 5px;\r\n    right: 5px;\r\n    display: flex;\r\n    justify-content: end;\r\n    align-items: center;\r\n}\r\n\r\n.variant-image-container {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow: hidden;\r\n    max-height: 100%;\r\n    position: relative;\r\n    padding: 30px;\r\n}\r\n\r\n.margin-top {\r\n    margin-top: 15px;\r\n}\r\n\r\n.font-12 {\r\n    font-size: 12px;\r\n}\r\n\r\n.font-16 {\r\n    font-size: 16px;\r\n}\r\n\r\n.justify-text {\r\n    text-align: justify;\r\n}\r\n\r\n.margin-bottom {\r\n    margin-bottom: 15px\r\n}\r\n\r\n#variants-toolbar-config {\r\n    width: 300px;\r\n    border-right: 1px solid lightgray;\r\n    padding: 10px;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.variant-toolbar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    border: 1px solid lightgray;\r\n    height: 500px;\r\n}\r\n\r\n.position-relative {\r\n    position: relative;\r\n}\r\n\r\n.w-70 {\r\n    width: 70%;\r\n}\r\n\r\n.exceeds-the-limit {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: end;\r\n}\r\n\r\n.margin-right {\r\n    margin-right: 10px;\r\n}\r\n\r\n.variant-actions {\r\n    display: flex;\r\n    justify-content: end;\r\n    align-items: center;\r\n}\r\n\r\n.variant-name {\r\n    margin-left: 10px\r\n}\r\n\r\n.variant-img {\r\n    border-radius: 25%;\r\n    border: 1px solid lightgray;\r\n}\r\n\r\n.variant-info {\r\n    display: flex;\r\n    justify-content: start;\r\n    align-items: center;\r\n}\r\n\r\n.variant-item {\r\n    margin-left: 30px;\r\n    padding: 3px 10px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.variants-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: start;\r\n    margin-top: 5px;\r\n}\r\n\r\n.variant-button {\r\n    margin-right: 10px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.show-variants {\r\n    color: #285c72;\r\n    margin-right: 20px;\r\n}\r\n\r\n.flex-center-end {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: end;\r\n}",{});const to={components:{draggable:ni,Cropper:Yr},props:{value:{type:String,default:null},collection:{type:String,default:"scaleflex_dam_settings"},id:{type:Number,default:1},title:{type:String,default:"Scaleflex DAM"},custom:{type:Boolean,default:!1},limit:{type:Number,default:0},limitTypes:{type:String,default:null},attributes:{type:String,default:null},config:{type:Object,default:null}},watch:{currentVariantConfigs:{handler:Jr.debounce((function(t,e){const n=t.width,i=t.height;this.showCrop?this.$refs.cropper.setCoordinates((({coordinates:t,imageSize:e})=>({width:n,height:i,left:e.width/2-n/2,top:e.height/2-i/2}))):this.updateCurrentVariantShow(),this.cropWidth=n,this.cropHeight=i}),500),deep:!0}},methods:{showVariants(t){const e=this.showVariantsList.indexOf(t);e>-1?this.showVariantsList.splice(e,1):this.showVariantsList.push(t)},updateVariantByCrop(){const{coordinates:t,canvas:e}=this.$refs.cropper.getResult();this.showCrop=!1,this.currentVariantConfigs.width=t.width,this.currentVariantConfigs.height=t.height;const n=`${t.left},${t.top}`,i=`${t.left+t.width},${t.top+t.height}`;this.currentVariantConfigs.tl_px=n,this.currentVariantConfigs.br_px=i},toggleCrop(){this.showCrop=!this.showCrop},isImage:t=>t.startsWith("image"),isVideo:t=>t.startsWith("video"),isAudio:t=>t.startsWith("audio"),hasQueryString(t){try{return new URL(t).search.length>0}catch(t){return!1}},createThumbnail(t){return this.hasQueryString(t)?t+"&width=100&height=100":t+"?width=100&height=100"},trimText(t){if(t.length<=50)return t;const e=t.lastIndexOf("."),n=-1!==e?t.substring(0,e):t,i=-1!==e?t.substring(e):"",r=50-i.length-3;return n.substring(0,Math.max(r,0))+"..."+i},updateCurrentVariantShow(){const t=this.currentVariantShow.split("?")[0],e=new URLSearchParams(this.currentVariantConfigs).toString();this.currentVariantShow=`${t}?${e}`}},emits:["input","close"],setup(n,{emit:i}){const r=t(!1),o=I(),a=t(!1),s=t(!0),l=t(""),u=t(""),c=t(""),h=t(null),d=t([]),f=t([]),p=t(!1),g=t(""),m=t(!1),v=t(!1),b=t(!1),y=t(!1),w=t(null),x=t(null),_=t(null),S=t(null),A=t(!1),C=t([]),z=t({width:100,height:100}),E=t(0),k=t(0);function R(){y.value=!1,w.value=null,A.value=!1}async function T(t,e){!function(t,e,r){if(!window.Filerobot)return;let o=window.Filerobot,a=null;a=o.Core({securityTemplateID:t.sec,container:t.token});let s=t.directory,l=o.Explorer,u=o.XHRUpload;a.use(l,{config:{rootFolderPath:s},target:"#sfx-dam-widget",inline:!0,width:"100%",height:"100%",disableExportButton:!1,hideExportButtonIcon:!0,preventExportDefaultBehavior:!0,dismissUrlPathQueryUpdate:!0,disableDownloadButton:!1,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,locale:{strings:{mutualizedExportButtonLabel:"Add assets",mutualizedDownloadButton:"Add assets"}},filters:{mimeTypes:f.value}}).use(u).on("export",(async(t,o,a,s)=>{!function(t,e,r){let o=D(n.value);const a=o.findIndex((t=>t.uuid===e.uuid)),s=o[a].variants.findIndex((t=>t.code===r.code)),l=n.config.variants.find((t=>t.code===r.code)),u=new URLSearchParams(l.preset);let c=B(t.link,"vh");o[a].variants[s].img_url=U(c,u),C.value=[],C.value=[e.uuid],i("input",o)}(t[0],e,r),O()})).on("complete",(({failed:t,uploadID:e,successful:n})=>{t&&console.dir(t),n&&(console.dir(n),n.forEach(((t,e)=>{})))}))}({token:l.value,sec:u.value,directory:c.value,limitType:f.value},t,e)}return e((()=>{!async function(){await async function(){try{const t=(await o.get(`/items/scaleflex_dam_settings/${n.id}`)).data.data;if(!t)throw new Error("Data not found");t.token&&t.sec?(g.value=`https://api.filerobot.com/${t.token}/v5`,l.value=t.token||"",u.value=t.sec||"",c.value=t.directory||"",v.value=!0):v.value=!1,n.custom?(h.value=n.limit||null,f.value=n.limitTypes?n.limitTypes:[],d.value=n.attributes?n.attributes:[]):(h.value=t.limit||null,f.value=t.limitType?t.limitType.split(","):[],d.value=t.attributes?t.attributes.split(","):[]),n.config&&"variants"in n.config&&(b.value=!0)}catch(t){console.error(t)}}().then((function(){s.value=!1,a.value=!0}))}()})),{openModal:function(){document.getElementById("sfx-modal").setAttribute("style","display: block"),r.value=!0,async function(){!function(t){if(!window.Filerobot)return;let e=window.Filerobot,n=null;n=e.Core({securityTemplateID:t.sec,container:t.token});let i=t.directory,r=e.Explorer,o=e.XHRUpload;n.use(r,{config:{rootFolderPath:i},target:"#sfx-dam-widget",inline:!0,width:"100%",height:"100%",disableExportButton:!1,hideExportButtonIcon:!0,preventExportDefaultBehavior:!0,dismissUrlPathQueryUpdate:!0,disableDownloadButton:!1,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,locale:{strings:{mutualizedExportButtonLabel:"Add assets",mutualizedDownloadButton:"Add assets"}},filters:{mimeTypes:f.value}}).use(o).on("export",(async(t,e,n,i)=>{await P(t),O()})).on("complete",(({failed:t,uploadID:e,successful:n})=>{t&&console.dir(t),n&&n.forEach(((t,e)=>{}))}))}({token:l.value,sec:u.value,directory:c.value,limitType:f.value})}()},closeModal:O,deleteItem:function(t){let e=n.value;e.splice(t,1),j(e),i("input",e)},limitFiles:L,getIsOverLimit:function(){return p.value},getTotalAssets:V,addAssetsDisabled:function(){return h.value===V()&&V()>0||s.value},refreshAssets:async function(){M(n.value)?await P(D(n.value),!0):await P(n.value,!0)},getIsLoading:function(){return s.value},removeAllAssets:function(){i("input",[]),p.value=!1,m.value=!1},log:function(){i("input",D(n.value))},closeDialog:function(){m.value=!1},clickRemoveAllAssets:function(){m.value=!0},dialogVisible:m,isTokenAndSecExists:v,configVariantsExist:b,toDamSetting:function(){const t=document.querySelector('a[href="/admin/scaleflex-dam-setting"]');t&&t.click()},closeVariantDialog:R,showVariantDialog:function(t,e){y.value=!0,w.value=e.img_url,x.value=t,_.value=e,S.value=function(t){return t.split("?")[0]}(e.img_url);const n=new URL(e.img_url),i=n.searchParams.get("width"),r=n.searchParams.get("height"),o=n.searchParams.get("tl_px"),a=n.searchParams.get("br_px");z.value={width:i,height:r,tl_px:o,br_px:a},E.value=i,k.value=r},isShowVariantDialog:y,currentVariantShow:w,currentVariantConfigs:z,showVariantsList:C,currentVariantOrigin:S,showCrop:A,openEditModal:function(t,e){document.getElementById("sfx-modal").setAttribute("style","display: block"),r.value=!0,T(t,e)},cropWidth:E,cropHeight:k,saveVariant:function(){const t=x.value,e=_.value;let r=D(n.value);const o=r.findIndex((e=>e.uuid===t.uuid)),a=r[o].variants.findIndex((t=>t.code===e.code)),s=z.value;let l=e.img_url;for(let t of Object.entries(s))l=B(l,t[0]);const u=new URLSearchParams(s);r[o].variants[a].img_url=U(l,u),C.value=[],C.value=[t.uuid],i("input",r),R()}};function O(){document.getElementById("sfx-modal").setAttribute("style","display: none"),i("close"),r.value=!1}function j(t){const e=L();p.value=e>0&&t.length>e}function $(t){return t.split("/")[0]}async function P(t,e=!1){s.value=!0;const r=t.map((async(t,i)=>{try{let o="";o=e?function(t){return t.uuid.split("_")[0]}(t):t.file.uuid;const a=await async function(t){s.value=!0;const e=g.value+"/files/"+t+"?format=select:human";try{const t=await fetch(e);if(!t.ok)throw new Error(`Error: ${t.status}`);return await t.json()}catch(t){return null}finally{s.value=!1}}(o);let l="";l=a?.file?.url.cdn,void 0!==t.file?.url.download&&(l=t.file?.url.download),e&&(r=t.cdn,l=function(t,e){const n=Object.entries(e).map((([t,e])=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&");return t.split("?")[0]+"?"+n}(l,function(t){const e=t.split("?")[1];if(!e)return{};const n=e.split("&"),i={};return n.forEach((t=>{const[e,n]=t.split("=");i[decodeURIComponent(e)]=decodeURIComponent(n||"")})),i}(r)));const u={uuid:a?.file?.uuid+"_"+W(i),name:a?.file?.name,cdn:N(B(l,"vh")),extension:a?.file?.extension,source:"filerobot",type:a?.file?.type,ownerName:a?.file?.owner?.name};if(b.value&&u.type.startsWith("image")){const t=[],e=n.config.variants;for(let n of e){const e=new URLSearchParams(n.preset),i=`${u.cdn}?${e.toString()}`;t.push({code:n.code,name:n.name,img_url:i})}u.variants=t}return d.value.length>0&&(u.attributes=function(t){let e={};if(d.value.length>0){let n=d.value;for(let i of n){let n=i.trim();e[n]=t[n]}return e}}(a?.file)),u}catch(t){return null}var r}));try{const t=(await Promise.all(r)).filter((t=>t));let o=null;o=e||!n.value?[...t]:[...n.value,...t],j(o),L()>0&&(o=o.slice(0,L())),f.value.length>0&&(o=function(t,e){const n=e;return n.includes("document")?t.filter((t=>n.includes($(t.type))||!["image","video","audio"].includes($(t.type)))):t.filter((t=>n.includes($(t.type))))}(o,f.value)),i("input",o)}catch(t){console.error("Error fetching files:",t)}finally{s.value=!1}}function L(){return h.value&&h.value>0?Number(h.value):-1}function W(t){return n.value?t+n.value.length:t}function B(t,e){var n=t.split("?");if(n.length>=2){for(var i=encodeURIComponent(e)+"=",r=n[1].split(/[&;]/g),o=r.length;o-- >0;)-1!==r[o].lastIndexOf(i,0)&&r.splice(o,1);return n[0]+(r.length>0?"?"+r.join("&"):"")}return t}function V(){return n.value?n.value.length:0}function N(t){return t.includes("?")&&0===t.split("?")[1].length?function(t){return t.replace(/\?$/,"")}(t):t}function U(t,e){return`${N(t)}?${e.toString()}`}}},eo=["value"],no={id:"sfx-result"},io={class:"sfx-item"},ro={class:"sfx-item-inner"},oo={class:"btn-drag-item"},ao={class:"sfx-media-icon"},so=["href"],lo=["src","alt"],uo={class:"item-info"},co={class:"flex-center-end"},ho=["onClick"],fo={key:2},po={key:3},go=["onClick"],mo={key:0,class:"variants-container"},vo=["onClick"],bo={class:"variant-info"},yo=["src","alt"],wo={class:"variant-name"},xo={class:"variant-actions"},_o={key:1,class:"sfx-item"},So={class:"sfx-item-inner"},Ao={class:"btn-drag-item"},Co={class:"sfx-media-icon"},zo=["href"],Eo={class:"item-info"},ko=["onClick"],Ro={key:2,class:"sfx-item"},Do={class:"sfx-item-inner"},Mo={class:"btn-drag-item"},To={class:"sfx-media-icon"},Io=["href"],Oo={class:"item-info"},jo=["onClick"],$o={key:3,class:"sfx-item"},Po={class:"sfx-item-inner"},Lo={class:"btn-drag-item"},Wo={class:"sfx-media-icon"},Bo=["href"],Vo={class:"item-info"},No=["onClick"],Uo={class:"bottom-message"},Fo={key:0,class:"column align-left"},Ho={key:0},Yo={key:0,class:"exceeds-the-limit"},Xo={class:"variant-toolbar"},qo={id:"variants-toolbar-config"},Zo={id:"variants-toolbar-config-size"},Go={class:"margin-top"},Ko={id:"variants-toolbar-image",class:"grid-bg variant-image-container"},Qo={class:"variant-buttons"},Jo=["src"],ta={key:1},ea={key:0,class:"toolbar"},na={key:1},ia={class:"modal"},ra={class:"modal-header"},oa={class:"modal-body"},aa={class:"modal-footer"};var sa=B(to,[["render",function(t,e,p,m,v,b){const y=n("VIcon"),w=n("VButton"),x=n("draggable"),_=n("v-card-title"),S=n("v-card-text"),C=n("v-card-actions"),z=n("v-card"),E=n("VDialog"),k=n("VCardTitle"),R=n("VInput"),D=n("cropper"),M=n("VCardText"),T=n("VCard");return i(),s(d,null,[e[30]||(e[30]=a("link",{rel:"stylesheet",type:"text/css",href:"https://scaleflex.cloudimg.io/v7/plugins/filerobot-widget/v3/latest/filerobot-widget.min.css"},null,-1)),a("input",{value:JSON.stringify(p.value),type:"hidden",id:"sfx_value"},null,8,eo),a("div",no,[l(x,{class:"asset-content",list:p.value,onChange:m.log},{default:o((()=>[(i(!0),s(d,null,f(p.value,((t,n)=>(i(),s("div",{key:n,class:"media-container"},[b.isImage(t.type)?(i(),s(d,{key:0},[a("div",io,[a("div",ro,[a("div",oo,[l(y,{name:"drag_handle"})]),a("div",ao,[a("a",{href:t.cdn,target:"_blank"},[a("img",{src:b.createThumbnail(t.cdn),alt:t.name,class:"media-item"},null,8,lo),l(y,{color:"white",name:"visibility",xsmall:!0,class:"media-item-icon"})],8,so)]),a("div",uo,[a("span",null,h(b.trimText(t.name)),1)])]),a("div",co,[m.configVariantsExist?(i(),s("div",{key:0,class:"show-variants",onClick:e=>b.showVariants(t.uuid)},[l(w,{xSmall:!0,warning:m.showVariantsList.indexOf(t.uuid)>-1,outlined:!0},{default:o((()=>[-1===m.showVariantsList.indexOf(t.uuid)?(i(),r(y,{key:0,style:{"margin-right":"5px"},name:"visibility",xSmall:!0})):u("v-if",!0),m.showVariantsList.indexOf(t.uuid)>-1?(i(),r(y,{key:1,style:{"margin-right":"5px"},name:"visibility_off",xSmall:!0})):u("v-if",!0),-1===m.showVariantsList.indexOf(t.uuid)?(i(),s("span",fo,"Show variants")):u("v-if",!0),m.showVariantsList.indexOf(t.uuid)>-1?(i(),s("span",po,"Hide variants")):u("v-if",!0)])),_:2},1032,["warning"])],8,ho)):u("v-if",!0),a("div",{class:"btn-delete-item",onClick:t=>m.deleteItem(n)},[l(y,{name:"close"})],8,go)])]),m.configVariantsExist&&m.showVariantsList.indexOf(t.uuid)>-1?(i(),s("div",mo,[(i(!0),s(d,null,f(t.variants,((n,r)=>(i(),s("div",{class:"sfx-item variant-item",onClick:e=>m.showVariantsList.indexOf(t.uuid)>-1,small:!0,key:r},[a("div",bo,[a("img",{src:n.img_url,alt:t.name,class:"media-item variant-img",width:"30",height:"30"},null,8,yo),a("span",wo,h(n.name),1)]),a("div",xo,[l(w,{class:"margin-right",xSmall:!0,outlined:!0,onClick:e=>m.showVariantDialog(t,n)},{default:o((()=>e[10]||(e[10]=[c(" Edit ")]))),_:2},1032,["onClick"]),l(w,{xSmall:!0,secondary:!0,onClick:e=>m.openEditModal(t,n)},{default:o((()=>e[11]||(e[11]=[c(" Replace ")]))),_:2},1032,["onClick"])])],8,vo)))),128))])):u("v-if",!0)],64)):b.isVideo(t.type)?(i(),s("div",_o,[a("div",So,[a("div",Ao,[l(y,{name:"drag_handle"})]),a("div",Co,[a("a",{href:t.cdn,target:"_blank"},[l(y,{class:"item-icon",name:"videocam"}),l(y,{color:"white",name:"visibility",xsmall:!0,class:"media-item-icon"})],8,zo)]),a("div",Eo,[a("span",null,h(b.trimText(t.name)),1)])]),a("div",{class:"btn-delete-item",onClick:t=>m.deleteItem(n)},[l(y,{name:"close"})],8,ko)])):b.isAudio(t.type)?(i(),s("div",Ro,[a("div",Do,[a("div",Mo,[l(y,{name:"drag_handle"})]),a("div",To,[a("a",{href:t.cdn,target:"_blank"},[l(y,{class:"item-icon",name:"play_circle"}),l(y,{color:"white",name:"visibility",xsmall:!0,class:"media-item-icon"})],8,Io)]),a("div",Oo,[a("span",null,h(b.trimText(t.name)),1)])]),a("div",{class:"btn-delete-item",onClick:t=>m.deleteItem(n)},[l(y,{name:"close"})],8,jo)])):(i(),s("div",$o,[a("div",Po,[a("div",Lo,[l(y,{name:"drag_handle"})]),a("div",Wo,[a("a",{href:t.cdn,target:"_blank"},[l(y,{class:"item-icon",name:"draft"}),l(y,{color:"white",name:"visibility",xsmall:!0,class:"media-item-icon"})],8,Bo)]),a("div",Vo,[a("span",null,h(b.trimText(t.name)),1)])]),a("div",{class:"btn-delete-item",onClick:t=>m.deleteItem(n)},[l(y,{name:"close"})],8,No)]))])))),128))])),_:1},8,["list","onChange"]),a("div",Uo,[m.getTotalAssets()>0?(i(),s("div",Fo,[a("span",null,"Total: "+h(m.getTotalAssets()),1),m.limitFiles()>0?(i(),s("span",Ho," / Limit "+h(m.limitFiles()),1)):u("v-if",!0)])):u("v-if",!0)]),m.getIsOverLimit()?(i(),s("div",Yo,e[12]||(e[12]=[a("span",{class:"ml-1"},"Exceeded maximum number of assets",-1)]))):u("v-if",!0),l(E,{modelValue:m.dialogVisible,"onUpdate:modelValue":e[0]||(e[0]=t=>m.dialogVisible=t)},{default:o((()=>[l(z,{class:"dialog-content"},{default:o((()=>[l(_,null,{default:o((()=>e[13]||(e[13]=[c("Scaleflex DAM")]))),_:1}),l(S,null,{default:o((()=>e[14]||(e[14]=[c("Are you sure you want to delete everything? Please confirm to proceed.")]))),_:1}),l(C,null,{default:o((()=>[l(w,{onClick:m.removeAllAssets,warning:!0},{default:o((()=>e[15]||(e[15]=[c(" Yes ")]))),_:1},8,["onClick"]),l(w,{onClick:m.closeDialog,secondary:!0},{default:o((()=>e[16]||(e[16]=[c(" No ")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),l(E,{modelValue:m.isShowVariantDialog,"onUpdate:modelValue":e[4]||(e[4]=t=>m.isShowVariantDialog=t)},{default:o((()=>[l(T,{class:"dialog-content w-70"},{default:o((()=>[l(k,null,{default:o((()=>e[17]||(e[17]=[c(" Edit Image Variants ")]))),_:1}),l(M,{class:"position-relative"},{default:o((()=>[a("div",Xo,[a("div",qo,[a("div",Zo,[e[20]||(e[20]=a("div",{class:"margin-bottom"},[a("span",{class:"font-16"},"Size"),a("p",{class:"font-12 justify-text",style:{hyphens:"auto"}},"Change width and height of the image")],-1)),a("div",null,[e[18]||(e[18]=a("span",null,"Width",-1)),l(R,{small:!0,modelValue:m.currentVariantConfigs.width,"onUpdate:modelValue":e[1]||(e[1]=t=>m.currentVariantConfigs.width=t)},null,8,["modelValue"])]),a("div",Go,[e[19]||(e[19]=a("span",null,"Height",-1)),l(R,{small:!0,modelValue:m.currentVariantConfigs.height,"onUpdate:modelValue":e[2]||(e[2]=t=>m.currentVariantConfigs.height=t)},null,8,["modelValue"])])])]),a("div",Ko,[a("div",Qo,[m.showCrop?u("v-if",!0):(i(),r(w,{key:0,onClick:b.toggleCrop,icon:!0,xSmall:!0,secondary:!0,class:"margin-left crop-btn"},{default:o((()=>[l(y,{name:"crop",xSmall:!0})])),_:1},8,["onClick"])),m.showCrop?(i(),r(w,{key:1,onClick:b.updateVariantByCrop,icon:!0,xSmall:!0,class:"margin-left save-crop-btn"},{default:o((()=>[l(y,{name:"save",xSmall:!0})])),_:1},8,["onClick"])):u("v-if",!0)]),m.showCrop?u("v-if",!0):(i(),s("img",{key:0,class:"image-preview",src:m.currentVariantShow},null,8,Jo)),m.showCrop?(i(),s("div",ta,[l(D,{class:"cropper",ref:"cropper",src:m.currentVariantOrigin,"default-size":{width:m.cropWidth,height:m.cropHeight},"stencil-props":{resizable:!1}},null,8,["src","default-size"])])):u("v-if",!0)])]),a("div",{class:"btn-close-variant",onClick:e[3]||(e[3]=(...t)=>m.closeVariantDialog&&m.closeVariantDialog(...t))},[l(y,{name:"close"})])])),_:1}),l(C,null,{default:o((()=>[l(w,{onClick:m.saveVariant,warning:!0},{default:o((()=>e[21]||(e[21]=[c(" Save ")]))),_:1},8,["onClick"]),l(w,{onClick:m.closeVariantDialog,secondary:!0},{default:o((()=>e[22]||(e[22]=[c(" Cancel ")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),m.isTokenAndSecExists?(i(),s("div",ea,[l(w,{onClick:m.openModal,disabled:m.addAssetsDisabled()},{default:o((()=>[l(y,{name:"image"}),e[23]||(e[23]=a("span",{style:{"margin-left":"5px"}},"Browse assets",-1))])),_:1},8,["onClick","disabled"]),a("div",null,[m.getTotalAssets()>0?(i(),r(w,{key:0,type:"button",onClick:e[5]||(e[5]=t=>m.refreshAssets()),loading:m.getIsLoading(),outlined:!0},{default:o((()=>[l(y,{name:"refresh"}),e[24]||(e[24]=a("span",{style:{"margin-left":"5px"}},"Refresh",-1))])),_:1},8,["loading"])):u("v-if",!0),m.getTotalAssets()>0?(i(),r(w,{key:1,style:{"margin-left":"5px"},type:"button",onClick:e[6]||(e[6]=t=>m.clickRemoveAllAssets()),danger:!0},{default:o((()=>[l(y,{name:"delete"}),e[25]||(e[25]=a("span",{style:{"margin-left":"5px"}},"Remove all",-1))])),_:1})):u("v-if",!0)])])):(i(),s("div",na,[l(T,{class:"notice-card"},{default:o((()=>[l(k,{class:"notice-title"},{default:o((()=>[l(y,{name:"report"}),e[26]||(e[26]=a("span",{class:"notice-text"},"Scaleflex DAM Notice",-1))])),_:1}),l(M,{class:"notice-body"},{default:o((()=>[e[27]||(e[27]=c(" Please visit the ")),a("span",{class:"notice-link",onClick:e[7]||(e[7]=(...t)=>m.toDamSetting&&m.toDamSetting(...t))},"Scaleflex DAM Configuration"),e[28]||(e[28]=c(" to add your Token and Template ID before browsing assets. "))])),_:1})])),_:1})])),a("div",{style:g({display:t.isOpen?"block":"none"}),class:"modal-overlay",id:"sfx-modal"},[a("div",ia,[a("div",ra,[a("h3",null,h(p.title),1),a("button",{onClick:e[8]||(e[8]=(...t)=>m.closeModal&&m.closeModal(...t)),class:"modal-close-btn"},"Ã—")]),a("div",oa,[A(t.$slots,"default",{},(()=>[e[29]||(e[29]=a("div",{id:"sfx-dam-widget"},null,-1))]))]),a("div",aa,[a("button",{onClick:e[9]||(e[9]=(...t)=>m.closeModal&&m.closeModal(...t)),class:"btn"},"Close")])])],4)],64)}],["__file","interface.vue"]]);const la=[Bt,{id:"scaleflex-dam",name:"Scaleflex DAM",icon:"image",description:"",component:sa,options:[{field:"custom",type:"boolean",name:"Use custom setting",recommendedDisplays:["scaleflex-dam-display"],schema:{default_value:!1},meta:{interface:"toggle",width:"half"}},{field:"limit",type:"integer",name:"Limit",schema:{default_value:0},meta:{interface:"input",width:"half",options:{min:0}}},{field:"limitTypes",type:"string",name:"Limit Types",meta:{interface:"select-multiple-dropdown",options:{choices:[{text:"Image",value:"image"},{text:"Document",value:"document"},{text:"Video",value:"video"},{text:"Audio",value:"audio"}]},width:"half"}},{field:"attributes",type:"string",name:"Attributes",meta:{interface:"select-multiple-dropdown",options:{choices:[{text:"Meta",value:"meta"},{text:"Tags",value:"tags"},{text:"Info",value:"info"}]},width:"half"}},{field:"config",type:"json",name:"Configuration",meta:{interface:"input-code",width:"full"}}],types:["json"]}],ua=[ht],ca=[],ha=[nt,yt],da=[],fa=[],pa=[];export{ua as displays,la as interfaces,ca as layouts,ha as modules,pa as operations,da as panels,fa as themes};
